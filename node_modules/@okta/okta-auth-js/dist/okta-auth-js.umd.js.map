{"version":3,"sources":["webpack://OktaAuth/webpack/universalModuleDefinition","webpack://OktaAuth/webpack/bootstrap","webpack://OktaAuth/./lib/util.ts","webpack://OktaAuth/./lib/errors/AuthSdkError.ts","webpack://OktaAuth/./lib/constants.ts","webpack://OktaAuth/./node_modules/@babel/runtime/helpers/classCallCheck.js","webpack://OktaAuth/./lib/http.ts","webpack://OktaAuth/./node_modules/@babel/runtime/helpers/assertThisInitialized.js","webpack://OktaAuth/./node_modules/@babel/runtime/helpers/getPrototypeOf.js","webpack://OktaAuth/./lib/browser/browserStorage.ts","webpack://OktaAuth/./lib/tx/util.ts","webpack://OktaAuth/./lib/tx/poll.ts","webpack://OktaAuth/./lib/tx/AuthTransaction.ts","webpack://OktaAuth/./lib/tx/api.ts","webpack://OktaAuth/./lib/tx/TransactionState.ts","webpack://OktaAuth/./node_modules/@babel/runtime/helpers/inherits.js","webpack://OktaAuth/./node_modules/@babel/runtime/helpers/possibleConstructorReturn.js","webpack://OktaAuth/./lib/types/index.ts","webpack://OktaAuth/./lib/storageBuilder.ts","webpack://OktaAuth/./node_modules/@babel/runtime/helpers/createClass.js","webpack://OktaAuth/./lib/errors/CustomError.ts","webpack://OktaAuth/./node_modules/@babel/runtime/regenerator/index.js","webpack://OktaAuth/./node_modules/@babel/runtime/helpers/typeof.js","webpack://OktaAuth/./lib/errors/AuthPollStopError.ts","webpack://OktaAuth/./lib/errors/OAuthError.ts","webpack://OktaAuth/./lib/errors/index.ts","webpack://OktaAuth/./lib/errors/AuthApiError.ts","webpack://OktaAuth/./lib/clock.ts","webpack://OktaAuth/./lib/TokenManager.ts","webpack://OktaAuth/./node_modules/@babel/runtime/helpers/setPrototypeOf.js","webpack://OktaAuth/./lib/types/Token.ts","webpack://OktaAuth/./lib/OktaAuthBase.ts","webpack://OktaAuth/./lib/builderUtil.ts","webpack://OktaAuth/./lib/browser/features.ts","webpack://OktaAuth/./lib/fetch/fetchRequest.ts","webpack://OktaAuth/./lib/session.ts","webpack://OktaAuth/./lib/oauthUtil.ts","webpack://OktaAuth/./lib/pkce.ts","webpack://OktaAuth/./lib/token.ts","webpack://OktaAuth/./lib/crypto.ts","webpack://OktaAuth/./lib/PromiseQueue.ts","webpack://OktaAuth/./lib/browser/fingerprint.ts","webpack://OktaAuth/./lib/browser/browser.ts","webpack://OktaAuth/./node_modules/@babel/runtime/helpers/wrapNativeSuper.js","webpack://OktaAuth/./node_modules/cross-fetch/dist/browser-ponyfill.js","webpack://OktaAuth/./lib/browser/index.ts","webpack://OktaAuth/./node_modules/regenerator-runtime/runtime.js","webpack://OktaAuth/./node_modules/@babel/runtime/helpers/isNativeFunction.js","webpack://OktaAuth/./node_modules/@babel/runtime/helpers/construct.js","webpack://OktaAuth/./node_modules/@babel/runtime/helpers/isNativeReflectConstruct.js","webpack://OktaAuth/./node_modules/js-cookie/src/js.cookie.js","webpack://OktaAuth/./node_modules/tiny-emitter/index.js"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","stringToBase64Url","str","b64","replace","base64ToBase64Url","btoa","base64UrlToBase64","b64u","base64UrlToString","length","utf8","atob","decodeURIComponent","escape","e","stringToBuffer","buffer","Uint8Array","charCodeAt","base64UrlDecode","isAbsoluteUrl","url","test","isString","obj","toString","isObject","isNumber","toQueryParams","undefined","push","encodeURIComponent","join","genRandomString","randomCharset","random","cl","Math","floor","removeNils","cleaned","prop","clone","JSON","stringify","parse","omit","newobj","props","indexOf","find","collection","searchParams","item","found","getLink","linkName","altName","_links","link","getConsole","nativeConsole","console","log","warn","text","removeTrailingSlash","path","trimmed","isIE11OrLess","document","documentMode","isFunction","fn","delay","ms","Promise","resolve","setTimeout","isPromise","finally","AuthSdkError","msg","xhr","errorCode","errorSummary","errorLink","errorId","errorCauses","CustomError","STATE_TOKEN_KEY_NAME","DEFAULT_POLLING_DELAY","DEFAULT_MAX_CLOCK_SKEW","DEFAULT_CACHE_DURATION","REDIRECT_OAUTH_PARAMS_NAME","REDIRECT_STATE_COOKIE_NAME","REDIRECT_NONCE_COOKIE_NAME","TOKEN_STORAGE_NAME","CACHE_STORAGE_NAME","PKCE_STORAGE_NAME","ACCESS_TOKEN_STORAGE_KEY","ID_TOKEN_STORAGE_KEY","instance","Constructor","TypeError","httpRequest","sdk","options","method","args","saveAuthnState","accessToken","withCredentials","storageUtil","storage","httpCache","getHttpCache","cookies","cacheResponse","cachedResponse","getStorage","Date","now","expiresAt","response","headers","userAgent","assign","err","res","ajaxOptions","data","httpRequestClient","then","resp","responseText","stateToken","delete","set","updateStorage","catch","serverErr","status","transformErrorXHR","AuthApiError","getOptions","getIssuerOrigin","post","postOptions","self","ReferenceError","_getPrototypeOf","setPrototypeOf","getPrototypeOf","__proto__","Cookies","require","browserHasLocalStorage","getLocalStorage","testStorage","browserHasSessionStorage","getSessionStorage","getPKCEStorage","preferLocalStorage","storageBuilder","getCookieStorage","localStorage","sessionStorage","secure","sameSite","getItem","setItem","getInMemoryStorage","store","removeItem","cookieOptions","expires","remove","addStateToken","builtArgs","getStateToken","getPollFn","ref","rememberDevice","autoPush","transactionCallBack","pollLink","isPolling","retryCount","recursivePoll","opts","reject","href","http","pollFn","pollRes","factorResult","AuthPollStopError","delayFn","AuthTransaction","delayLength","pow","this","flattenEmbedded","cancel","link2fn","Array","isArray","lk","hints","allow","factorType","provider","params","profile","updatePhone","postToTransaction","objArr","ol","embedded","_embedded","fns","type","poll","links2fns","transactionStatus","resumeTransaction","tx","exists","_get","introspect","transactionStep","transactionExists","TransactionState","subClass","superClass","constructor","writable","configurable","_typeof","assertThisInitialized","webstorage","storageName","storageString","setStorage","clearStorage","_defineProperties","target","descriptor","protoProps","staticProps","message","Error","iterator","OAuthError","summary","SdkClock","localOffset","parseInt","DEFAULT_OPTIONS","autoRenew","expireEarlySeconds","getExpireTime","tokenMgmtRef","token","hasExpired","clock","emitError","error","emitter","emit","clearExpireEventTimeout","clearTimeout","expireTimeouts","renewPromise","setExpireEventTimeout","expireTime","expireEventWait","max","expireEventTimeout","emitExpired","add","tokenStorage","scopes","isIDToken","isAccessToken","getAsync","emitRemoved","renew","existingPromise","freshToken","oldToken","tokenKey","clear","clearExpireEventTimeoutAll","TokenManager","storageProvider","keys","forEach","k","existingValues","storageKey","valueToStore","on","off","setExpireEventTimeoutAll","_setPrototypeOf","isToken","idToken","OktaAuthBase","issuer","RegExp","template","assertValidConfig","resume","split","isWindowsPhone","getUserAgent","navigator","isFingerprintSupported","agent","isPopupPostMessageSupported","isIE8or9","postMessage","isTokenVerifySupported","crypto","subtle","hasTextEncoder","TextEncoder","isPKCESupported","isHTTPS","location","protocol","isLocalhost","hostname","fetchRequest","body","fetch","credentials","ok","toLowerCase","json","readData","result","responseType","responseJSON","formatResult","sessionExists","session","getSession","refresh","user","closeSession","refreshSession","setCookieAndRedirect","sessionToken","redirectUrl","checkAccountSetupComplete","addListener","eventTarget","addEventListener","attachEvent","removeListener","removeEventListener","detachEvent","loadFrame","src","iframe","createElement","style","display","appendChild","loadPopup","title","popupTitle","appearance","winEl","open","getWellKnown","authServerUri","getOAuthUrls","arguments","authorizeUrl","userinfoUrl","tokenUrl","logoutUrl","revokeUrl","baseUrl","hasCodeInUrl","hashOrSearch","isLoginRedirect","hash","authParams","pkce","responseMode","search","dec2hex","dec","substr","clearMeta","DEFAULT_CODE_CHALLENGE_METHOD","generateVerifier","prefix","a","verifier","ceil","getRandomValues","from","slice","saveMeta","meta","codeVerifier","loadMeta","computeChallenge","encode","digest","arrayBuffer","String","fromCharCode","apply","getToken","urls","clientId","redirectUri","authorizationCode","validateOptions","getPostData","__awaiter","thisArg","_arguments","P","generator","fulfilled","step","next","rejected","done","browserStorage","revokeToken","token_type_hint","creds","decodeToken","decodedToken","jwt","header","payload","signature","verifyToken","validationParams","validationOptions","ignoreSignature","claims","aud","iss","nonce","iat","exp","maxClockSkew","validateClaims","features","kid","wellKnown","jwksUri","cachedKey","getKey","algo","use","importKey","cryptoKey","b64Signature","verify","sdkCrypto","valid","at_hash","firstHalf","addPostMessageListener","timeout","state","responseHandler","timeoutId","origin","validateResponse","oauthParams","handleOAuthResponse","tokenParams","code","PKCE","getTokenParams","exchangeCodeForToken","tokenDict","expiresIn","expires_in","tokenType","token_type","access_token","id_token","Number","decode","idTokenObj","tokens","buildAuthorizeParams","oauthQueryParams","codeChallenge","codeChallengeMethod","idp","idpScope","loginHint","maxAge","prompt","mayBeArray","scope","convertTokenParamsToOAuthParams","prepareTokenParams","requestUrl","iframePromise","iframeEl","contains","parentElement","removeChild","oauthPromise","windowEl","closePoller","setInterval","closed","clearInterval","close","getWithoutPrompt","getWithPopup","getDefaultTokenParams","errorMessage","clonedParams","addOAuthParamsToStorage","tokenParamsStr","getWithRedirect","_setLocation","renewToken","parseFromUrl","paramStr","defaultResponseMode","nativeLoc","_getLocation","substring","oauthParamsStr","getOAuthParamsStrFromStorage","plus2space","paramSplit","fragment","charAt","param","exec","urlParamsToObject","nativeHistory","_getHistory","nativeDoc","_getDocument","replaceState","pathname","removeSearch","removeHash","getUserInfo","accessTokenObject","idTokenObject","tokenManager","userInfo","sub","authenticateHeader","getResponseHeader","errorMatches","match","errorDescriptionMatches","errorDescription","PromiseQueue","queue","running","thisObject","run","queueItem","shift","fingerprint","listener","source","Emitter","getCookieSettings","cookieSettings","OktaAuthBrowser","postLogoutRedirectUri","sdkValue","SDK_VERSION","_tokenQueue","revoke","syncMethods","history","_postToTransaction","sendFingerprint","defaultUri","currentUri","revokeAccessToken","reload","idTokenHint","logoutUri","isNativeFunction","construct","_wrapNativeSuper","Class","_cache","Map","has","Wrapper","__self__","F","DOMException","support","Blob","viewClasses","isArrayBufferView","ArrayBuffer","isView","normalizeName","normalizeValue","iteratorFor","items","Headers","map","append","getOwnPropertyNames","consumed","bodyUsed","fileReaderReady","reader","onload","onerror","readBlobAsArrayBuffer","blob","FileReader","promise","readAsArrayBuffer","bufferClone","buf","view","byteLength","Body","_initBody","_bodyInit","_bodyText","isPrototypeOf","_bodyBlob","FormData","_bodyFormData","URLSearchParams","DataView","_bodyArrayBuffer","readAsText","chars","readArrayBufferAsText","formData","oldValue","callback","values","entries","methods","Request","input","upcased","signal","toUpperCase","referrer","form","trim","bytes","Response","bodyInit","statusText","redirectStatuses","redirect","RangeError","stack","init","request","aborted","XMLHttpRequest","abortXhr","abort","rawHeaders","getAllResponseHeaders","line","parts","responseURL","ontimeout","onabort","setRequestHeader","onreadystatechange","readyState","send","polyfill","default","runtime","Op","hasOwn","$Symbol","iteratorSymbol","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","wrap","innerFn","outerFn","tryLocsList","protoGenerator","Generator","context","Context","_invoke","arg","doneResult","delegate","delegateResult","maybeInvokeDelegate","ContinueSentinel","sent","_sent","dispatchException","abrupt","record","tryCatch","makeInvokeMethod","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","NativeIteratorPrototype","Gp","defineIteratorMethods","AsyncIterator","PromiseImpl","previousPromise","callInvokeWithMethodAndArg","invoke","__await","unwrapped","info","resultName","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","displayName","isGeneratorFunction","genFun","ctor","mark","awrap","async","iter","reverse","pop","skipTempReset","prev","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","thrown","delegateYield","regeneratorRuntime","accidentalStrictMode","Function","isNativeReflectConstruct","_construct","Parent","Reflect","sham","Proxy","OldCookies","api","noConflict","extend","attributes","converter","defaults","setMilliseconds","getMilliseconds","toUTCString","write","stringifiedAttributes","attributeName","cookie","rdecode","read","getJSON","withConverter","E","ctx","once","_","evtArr","len","evts","liveEvents"],"mappings":"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","file":"okta-auth-js.umd.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"OktaAuth\"] = factory();\n\telse\n\t\troot[\"OktaAuth\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 35);\n","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\n/* global window, document, btoa, atob */\n// converts a string to base64 (url/filename safe variant)\nexport function stringToBase64Url(str) {\n    var b64 = btoa(str);\n    return base64ToBase64Url(b64);\n}\n// converts a standard base64-encoded string to a \"url/filename safe\" variant\nexport function base64ToBase64Url(b64) {\n    return b64.replace(/\\+/g, '-').replace(/\\//g, '_').replace(/=+$/, '');\n}\n// converts a \"url/filename safe\" base64 string to a \"standard\" base64 string\nexport function base64UrlToBase64(b64u) {\n    return b64u.replace(/-/g, '+').replace(/_/g, '/');\n}\nexport function base64UrlToString(b64u) {\n    var b64 = base64UrlToBase64(b64u);\n    switch (b64.length % 4) {\n        case 0:\n            break;\n        case 2:\n            b64 += '==';\n            break;\n        case 3:\n            b64 += '=';\n            break;\n        default:\n            throw 'Not a valid Base64Url';\n    }\n    var utf8 = atob(b64);\n    try {\n        return decodeURIComponent(escape(utf8));\n    }\n    catch (e) {\n        return utf8;\n    }\n}\nexport function stringToBuffer(str) {\n    var buffer = new Uint8Array(str.length);\n    for (var i = 0; i < str.length; i++) {\n        buffer[i] = str.charCodeAt(i);\n    }\n    return buffer;\n}\nexport function base64UrlDecode(str) {\n    return atob(base64UrlToBase64(str));\n}\nexport function bind(fn, ctx) {\n    var additionalArgs = Array.prototype.slice.call(arguments, 2);\n    return function () {\n        var args = Array.prototype.slice.call(arguments);\n        args = additionalArgs.concat(args);\n        return fn.apply(ctx, args);\n    };\n}\nexport function isAbsoluteUrl(url) {\n    return /^(?:[a-z]+:)?\\/\\//i.test(url);\n}\nexport function isString(obj) {\n    return Object.prototype.toString.call(obj) === '[object String]';\n}\nexport function isObject(obj) {\n    return Object.prototype.toString.call(obj) === '[object Object]';\n}\nexport function isNumber(obj) {\n    return Object.prototype.toString.call(obj) === '[object Number]';\n}\nexport function isoToUTCString(str) {\n    var parts = str.match(/\\d+/g), isoTime = Date.UTC(parts[0], parts[1] - 1, parts[2], parts[3], parts[4], parts[5]), isoDate = new Date(isoTime);\n    return isoDate.toUTCString();\n}\nexport function toQueryParams(obj) {\n    var str = [];\n    if (obj !== null) {\n        for (var key in obj) {\n            if (Object.prototype.hasOwnProperty.call(obj, key) &&\n                obj[key] !== undefined &&\n                obj[key] !== null) {\n                str.push(key + '=' + encodeURIComponent(obj[key]));\n            }\n        }\n    }\n    if (str.length) {\n        return '?' + str.join('&');\n    }\n    else {\n        return '';\n    }\n}\nexport function genRandomString(length) {\n    var randomCharset = 'abcdefghijklnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';\n    var random = '';\n    for (var c = 0, cl = randomCharset.length; c < length; ++c) {\n        random += randomCharset[Math.floor(Math.random() * cl)];\n    }\n    return random;\n}\n// TODO: replace all references with `Object.assign` then remove this function\nexport function extend() {\n    // First object will be modified!\n    var obj1 = arguments[0];\n    // Properties from other objects will be copied over\n    var objArray = [].slice.call(arguments, 1);\n    objArray.forEach(function (obj) {\n        for (var prop in obj) {\n            // copy over all properties with defined values\n            if (Object.prototype.hasOwnProperty.call(obj, prop) && obj[prop] !== undefined) {\n                obj1[prop] = obj[prop];\n            }\n        }\n    });\n    return obj1; // return the modified object\n}\nexport function removeNils(obj) {\n    var cleaned = {};\n    for (var prop in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, prop)) {\n            var value = obj[prop];\n            if (value !== null && value !== undefined) {\n                cleaned[prop] = value;\n            }\n        }\n    }\n    return cleaned;\n}\nexport function clone(obj) {\n    if (obj) {\n        var str = JSON.stringify(obj);\n        if (str) {\n            return JSON.parse(str);\n        }\n    }\n    return obj;\n}\n// Analogous to _.omit\nexport function omit(obj, ...props) {\n    // var props = Array.prototype.slice.call(arguments, 1);\n    var newobj = {};\n    for (var p in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, p) && props.indexOf(p) == -1) {\n            newobj[p] = obj[p];\n        }\n    }\n    return clone(newobj);\n}\nexport function find(collection, searchParams) {\n    var c = collection.length;\n    while (c--) {\n        var item = collection[c];\n        var found = true;\n        for (var prop in searchParams) {\n            if (!Object.prototype.hasOwnProperty.call(searchParams, prop)) {\n                continue;\n            }\n            if (item[prop] !== searchParams[prop]) {\n                found = false;\n                break;\n            }\n        }\n        if (found) {\n            return item;\n        }\n    }\n}\nexport function getLink(obj, linkName, altName) {\n    if (!obj || !obj._links) {\n        return;\n    }\n    var link = clone(obj._links[linkName]);\n    // If a link has a name and we have an altName, return if they match\n    if (link && link.name && altName) {\n        if (link.name === altName) {\n            return link;\n        }\n    }\n    else {\n        return link;\n    }\n}\nexport function getNativeConsole() {\n    if (typeof window !== 'undefined') {\n        return window.console;\n    }\n    else if (typeof console !== 'undefined') {\n        return console;\n    }\n    else {\n        return undefined;\n    }\n}\nexport function getConsole() {\n    var nativeConsole = getNativeConsole();\n    if (nativeConsole && nativeConsole.log) {\n        return nativeConsole;\n    }\n    return {\n        log: function () { }\n    };\n}\nexport function warn(text) {\n    /* eslint-disable no-console */\n    getConsole().log('[okta-auth-sdk] WARN: ' + text);\n    /* eslint-enable */\n}\nexport function deprecate(text) {\n    /* eslint-disable no-console */\n    getConsole().log('[okta-auth-sdk] DEPRECATION: ' + text);\n    /* eslint-enable */\n}\nexport function deprecateWrap(text, fn) {\n    return function () {\n        deprecate(text);\n        return fn.apply(null, arguments);\n    };\n}\nexport function removeTrailingSlash(path) {\n    if (!path) {\n        return;\n    }\n    // Remove any whitespace before or after string\n    var trimmed = path.replace(/^\\s+|\\s+$/gm, '');\n    // Remove trailing slash(es)\n    trimmed = trimmed.replace(/\\/+$/, '');\n    return trimmed;\n}\nexport function isIE11OrLess() {\n    return !!document.documentMode && document.documentMode <= 11;\n}\nexport function isFunction(fn) {\n    return !!fn && {}.toString.call(fn) === '[object Function]';\n}\nexport function delay(ms) {\n    return new Promise(function (resolve) {\n        setTimeout(resolve, ms);\n    });\n}\nexport function isPromise(obj) {\n    return obj && obj.finally && (typeof obj.finally === 'function');\n}\n","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\nimport CustomError from './CustomError';\nexport default class AuthSdkError extends CustomError {\n    constructor(msg, xhr) {\n        super(msg);\n        this.name = 'AuthSdkError';\n        this.errorCode = 'INTERNAL';\n        this.errorSummary = msg;\n        this.errorLink = 'INTERNAL';\n        this.errorId = 'INTERNAL';\n        this.errorCauses = [];\n        if (xhr) {\n            this.xhr = xhr;\n        }\n    }\n}\n","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\nexport const STATE_TOKEN_KEY_NAME = 'oktaStateToken';\nexport const DEFAULT_POLLING_DELAY = 500;\nexport const DEFAULT_MAX_CLOCK_SKEW = 300;\nexport const DEFAULT_CACHE_DURATION = 86400;\nexport const REDIRECT_OAUTH_PARAMS_NAME = 'okta-oauth-redirect-params';\nexport const REDIRECT_STATE_COOKIE_NAME = 'okta-oauth-state';\nexport const REDIRECT_NONCE_COOKIE_NAME = 'okta-oauth-nonce';\nexport const TOKEN_STORAGE_NAME = 'okta-token-storage';\nexport const CACHE_STORAGE_NAME = 'okta-cache-storage';\nexport const PKCE_STORAGE_NAME = 'okta-pkce-storage';\nexport const ACCESS_TOKEN_STORAGE_KEY = 'accessToken';\nexport const ID_TOKEN_STORAGE_KEY = 'idToken';\n","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck;","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n *\n */\n/* eslint-disable complexity */\nimport { isString, clone, isAbsoluteUrl } from './util';\nimport AuthApiError from './errors/AuthApiError';\nimport { STATE_TOKEN_KEY_NAME, DEFAULT_CACHE_DURATION } from './constants';\nfunction httpRequest(sdk, options) {\n    options = options || {};\n    var url = options.url, method = options.method, args = options.args, saveAuthnState = options.saveAuthnState, accessToken = options.accessToken, withCredentials = options.withCredentials !== false, // default value is true\n    storageUtil = sdk.options.storageUtil, storage = storageUtil.storage, httpCache = storageUtil.getHttpCache(sdk.options.cookies);\n    if (options.cacheResponse) {\n        var cacheContents = httpCache.getStorage();\n        var cachedResponse = cacheContents[url];\n        if (cachedResponse && Date.now() / 1000 < cachedResponse.expiresAt) {\n            return Promise.resolve(cachedResponse.response);\n        }\n    }\n    var headers = {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json',\n        'X-Okta-User-Agent-Extended': sdk.userAgent\n    };\n    Object.assign(headers, sdk.options.headers, options.headers);\n    if (accessToken && isString(accessToken)) {\n        headers['Authorization'] = 'Bearer ' + accessToken;\n    }\n    var ajaxOptions = {\n        headers: headers,\n        data: args || undefined,\n        withCredentials: withCredentials\n    };\n    var err, res;\n    return sdk.options.httpRequestClient(method, url, ajaxOptions)\n        .then(function (resp) {\n        res = resp.responseText;\n        if (res && isString(res)) {\n            res = JSON.parse(res);\n        }\n        if (saveAuthnState) {\n            if (!res.stateToken) {\n                storage.delete(STATE_TOKEN_KEY_NAME);\n            }\n        }\n        if (res && res.stateToken && res.expiresAt) {\n            storage.set(STATE_TOKEN_KEY_NAME, res.stateToken, res.expiresAt, sdk.options.cookies);\n        }\n        if (res && options.cacheResponse) {\n            httpCache.updateStorage(url, {\n                expiresAt: Math.floor(Date.now() / 1000) + DEFAULT_CACHE_DURATION,\n                response: res\n            });\n        }\n        return res;\n    })\n        .catch(function (resp) {\n        var serverErr = resp.responseText || {};\n        if (isString(serverErr)) {\n            try {\n                serverErr = JSON.parse(serverErr);\n            }\n            catch (e) {\n                serverErr = {\n                    errorSummary: 'Unknown error'\n                };\n            }\n        }\n        if (resp.status >= 500) {\n            serverErr.errorSummary = 'Unknown error';\n        }\n        if (sdk.options.transformErrorXHR) {\n            resp = sdk.options.transformErrorXHR(clone(resp));\n        }\n        err = new AuthApiError(serverErr, resp);\n        if (err.errorCode === 'E0000011') {\n            storage.delete(STATE_TOKEN_KEY_NAME);\n        }\n        throw err;\n    });\n}\nfunction get(sdk, url, options) {\n    url = isAbsoluteUrl(url) ? url : sdk.getIssuerOrigin() + url;\n    var getOptions = {\n        url: url,\n        method: 'GET'\n    };\n    Object.assign(getOptions, options);\n    return httpRequest(sdk, getOptions);\n}\nfunction post(sdk, url, args, options) {\n    url = isAbsoluteUrl(url) ? url : sdk.getIssuerOrigin() + url;\n    var postOptions = {\n        url: url,\n        method: 'POST',\n        args: args,\n        saveAuthnState: true\n    };\n    Object.assign(postOptions, options);\n    return httpRequest(sdk, postOptions);\n}\nexport default {\n    get: get,\n    post: post,\n    httpRequest: httpRequest\n};\n","function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nmodule.exports = _assertThisInitialized;","function _getPrototypeOf(o) {\n  module.exports = _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nmodule.exports = _getPrototypeOf;","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n *\n */\nimport storageBuilder from '../storageBuilder';\nimport { PKCE_STORAGE_NAME, CACHE_STORAGE_NAME } from '../constants';\nimport AuthSdkError from '../errors/AuthSdkError';\nconst Cookies = require('js-cookie');\n// Building this as an object allows us to mock the functions in our tests\nvar storageUtil = {\n    // IE11 bug that Microsoft doesn't plan to fix\n    // https://connect.microsoft.com/IE/Feedback/Details/1496040\n    browserHasLocalStorage: function () {\n        try {\n            var storage = storageUtil.getLocalStorage();\n            return storageUtil.testStorage(storage);\n        }\n        catch (e) {\n            return false;\n        }\n    },\n    browserHasSessionStorage: function () {\n        try {\n            var storage = storageUtil.getSessionStorage();\n            return storageUtil.testStorage(storage);\n        }\n        catch (e) {\n            return false;\n        }\n    },\n    getPKCEStorage: function (options) {\n        options = options || {};\n        if (!options.preferLocalStorage && storageUtil.browserHasSessionStorage()) {\n            return storageBuilder(storageUtil.getSessionStorage(), PKCE_STORAGE_NAME);\n        }\n        else if (storageUtil.browserHasLocalStorage()) {\n            return storageBuilder(storageUtil.getLocalStorage(), PKCE_STORAGE_NAME);\n        }\n        else {\n            return storageBuilder(storageUtil.getCookieStorage(options), PKCE_STORAGE_NAME);\n        }\n    },\n    getHttpCache: function (options) {\n        if (storageUtil.browserHasLocalStorage()) {\n            return storageBuilder(storageUtil.getLocalStorage(), CACHE_STORAGE_NAME);\n        }\n        else if (storageUtil.browserHasSessionStorage()) {\n            return storageBuilder(storageUtil.getSessionStorage(), CACHE_STORAGE_NAME);\n        }\n        else {\n            return storageBuilder(storageUtil.getCookieStorage(options), CACHE_STORAGE_NAME);\n        }\n    },\n    getLocalStorage: function () {\n        return localStorage;\n    },\n    getSessionStorage: function () {\n        return sessionStorage;\n    },\n    // Provides webStorage-like interface for cookies\n    getCookieStorage: function (options) {\n        const secure = options.secure;\n        const sameSite = options.sameSite;\n        if (typeof secure === 'undefined' || typeof sameSite === 'undefined') {\n            throw new AuthSdkError('getCookieStorage: \"secure\" and \"sameSite\" options must be provided');\n        }\n        return {\n            getItem: storageUtil.storage.get,\n            setItem: function (key, value) {\n                // Cookie shouldn't expire\n                storageUtil.storage.set(key, value, '2200-01-01T00:00:00.000Z', {\n                    secure: secure,\n                    sameSite: sameSite\n                });\n            }\n        };\n    },\n    // Provides an in-memory solution\n    getInMemoryStorage: function () {\n        var store = {};\n        return {\n            getItem: function (key) {\n                return store[key];\n            },\n            setItem: function (key, value) {\n                store[key] = value;\n            }\n        };\n    },\n    testStorage: function (storage) {\n        var key = 'okta-test-storage';\n        try {\n            storage.setItem(key, key);\n            storage.removeItem(key);\n            return true;\n        }\n        catch (e) {\n            return false;\n        }\n    },\n    storage: {\n        set: function (name, value, expiresAt, options) {\n            const secure = options.secure;\n            const sameSite = options.sameSite;\n            if (typeof secure === 'undefined' || typeof sameSite === 'undefined') {\n                throw new AuthSdkError('storage.set: \"secure\" and \"sameSite\" options must be provided');\n            }\n            var cookieOptions = {\n                path: options.path || '/',\n                secure,\n                sameSite\n            };\n            // eslint-disable-next-line no-extra-boolean-cast\n            if (!!(Date.parse(expiresAt))) {\n                // Expires value can be converted to a Date object.\n                //\n                // If the 'expiresAt' value is not provided, or the value cannot be\n                // parsed as a Date object, the cookie will set as a session cookie.\n                cookieOptions.expires = new Date(expiresAt);\n            }\n            Cookies.set(name, value, cookieOptions);\n            return storageUtil.storage.get(name);\n        },\n        get: function (name) {\n            return Cookies.get(name);\n        },\n        delete: function (name) {\n            return Cookies.remove(name, { path: '/' });\n        }\n    }\n};\nexport default storageUtil;\n","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n *\n */\nexport function addStateToken(res, options) {\n    var builtArgs = {};\n    Object.assign(builtArgs, options);\n    // Add the stateToken if one isn't passed and we have one\n    if (!builtArgs.stateToken && res.stateToken) {\n        builtArgs.stateToken = res.stateToken;\n    }\n    return builtArgs;\n}\nexport function getStateToken(res) {\n    return addStateToken(res);\n}\n","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n *\n */\nimport http from '../http';\nimport { isNumber, isObject, getLink, toQueryParams, delay as delayFn } from '../util';\nimport { DEFAULT_POLLING_DELAY } from '../constants';\nimport AuthSdkError from '../errors/AuthSdkError';\nimport AuthPollStopError from '../errors/AuthPollStopError';\nimport { AuthTransaction } from './AuthTransaction';\nimport { getStateToken } from './util';\nexport function getPollFn(sdk, res, ref) {\n    return function (options) {\n        var delay;\n        var rememberDevice;\n        var autoPush;\n        var transactionCallBack;\n        if (isNumber(options)) {\n            delay = options;\n        }\n        else if (isObject(options)) {\n            options = options;\n            delay = options.delay;\n            rememberDevice = options.rememberDevice;\n            autoPush = options.autoPush;\n            transactionCallBack = options.transactionCallBack;\n        }\n        if (!delay && delay !== 0) {\n            delay = DEFAULT_POLLING_DELAY;\n        }\n        // Get the poll function\n        var pollLink = getLink(res, 'next', 'poll');\n        // eslint-disable-next-line complexity\n        function pollFn() {\n            var opts = {};\n            if (typeof autoPush === 'function') {\n                try {\n                    opts.autoPush = !!autoPush();\n                }\n                catch (e) {\n                    return Promise.reject(new AuthSdkError('AutoPush resulted in an error.'));\n                }\n            }\n            else if (autoPush !== undefined && autoPush !== null) {\n                opts.autoPush = !!autoPush;\n            }\n            if (typeof rememberDevice === 'function') {\n                try {\n                    opts.rememberDevice = !!rememberDevice();\n                }\n                catch (e) {\n                    return Promise.reject(new AuthSdkError('RememberDevice resulted in an error.'));\n                }\n            }\n            else if (rememberDevice !== undefined && rememberDevice !== null) {\n                opts.rememberDevice = !!rememberDevice;\n            }\n            var href = pollLink.href + toQueryParams(opts);\n            return http.post(sdk, href, getStateToken(res), {\n                saveAuthnState: false\n            });\n        }\n        ref.isPolling = true;\n        var retryCount = 0;\n        var recursivePoll = function () {\n            // If the poll was manually stopped during the delay\n            if (!ref.isPolling) {\n                return Promise.reject(new AuthPollStopError());\n            }\n            return pollFn()\n                .then(function (pollRes) {\n                // Reset our retry counter on success\n                retryCount = 0;\n                // If we're still waiting\n                if (pollRes.factorResult && pollRes.factorResult === 'WAITING') {\n                    // If the poll was manually stopped while the pollFn was called\n                    if (!ref.isPolling) {\n                        throw new AuthPollStopError();\n                    }\n                    if (typeof transactionCallBack === 'function') {\n                        transactionCallBack(pollRes);\n                    }\n                    // Continue poll\n                    return delayFn(delay).then(recursivePoll);\n                }\n                else {\n                    // Any non-waiting result, even if polling was stopped\n                    // during a request, will return\n                    ref.isPolling = false;\n                    return new AuthTransaction(sdk, pollRes);\n                }\n            })\n                .catch(function (err) {\n                // Exponential backoff, up to 16 seconds\n                if (err.xhr &&\n                    (err.xhr.status === 0 || err.xhr.status === 429) &&\n                    retryCount <= 4) {\n                    var delayLength = Math.pow(2, retryCount) * 1000;\n                    retryCount++;\n                    return delayFn(delayLength)\n                        .then(recursivePoll);\n                }\n                throw err;\n            });\n        };\n        return recursivePoll()\n            .catch(function (err) {\n            ref.isPolling = false;\n            throw err;\n        });\n    };\n}\n","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n *\n */\nimport http from '../http';\nimport { find, omit, toQueryParams, clone, isObject } from '../util';\nimport AuthSdkError from '../errors/AuthSdkError';\nimport { addStateToken } from './util';\nimport { getPollFn } from './poll';\nimport { postToTransaction } from './api';\nexport class AuthTransaction {\n    constructor(sdk, res = null) {\n        if (res) {\n            this.data = res;\n            Object.assign(this, flattenEmbedded(sdk, res, res, {}));\n            delete this.stateToken;\n            // RECOVERY_CHALLENGE has some responses without _links.\n            // Without _links, we emulate cancel to make it intuitive\n            // to return to the starting state. We may remove this\n            // when OKTA-75434 is resolved\n            if (res.status === 'RECOVERY_CHALLENGE' && !res._links) {\n                this.cancel = function () {\n                    return Promise.resolve(new AuthTransaction(sdk));\n                };\n            }\n        }\n    }\n}\nfunction link2fn(sdk, res, obj, link, ref) {\n    if (Array.isArray(link)) {\n        return function (name, opts) {\n            if (!name) {\n                throw new AuthSdkError('Must provide a link name');\n            }\n            var lk = find(link, { name: name });\n            if (!lk) {\n                throw new AuthSdkError('No link found for that name');\n            }\n            return link2fn(sdk, res, obj, lk, ref)(opts);\n        };\n    }\n    else if (link.hints &&\n        link.hints.allow &&\n        link.hints.allow.length === 1) {\n        var method = link.hints.allow[0];\n        switch (method) {\n            case 'GET':\n                return function () {\n                    return http.get(sdk, link.href);\n                };\n            case 'POST':\n                // eslint-disable-next-line max-statements,complexity\n                return function (opts) {\n                    if (ref && ref.isPolling) {\n                        ref.isPolling = false;\n                    }\n                    var data = addStateToken(res, opts);\n                    if (res.status === 'MFA_ENROLL' || res.status === 'FACTOR_ENROLL') {\n                        // Add factorType and provider\n                        Object.assign(data, {\n                            factorType: obj.factorType,\n                            provider: obj.provider\n                        });\n                    }\n                    var params = {};\n                    var autoPush = data.autoPush;\n                    if (autoPush !== undefined) {\n                        if (typeof autoPush === 'function') {\n                            try {\n                                params.autoPush = !!autoPush();\n                            }\n                            catch (e) {\n                                return Promise.reject(new AuthSdkError('AutoPush resulted in an error.'));\n                            }\n                        }\n                        else if (autoPush !== null) {\n                            params.autoPush = !!autoPush;\n                        }\n                        data = omit(data, 'autoPush');\n                    }\n                    var rememberDevice = data.rememberDevice;\n                    if (rememberDevice !== undefined) {\n                        if (typeof rememberDevice === 'function') {\n                            try {\n                                params.rememberDevice = !!rememberDevice();\n                            }\n                            catch (e) {\n                                return Promise.reject(new AuthSdkError('RememberDevice resulted in an error.'));\n                            }\n                        }\n                        else if (rememberDevice !== null) {\n                            params.rememberDevice = !!rememberDevice;\n                        }\n                        data = omit(data, 'rememberDevice');\n                    }\n                    else if (data.profile &&\n                        data.profile.updatePhone !== undefined) {\n                        if (data.profile.updatePhone) {\n                            params.updatePhone = true;\n                        }\n                        data.profile = omit(data.profile, 'updatePhone');\n                    }\n                    var href = link.href + toQueryParams(params);\n                    return postToTransaction(sdk, href, data);\n                };\n        }\n    }\n}\nfunction links2fns(sdk, res, obj, ref) {\n    var fns = {};\n    for (var linkName in obj._links) {\n        if (!Object.prototype.hasOwnProperty.call(obj._links, linkName)) {\n            continue;\n        }\n        var link = obj._links[linkName];\n        if (linkName === 'next') {\n            linkName = link.name;\n        }\n        if (link.type) {\n            fns[linkName] = link;\n            continue;\n        }\n        switch (linkName) {\n            // poll is only found at the transaction\n            // level, so we don't need to pass the link\n            case 'poll':\n                fns.poll = getPollFn(sdk, res, ref);\n                break;\n            default:\n                var fn = link2fn(sdk, res, obj, link, ref);\n                if (fn) {\n                    fns[linkName] = fn;\n                }\n        }\n    }\n    return fns;\n}\n// eslint-disable-next-line complexity\nfunction flattenEmbedded(sdk, res, obj, ref) {\n    obj = obj || res;\n    obj = clone(obj);\n    if (Array.isArray(obj)) {\n        var objArr = [];\n        for (var o = 0, ol = obj.length; o < ol; o++) {\n            objArr.push(flattenEmbedded(sdk, res, obj[o], ref));\n        }\n        return objArr;\n    }\n    var embedded = obj._embedded || {};\n    for (var key in embedded) {\n        if (!Object.prototype.hasOwnProperty.call(embedded, key)) {\n            continue;\n        }\n        // Flatten any nested _embedded objects\n        if (isObject(embedded[key]) || Array.isArray(embedded[key])) {\n            embedded[key] = flattenEmbedded(sdk, res, embedded[key], ref);\n        }\n    }\n    // Convert any links on the embedded object\n    var fns = links2fns(sdk, res, obj, ref);\n    Object.assign(embedded, fns);\n    obj = omit(obj, '_embedded', '_links');\n    Object.assign(obj, embedded);\n    return obj;\n}\n","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n *\n */\n/* eslint-disable complexity, max-statements */\nimport http from '../http';\nimport AuthSdkError from '../errors/AuthSdkError';\nimport { STATE_TOKEN_KEY_NAME } from '../constants';\nimport { addStateToken } from './util';\nimport { AuthTransaction } from './AuthTransaction';\nfunction transactionStatus(sdk, args) {\n    args = addStateToken(sdk, args);\n    return http.post(sdk, sdk.getIssuerOrigin() + '/api/v1/authn', args);\n}\nfunction resumeTransaction(sdk, args) {\n    if (!args || !args.stateToken) {\n        var stateToken = sdk.tx.exists._get(STATE_TOKEN_KEY_NAME);\n        if (stateToken) {\n            args = {\n                stateToken: stateToken\n            };\n        }\n        else {\n            return Promise.reject(new AuthSdkError('No transaction to resume'));\n        }\n    }\n    return sdk.tx.status(args)\n        .then(function (res) {\n        return new AuthTransaction(sdk, res);\n    });\n}\nfunction introspect(sdk, args) {\n    if (!args || !args.stateToken) {\n        var stateToken = sdk.tx.exists._get(STATE_TOKEN_KEY_NAME);\n        if (stateToken) {\n            args = {\n                stateToken: stateToken\n            };\n        }\n        else {\n            return Promise.reject(new AuthSdkError('No transaction to evaluate'));\n        }\n    }\n    return transactionStep(sdk, args)\n        .then(function (res) {\n        return new AuthTransaction(sdk, res);\n    });\n}\nfunction transactionStep(sdk, args) {\n    args = addStateToken(sdk, args);\n    // v1 pipeline introspect API\n    return http.post(sdk, sdk.getIssuerOrigin() + '/api/v1/authn/introspect', args);\n}\nfunction transactionExists(sdk) {\n    // We have a cookie state token\n    return !!sdk.tx.exists._get(STATE_TOKEN_KEY_NAME);\n}\nfunction postToTransaction(sdk, url, args, options) {\n    return http.post(sdk, url, args, options)\n        .then(function (res) {\n        return new AuthTransaction(sdk, res);\n    });\n}\nexport { transactionStatus, resumeTransaction, transactionExists, postToTransaction, introspect, };\n","export class TransactionState {\n}\n","var setPrototypeOf = require(\"./setPrototypeOf\");\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}\n\nmodule.exports = _inherits;","var _typeof = require(\"../helpers/typeof\");\n\nvar assertThisInitialized = require(\"./assertThisInitialized\");\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}\n\nmodule.exports = _possibleConstructorReturn;","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\nexport * from './api';\nexport * from './Cookies';\nexport * from './http';\nexport * from './JWT';\nexport * from './OAuth';\nexport * from './OktaAuthOptions';\nexport * from './Storage';\nexport * from './Token';\nexport * from './UserClaims';\n","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n *\n */\nimport AuthSdkError from './errors/AuthSdkError';\n// storage must have getItem and setItem\nfunction storageBuilder(webstorage, storageName) {\n    if (typeof storageName !== 'string' || !storageName.length) {\n        throw new AuthSdkError('\"storageName\" is required');\n    }\n    function getStorage() {\n        var storageString = webstorage.getItem(storageName);\n        storageString = storageString || '{}';\n        try {\n            return JSON.parse(storageString);\n        }\n        catch (e) {\n            throw new AuthSdkError('Unable to parse storage string: ' + storageName);\n        }\n    }\n    function setStorage(storage) {\n        try {\n            var storageString = JSON.stringify(storage);\n            webstorage.setItem(storageName, storageString);\n        }\n        catch (e) {\n            throw new AuthSdkError('Unable to set storage: ' + storageName);\n        }\n    }\n    function clearStorage(key) {\n        if (!key) {\n            return setStorage({});\n        }\n        var storage = getStorage();\n        delete storage[key];\n        setStorage(storage);\n    }\n    function updateStorage(key, value) {\n        var storage = getStorage();\n        storage[key] = value;\n        setStorage(storage);\n    }\n    return {\n        getStorage: getStorage,\n        setStorage: setStorage,\n        clearStorage: clearStorage,\n        updateStorage: updateStorage\n    };\n}\nexport default storageBuilder;\n","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nmodule.exports = _createClass;","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\nexport default class CustomError extends Error {\n    constructor(message) {\n        // https://stackoverflow.com/questions/41102060/typescript-extending-error-class\n        super(message); // 'Error' breaks prototype chain here\n        Object.setPrototypeOf(this, new.target.prototype); // restore prototype chain\n    }\n}\n","module.exports = require(\"regenerator-runtime\");\n","function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    module.exports = _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    module.exports = _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nmodule.exports = _typeof;","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\nimport CustomError from './CustomError';\nexport default class AuthPollStopError extends CustomError {\n    constructor() {\n        const message = 'The poll was stopped by the sdk';\n        super(message);\n    }\n}\n","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\nimport CustomError from './CustomError';\nexport default class OAuthError extends CustomError {\n    constructor(errorCode, summary) {\n        super(summary);\n        this.name = 'OAuthError';\n        this.errorCode = errorCode;\n        this.errorSummary = summary;\n    }\n}\n","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\nimport AuthApiError from './AuthApiError';\nimport AuthPollStopError from './AuthPollStopError';\nimport AuthSdkError from './AuthSdkError';\nimport OAuthError from './OAuthError';\nexport { AuthApiError, AuthPollStopError, AuthSdkError, OAuthError };\n","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\nimport CustomError from './CustomError';\nexport default class AuthApiError extends CustomError {\n    constructor(err, xhr) {\n        const message = err.errorSummary;\n        super(message);\n        this.name = 'AuthApiError';\n        this.errorSummary = err.errorSummary;\n        this.errorCode = err.errorCode;\n        this.errorLink = err.errorLink;\n        this.errorId = err.errorId;\n        this.errorCauses = err.errorCauses;\n        if (xhr) {\n            this.xhr = xhr;\n        }\n    }\n}\n","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\nexport default class SdkClock {\n    constructor(localOffset) {\n        // Calculated local clock offset from server time (in milliseconds). Can be positive or negative.\n        this.localOffset = parseInt(localOffset || 0);\n    }\n    // factory method. Create an instance of a clock from current context.\n    static create( /* sdk, options */) {\n        // TODO: calculate localOffset\n        var localOffset = 0;\n        return new SdkClock(localOffset);\n    }\n    // Return the current time (in seconds)\n    now() {\n        var now = (Date.now() + this.localOffset) / 1000;\n        return now;\n    }\n}\n","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n *\n */\n/* global localStorage, sessionStorage */\n/* eslint complexity:[0,8] max-statements:[0,21] */\nimport { removeNils, warn, isObject } from './util';\nimport AuthSdkError from './errors/AuthSdkError';\nimport storageUtil from './browser/browserStorage';\nimport { TOKEN_STORAGE_NAME } from './constants';\nimport storageBuilder from './storageBuilder';\nimport SdkClock from './clock';\nimport { isIDToken, isAccessToken } from './types';\nvar DEFAULT_OPTIONS = {\n    autoRenew: true,\n    storage: 'localStorage',\n    expireEarlySeconds: 30\n};\nfunction getExpireTime(tokenMgmtRef, token) {\n    var expireTime = token.expiresAt - tokenMgmtRef.options.expireEarlySeconds;\n    return expireTime;\n}\nfunction hasExpired(tokenMgmtRef, token) {\n    var expireTime = getExpireTime(tokenMgmtRef, token);\n    return expireTime <= tokenMgmtRef.clock.now();\n}\nfunction emitExpired(tokenMgmtRef, key, token) {\n    tokenMgmtRef.emitter.emit('expired', key, token);\n}\nfunction emitRemoved(tokenMgmtRef, key) {\n    tokenMgmtRef.emitter.emit('removed', key);\n}\nfunction emitError(tokenMgmtRef, error) {\n    tokenMgmtRef.emitter.emit('error', error);\n}\nfunction clearExpireEventTimeout(tokenMgmtRef, key) {\n    clearTimeout(tokenMgmtRef.expireTimeouts[key]);\n    delete tokenMgmtRef.expireTimeouts[key];\n    // Remove the renew promise (if it exists)\n    delete tokenMgmtRef.renewPromise[key];\n}\nfunction clearExpireEventTimeoutAll(tokenMgmtRef) {\n    var expireTimeouts = tokenMgmtRef.expireTimeouts;\n    for (var key in expireTimeouts) {\n        if (!Object.prototype.hasOwnProperty.call(expireTimeouts, key)) {\n            continue;\n        }\n        clearExpireEventTimeout(tokenMgmtRef, key);\n    }\n}\nfunction setExpireEventTimeout(sdk, tokenMgmtRef, key, token) {\n    var expireTime = getExpireTime(tokenMgmtRef, token);\n    var expireEventWait = Math.max(expireTime - tokenMgmtRef.clock.now(), 0) * 1000;\n    // Clear any existing timeout\n    clearExpireEventTimeout(tokenMgmtRef, key);\n    var expireEventTimeout = setTimeout(function () {\n        emitExpired(tokenMgmtRef, key, token);\n    }, expireEventWait);\n    // Add a new timeout\n    tokenMgmtRef.expireTimeouts[key] = expireEventTimeout;\n}\nfunction setExpireEventTimeoutAll(sdk, tokenMgmtRef, storage) {\n    try {\n        var tokenStorage = storage.getStorage();\n    }\n    catch (e) {\n        // Any errors thrown on instantiation will not be caught,\n        // because there are no listeners yet\n        emitError(tokenMgmtRef, e);\n        return;\n    }\n    for (var key in tokenStorage) {\n        if (!Object.prototype.hasOwnProperty.call(tokenStorage, key)) {\n            continue;\n        }\n        var token = tokenStorage[key];\n        setExpireEventTimeout(sdk, tokenMgmtRef, key, token);\n    }\n}\nfunction add(sdk, tokenMgmtRef, storage, key, token) {\n    var tokenStorage = storage.getStorage();\n    if (!isObject(token) ||\n        !token.scopes ||\n        (!token.expiresAt && token.expiresAt !== 0) ||\n        (!isIDToken(token) && !isAccessToken(token))) {\n        throw new AuthSdkError('Token must be an Object with scopes, expiresAt, and an idToken or accessToken properties');\n    }\n    tokenStorage[key] = token;\n    storage.setStorage(tokenStorage);\n    setExpireEventTimeout(sdk, tokenMgmtRef, key, token);\n}\nfunction get(storage, key) {\n    var tokenStorage = storage.getStorage();\n    return tokenStorage[key];\n}\nfunction getAsync(sdk, tokenMgmtRef, storage, key) {\n    return new Promise(function (resolve) {\n        var token = get(storage, key);\n        return resolve(token);\n    });\n}\nfunction remove(tokenMgmtRef, storage, key) {\n    // Clear any listener for this token\n    clearExpireEventTimeout(tokenMgmtRef, key);\n    // Remove it from storage\n    var tokenStorage = storage.getStorage();\n    delete tokenStorage[key];\n    storage.setStorage(tokenStorage);\n    emitRemoved(tokenMgmtRef, key);\n}\nfunction renew(sdk, tokenMgmtRef, storage, key) {\n    // Multiple callers may receive the same promise. They will all resolve or reject from the same request.\n    var existingPromise = tokenMgmtRef.renewPromise[key];\n    if (existingPromise) {\n        return existingPromise;\n    }\n    try {\n        var token = get(storage, key);\n        if (!token) {\n            throw new AuthSdkError('The tokenManager has no token for the key: ' + key);\n        }\n    }\n    catch (e) {\n        return Promise.reject(e);\n    }\n    // Remove existing autoRenew timeout for this key\n    clearExpireEventTimeout(tokenMgmtRef, key);\n    // Store the renew promise state, to avoid renewing again\n    tokenMgmtRef.renewPromise[key] = sdk.token.renew(token)\n        .then(function (freshToken) {\n        var oldToken = get(storage, key);\n        if (!oldToken) {\n            // It is possible to enter a state where the tokens have been cleared\n            // after a renewal request was triggered. To ensure we do not store a\n            // renewed token, we verify the promise key doesn't exist and return.\n            return;\n        }\n        add(sdk, tokenMgmtRef, storage, key, freshToken);\n        tokenMgmtRef.emitter.emit('renewed', key, freshToken, oldToken);\n        return freshToken;\n    })\n        .catch(function (err) {\n        if (err.name === 'OAuthError' || err.name === 'AuthSdkError') {\n            remove(tokenMgmtRef, storage, key);\n            err.tokenKey = key;\n            err.accessToken = !!token.accessToken;\n            emitError(tokenMgmtRef, err);\n        }\n        throw err;\n    })\n        .finally(function () {\n        // Remove existing promise key\n        delete tokenMgmtRef.renewPromise[key];\n    });\n    return tokenMgmtRef.renewPromise[key];\n}\nfunction clear(tokenMgmtRef, storage) {\n    clearExpireEventTimeoutAll(tokenMgmtRef);\n    storage.clearStorage();\n}\nexport class TokenManager {\n    constructor(sdk, options) {\n        options = Object.assign({}, DEFAULT_OPTIONS, removeNils(options));\n        if (options.storage === 'localStorage' && !storageUtil.browserHasLocalStorage()) {\n            warn('This browser doesn\\'t support localStorage. Switching to sessionStorage.');\n            options.storage = 'sessionStorage';\n        }\n        if (options.storage === 'sessionStorage' && !storageUtil.browserHasSessionStorage()) {\n            warn('This browser doesn\\'t support sessionStorage. Switching to cookie-based storage.');\n            options.storage = 'cookie';\n        }\n        var storageProvider;\n        if (typeof options.storage === 'object') {\n            // A custom storage provider must implement getItem(key) and setItem(key, val)\n            storageProvider = options.storage;\n        }\n        else {\n            switch (options.storage) {\n                case 'localStorage':\n                    storageProvider = localStorage;\n                    break;\n                case 'sessionStorage':\n                    storageProvider = sessionStorage;\n                    break;\n                case 'cookie':\n                    // Implement customized cookie storage to make sure each token is stored separatedly in cookie\n                    storageProvider = (function (options) {\n                        var storage = storageUtil.getCookieStorage(options);\n                        return {\n                            getItem: function (key) {\n                                var data = storage.getItem();\n                                var value = {};\n                                Object.keys(data).forEach(k => {\n                                    if (k.indexOf(key) === 0) {\n                                        value[k.replace(`${key}_`, '')] = JSON.parse(data[k]);\n                                    }\n                                });\n                                return JSON.stringify(value);\n                            },\n                            setItem: function (key, value) {\n                                var existingValues = JSON.parse(this.getItem(key));\n                                value = JSON.parse(value);\n                                // Set key-value pairs from input to cookies\n                                Object.keys(value).forEach(k => {\n                                    var storageKey = key + '_' + k;\n                                    var valueToStore = JSON.stringify(value[k]);\n                                    storage.setItem(storageKey, valueToStore);\n                                    delete existingValues[k];\n                                });\n                                // Delete unmatched keys from existing cookies\n                                Object.keys(existingValues).forEach(k => {\n                                    storageUtil.storage.delete(key + '_' + k);\n                                });\n                            }\n                        };\n                    }(sdk.options.cookies));\n                    break;\n                case 'memory':\n                    storageProvider = storageUtil.getInMemoryStorage();\n                    break;\n                default:\n                    throw new AuthSdkError('Unrecognized storage option');\n            }\n        }\n        var storageKey = options.storageKey || TOKEN_STORAGE_NAME;\n        var storage = storageBuilder(storageProvider, storageKey);\n        var clock = SdkClock.create( /* sdk, options */);\n        var tokenMgmtRef = {\n            clock: clock,\n            options: options,\n            emitter: sdk.emitter,\n            expireTimeouts: {},\n            renewPromise: {}\n        };\n        this.add = add.bind(this, sdk, tokenMgmtRef, storage);\n        this.get = getAsync.bind(this, sdk, tokenMgmtRef, storage);\n        this.remove = remove.bind(this, tokenMgmtRef, storage);\n        this.clear = clear.bind(this, tokenMgmtRef, storage);\n        this.renew = renew.bind(this, sdk, tokenMgmtRef, storage);\n        this.on = tokenMgmtRef.emitter.on.bind(tokenMgmtRef.emitter);\n        this.off = tokenMgmtRef.emitter.off.bind(tokenMgmtRef.emitter);\n        this.hasExpired = hasExpired.bind(this, tokenMgmtRef);\n        const onTokenExpiredHandler = (key) => {\n            if (options.autoRenew) {\n                this.renew(key).catch(() => { }); // Renew errors will emit an \"error\" event \n            }\n            else {\n                this.remove(key);\n            }\n        };\n        this.on('expired', onTokenExpiredHandler);\n        setExpireEventTimeoutAll(sdk, tokenMgmtRef, storage);\n    }\n}\n","function _setPrototypeOf(o, p) {\n  module.exports = _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nmodule.exports = _setPrototypeOf;","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\nexport function isToken(obj) {\n    if (obj &&\n        (obj.accessToken || obj.idToken) &&\n        Array.isArray(obj.scopes)) {\n        return true;\n    }\n    return false;\n}\nexport function isAccessToken(obj) {\n    return obj && obj.accessToken;\n}\nexport function isIDToken(obj) {\n    return obj && obj.idToken;\n}\n","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\nimport { assertValidConfig } from './builderUtil';\nimport { removeTrailingSlash } from './util';\nimport { transactionStatus, resumeTransaction, transactionExists, introspect, postToTransaction } from './tx';\nexport default class OktaAuthBase {\n    constructor(args) {\n        assertValidConfig(args);\n        this.options = {\n            issuer: removeTrailingSlash(args.issuer),\n            httpRequestClient: args.httpRequestClient,\n            storageUtil: args.storageUtil,\n            headers: args.headers\n        };\n        this.tx = {\n            status: transactionStatus.bind(null, this),\n            resume: resumeTransaction.bind(null, this),\n            exists: Object.assign(transactionExists.bind(null, this), {\n                _get: (name) => {\n                    const storage = this.options.storageUtil.storage;\n                    return storage.get(name);\n                }\n            }),\n            introspect: introspect.bind(null, this)\n        };\n    }\n    // { username, password, (relayState), (context) }\n    signIn(opts) {\n        return postToTransaction(this, '/api/v1/authn', opts);\n    }\n    getIssuerOrigin() {\n        // Infer the URL from the issuer URL, omitting the /oauth2/{authServerId}\n        return this.options.issuer.split('/oauth2/')[0];\n    }\n    // { username, (relayState) }\n    forgotPassword(opts) {\n        return postToTransaction(this, '/api/v1/authn/recovery/password', opts);\n    }\n    // { username, (relayState) }\n    unlockAccount(opts) {\n        return postToTransaction(this, '/api/v1/authn/recovery/unlock', opts);\n    }\n    // { recoveryToken }\n    verifyRecoveryToken(opts) {\n        return postToTransaction(this, '/api/v1/authn/recovery/token', opts);\n    }\n}\n","/*!\n * Copyright (c) 2018-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\nimport AuthSdkError from './errors/AuthSdkError';\n// TODO: use @okta/configuration-validation (move module to this monorepo?)\n// eslint-disable-next-line complexity\nfunction assertValidConfig(args) {\n    args = args || {};\n    var issuer = args.issuer;\n    if (!issuer) {\n        throw new AuthSdkError('No issuer passed to constructor. ' +\n            'Required usage: new OktaAuth({issuer: \"https://{yourOktaDomain}.com/oauth2/{authServerId}\"})');\n    }\n    var isUrlRegex = new RegExp('^http?s?://.+');\n    if (!isUrlRegex.test(args.issuer)) {\n        throw new AuthSdkError('Issuer must be a valid URL. ' +\n            'Required usage: new OktaAuth({issuer: \"https://{yourOktaDomain}.com/oauth2/{authServerId}\"})');\n    }\n    if (issuer.indexOf('-admin.') !== -1) {\n        throw new AuthSdkError('Issuer URL passed to constructor contains \"-admin\" in subdomain. ' +\n            'Required usage: new OktaAuth({issuer: \"https://{yourOktaDomain}.com})');\n    }\n    var userAgent = args.userAgent;\n    var userAgentTemplateWithNoPlaceholder = userAgent && userAgent.template && userAgent.template.indexOf('$OKTA_AUTH_JS') === -1;\n    if (userAgentTemplateWithNoPlaceholder) {\n        throw new AuthSdkError('UserAgentTemplate must include \"$OKTA_AUTH_JS\" placeholder. ' +\n            'Required usage: new OktaAuth({userAgentTemplate: \"xxx $OKTA_AUTH_JS xxx\"})');\n    }\n}\nfunction getUserAgent(args, sdkValue) {\n    var userAgent = args.userAgent || {};\n    if (userAgent.value) {\n        return userAgent.value;\n    }\n    if (userAgent.template) {\n        return userAgent.template.replace('$OKTA_AUTH_JS', sdkValue);\n    }\n    return sdkValue;\n}\nexport { assertValidConfig, getUserAgent };\n","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\nconst isWindowsPhone = /windows phone|iemobile|wpdesktop/i;\nexport function getUserAgent() {\n    return navigator.userAgent;\n}\nexport function isFingerprintSupported() {\n    const agent = getUserAgent();\n    return agent && !isWindowsPhone.test(agent);\n}\nexport function isPopupPostMessageSupported() {\n    var isIE8or9 = document.documentMode && document.documentMode < 10;\n    if (window.postMessage && !isIE8or9) {\n        return true;\n    }\n    return false;\n}\nexport function isTokenVerifySupported() {\n    return typeof crypto !== 'undefined' && crypto.subtle && typeof Uint8Array !== 'undefined';\n}\nexport function hasTextEncoder() {\n    return typeof TextEncoder !== 'undefined';\n}\nexport function isPKCESupported() {\n    return isTokenVerifySupported() && hasTextEncoder();\n}\nexport function isHTTPS() {\n    return window.location.protocol === 'https:';\n}\nexport function isLocalhost() {\n    return window.location.hostname === 'localhost';\n}\n","/*!\n * Copyright (c) 2018-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\nimport fetch from 'cross-fetch';\nfunction readData(response) {\n    if (response.headers.get('Content-Type') &&\n        response.headers.get('Content-Type').toLowerCase().indexOf('application/json') >= 0) {\n        return response.json()\n            // JSON parse can fail if response is not a valid object\n            .catch(e => {\n            return {\n                error: e,\n                errorSummary: 'Could not parse server response'\n            };\n        });\n    }\n    else {\n        return response.text();\n    }\n}\nfunction formatResult(status, data) {\n    const isObject = typeof data === 'object';\n    const result = {\n        responseText: isObject ? JSON.stringify(data) : data,\n        status: status\n    };\n    if (isObject) {\n        result.responseType = 'json';\n        result.responseJSON = data;\n    }\n    return result;\n}\n/* eslint-disable complexity */\nfunction fetchRequest(method, url, args) {\n    var body = args.data;\n    var headers = args.headers || {};\n    var contentType = (headers['Content-Type'] || headers['content-type'] || '');\n    // JSON encode body (if appropriate)\n    if (contentType === 'application/json' && body && typeof body !== 'string') {\n        body = JSON.stringify(body);\n    }\n    var fetchPromise = fetch(url, {\n        method: method,\n        headers: args.headers,\n        body: body,\n        credentials: args.withCredentials ? 'include' : 'omit'\n    })\n        .then(function (response) {\n        var error = !response.ok;\n        var status = response.status;\n        return readData(response)\n            .then(data => {\n            return formatResult(status, data);\n        })\n            .then(result => {\n            if (error) {\n                // Throwing result object since error handling is done in http.js\n                throw result;\n            }\n            return result;\n        });\n    });\n    return fetchPromise;\n}\nexport default fetchRequest;\n","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n *\n */\n/* global window */\nimport { omit, getLink, toQueryParams } from './util';\nimport http from './http';\nfunction sessionExists(sdk) {\n    return sdk.session.get()\n        .then(function (res) {\n        if (res.status === 'ACTIVE') {\n            return true;\n        }\n        return false;\n    })\n        .catch(function () {\n        return false;\n    });\n}\nfunction getSession(sdk) {\n    return http.get(sdk, '/api/v1/sessions/me')\n        .then(function (session) {\n        var res = omit(session, '_links');\n        res.refresh = function () {\n            return http.post(sdk, getLink(session, 'refresh').href);\n        };\n        res.user = function () {\n            return http.get(sdk, getLink(session, 'user').href);\n        };\n        return res;\n    })\n        .catch(function () {\n        // Return INACTIVE status on failure\n        return { status: 'INACTIVE' };\n    });\n}\nfunction closeSession(sdk) {\n    return http.httpRequest(sdk, {\n        url: sdk.getIssuerOrigin() + '/api/v1/sessions/me',\n        method: 'DELETE'\n    });\n}\nfunction refreshSession(sdk) {\n    return http.post(sdk, '/api/v1/sessions/me/lifecycle/refresh');\n}\nfunction setCookieAndRedirect(sdk, sessionToken, redirectUrl) {\n    redirectUrl = redirectUrl || window.location.href;\n    window.location.assign(sdk.getIssuerOrigin() + '/login/sessionCookieRedirect' +\n        toQueryParams({\n            checkAccountSetupComplete: true,\n            token: sessionToken,\n            redirectUrl: redirectUrl\n        }));\n}\nexport { sessionExists, getSession, closeSession, refreshSession, setCookieAndRedirect };\n","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n *\n */\n/* global window, document */\n/* eslint-disable complexity, max-statements */\nimport http from './http';\nimport { genRandomString, isIE11OrLess, find, removeTrailingSlash } from './util';\nimport storageUtil from './browser/browserStorage';\nimport AuthSdkError from './errors/AuthSdkError';\nfunction generateState() {\n    return genRandomString(64);\n}\nfunction generateNonce() {\n    return genRandomString(64);\n}\nfunction addListener(eventTarget, name, fn) {\n    if (eventTarget.addEventListener) {\n        eventTarget.addEventListener(name, fn);\n    }\n    else {\n        eventTarget.attachEvent('on' + name, fn);\n    }\n}\nfunction removeListener(eventTarget, name, fn) {\n    if (eventTarget.removeEventListener) {\n        eventTarget.removeEventListener(name, fn);\n    }\n    else {\n        eventTarget.detachEvent('on' + name, fn);\n    }\n}\nfunction loadFrame(src) {\n    var iframe = document.createElement('iframe');\n    iframe.style.display = 'none';\n    iframe.src = src;\n    return document.body.appendChild(iframe);\n}\nfunction loadPopup(src, options) {\n    var title = options.popupTitle || 'External Identity Provider User Authentication';\n    var appearance = 'toolbar=no, scrollbars=yes, resizable=yes, ' +\n        'top=100, left=500, width=600, height=600';\n    if (isIE11OrLess()) {\n        // IE<=11 doesn't fully support postMessage at time of writting.\n        // the following simple solution happened to solve the issue\n        // without adding another proxy layer which makes flow more complecated.\n        var winEl = window.open('/', title, appearance);\n        winEl.location.href = src;\n        return winEl;\n    }\n    else {\n        return window.open(src, title, appearance);\n    }\n}\nfunction getWellKnown(sdk, issuer) {\n    var authServerUri = (issuer || sdk.options.issuer);\n    return http.get(sdk, authServerUri + '/.well-known/openid-configuration', {\n        cacheResponse: true\n    });\n}\nfunction getKey(sdk, issuer, kid) {\n    var httpCache = storageUtil.getHttpCache(sdk.options.cookies);\n    return getWellKnown(sdk, issuer)\n        .then(function (wellKnown) {\n        var jwksUri = wellKnown['jwks_uri'];\n        // Check our kid against the cached version (if it exists and isn't expired)\n        var cacheContents = httpCache.getStorage();\n        var cachedResponse = cacheContents[jwksUri];\n        if (cachedResponse && Date.now() / 1000 < cachedResponse.expiresAt) {\n            var cachedKey = find(cachedResponse.response.keys, {\n                kid: kid\n            });\n            if (cachedKey) {\n                return cachedKey;\n            }\n        }\n        // Remove cache for the key\n        httpCache.clearStorage(jwksUri);\n        // Pull the latest keys if the key wasn't in the cache\n        return http.get(sdk, jwksUri, {\n            cacheResponse: true\n        })\n            .then(function (res) {\n            var key = find(res.keys, {\n                kid: kid\n            });\n            if (key) {\n                return key;\n            }\n            throw new AuthSdkError('The key id, ' + kid + ', was not found in the server\\'s keys');\n        });\n    });\n}\nfunction validateClaims(sdk, claims, validationParams) {\n    var aud = validationParams.clientId;\n    var iss = validationParams.issuer;\n    var nonce = validationParams.nonce;\n    if (!claims || !iss || !aud) {\n        throw new AuthSdkError('The jwt, iss, and aud arguments are all required');\n    }\n    if (nonce && claims.nonce !== nonce) {\n        throw new AuthSdkError('OAuth flow response nonce doesn\\'t match request nonce');\n    }\n    var now = Math.floor(Date.now() / 1000);\n    if (claims.iss !== iss) {\n        throw new AuthSdkError('The issuer [' + claims.iss + '] ' +\n            'does not match [' + iss + ']');\n    }\n    if (claims.aud !== aud) {\n        throw new AuthSdkError('The audience [' + claims.aud + '] ' +\n            'does not match [' + aud + ']');\n    }\n    if (claims.iat > claims.exp) {\n        throw new AuthSdkError('The JWT expired before it was issued');\n    }\n    if ((now - sdk.options.maxClockSkew) > claims.exp) {\n        throw new AuthSdkError('The JWT expired and is no longer valid');\n    }\n    if (claims.iat > (now + sdk.options.maxClockSkew)) {\n        throw new AuthSdkError('The JWT was issued in the future');\n    }\n}\nfunction getOAuthUrls(sdk, options) {\n    if (arguments.length > 2) {\n        throw new AuthSdkError('As of version 3.0, \"getOAuthUrls\" takes only a single set of options');\n    }\n    options = options || {};\n    // Get user-supplied arguments\n    var authorizeUrl = removeTrailingSlash(options.authorizeUrl) || sdk.options.authorizeUrl;\n    var issuer = removeTrailingSlash(options.issuer) || sdk.options.issuer;\n    var userinfoUrl = removeTrailingSlash(options.userinfoUrl) || sdk.options.userinfoUrl;\n    var tokenUrl = removeTrailingSlash(options.tokenUrl) || sdk.options.tokenUrl;\n    var logoutUrl = removeTrailingSlash(options.logoutUrl) || sdk.options.logoutUrl;\n    var revokeUrl = removeTrailingSlash(options.revokeUrl) || sdk.options.revokeUrl;\n    var baseUrl = issuer.indexOf('/oauth2') > 0 ? issuer : issuer + '/oauth2';\n    authorizeUrl = authorizeUrl || baseUrl + '/v1/authorize';\n    userinfoUrl = userinfoUrl || baseUrl + '/v1/userinfo';\n    tokenUrl = tokenUrl || baseUrl + '/v1/token';\n    revokeUrl = revokeUrl || baseUrl + '/v1/revoke';\n    logoutUrl = logoutUrl || baseUrl + '/v1/logout';\n    return {\n        issuer: issuer,\n        authorizeUrl: authorizeUrl,\n        userinfoUrl: userinfoUrl,\n        tokenUrl: tokenUrl,\n        revokeUrl: revokeUrl,\n        logoutUrl: logoutUrl\n    };\n}\nfunction urlParamsToObject(hashOrSearch) {\n    // Predefine regexs for parsing hash\n    var plus2space = /\\+/g;\n    var paramSplit = /([^&=]+)=?([^&]*)/g;\n    var fragment = hashOrSearch;\n    // Some hash based routers will automatically add a / character after the hash\n    if (fragment.charAt(0) === '#' && fragment.charAt(1) === '/') {\n        fragment = fragment.substring(2);\n    }\n    // Remove the leading # or ?\n    if (fragment.charAt(0) === '#' || fragment.charAt(0) === '?') {\n        fragment = fragment.substring(1);\n    }\n    var obj = {};\n    // Loop until we have no more params\n    var param;\n    while (true) { // eslint-disable-line no-constant-condition\n        param = paramSplit.exec(fragment);\n        if (!param) {\n            break;\n        }\n        var key = param[1];\n        var value = param[2];\n        // id_token should remain base64url encoded\n        if (key === 'id_token' || key === 'access_token' || key === 'code') {\n            obj[key] = value;\n        }\n        else {\n            obj[key] = decodeURIComponent(value.replace(plus2space, ' '));\n        }\n    }\n    return obj;\n}\nfunction hasTokensInHash(hash) {\n    return /((id|access)_token=)/i.test(hash);\n}\nfunction hasCodeInUrl(hashOrSearch) {\n    return /(code=)/i.test(hashOrSearch);\n}\n/**\n * Check if tokens or a code have been passed back into the url, which happens in\n * the social auth IDP redirect flow.\n */\nfunction isLoginRedirect(sdk) {\n    var authParams = sdk.options;\n    if (authParams.pkce || authParams.responseType === 'code' || authParams.responseMode === 'query') {\n        // Look for code\n        return authParams.responseMode === 'fragment' ?\n            hasCodeInUrl(window.location.hash) :\n            hasCodeInUrl(window.location.search);\n    }\n    // Look for tokens (Implicit OIDC flow)\n    return hasTokensInHash(window.location.hash);\n}\nexport { generateState, generateNonce, getWellKnown, getKey, validateClaims, getOAuthUrls, loadFrame, loadPopup, urlParamsToObject, isLoginRedirect, addListener, removeListener };\n","/*!\n * Copyright (c) 2019-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n *\n */\n/* global crypto */\n/* eslint-disable complexity, max-statements */\nimport AuthSdkError from './errors/AuthSdkError';\nimport http from './http';\nimport { warn, stringToBase64Url, removeNils, toQueryParams } from './util';\n// Code verifier: Random URL-safe string with a minimum length of 43 characters.\n// Code challenge: Base64 URL-encoded SHA-256 hash of the code verifier.\nvar MIN_VERIFIER_LENGTH = 43;\nvar MAX_VERIFIER_LENGTH = 128;\nvar DEFAULT_CODE_CHALLENGE_METHOD = 'S256';\nfunction dec2hex(dec) {\n    return ('0' + dec.toString(16)).substr(-2);\n}\nfunction getRandomString(length) {\n    var a = new Uint8Array(Math.ceil(length / 2));\n    crypto.getRandomValues(a);\n    var str = Array.from(a, dec2hex).join('');\n    return str.slice(0, length);\n}\nfunction generateVerifier(prefix) {\n    var verifier = prefix || '';\n    if (verifier.length < MIN_VERIFIER_LENGTH) {\n        verifier = verifier + getRandomString(MIN_VERIFIER_LENGTH - verifier.length);\n    }\n    return encodeURIComponent(verifier).slice(0, MAX_VERIFIER_LENGTH);\n}\nfunction getStorage(sdk, options) {\n    options = Object.assign({}, sdk.options.cookies, options);\n    return sdk.options.storageUtil.getPKCEStorage(options);\n}\nfunction saveMeta(sdk, meta) {\n    // There must be only one PKCE flow executing at a time.\n    // Before saving meta, check to see if a codeVerfier is already stored.\n    var storage = getStorage(sdk, { preferLocalStorage: true });\n    var obj = storage.getStorage();\n    if (obj.codeVerifier) {\n        // eslint-disable-next-line max-len\n        warn('saveMeta: PKCE codeVerifier exists in localStorage. This may indicate an auth flow is already in progress.');\n    }\n    storage = getStorage(sdk);\n    obj = storage.getStorage();\n    if (obj.codeVerifier) {\n        // eslint-disable-next-line max-len\n        warn('saveMeta: PKCE codeVerifier exists in sessionStorage. This may indicate an auth flow is already in progress.');\n    }\n    // clear all PKCE meta storage before saving.\n    clearMeta(sdk);\n    storage.setStorage(meta);\n}\nfunction loadMeta(sdk) {\n    // Try reading from localStorage first.\n    // This is for compatibility with older versions of the signin widget. OKTA-304806\n    var storage = getStorage(sdk, { preferLocalStorage: true });\n    var obj = storage.getStorage();\n    // Verify the Meta\n    if (!obj.codeVerifier) {\n        // If meta is not valid, read from sessionStorage. This is expected for current versions of the SDK.\n        storage = getStorage(sdk, { preferLocalStorage: false });\n        obj = storage.getStorage();\n        if (!obj.codeVerifier) {\n            // If meta is not valid, throw an exception to avoid misleading server-side error\n            // The most likely cause of this error is trying to handle a callback twice\n            // eslint-disable-next-line max-len\n            throw new AuthSdkError('Could not load PKCE codeVerifier from storage. This may indicate the auth flow has already completed or multiple auth flows are executing concurrently.', null);\n        }\n    }\n    return obj;\n}\nfunction clearMeta(sdk) {\n    // clear sessionStorage (current version)\n    var storage = getStorage(sdk);\n    storage.clearStorage();\n    // clear localStorage (previous versions, signin widget)\n    storage = getStorage(sdk, { preferLocalStorage: true });\n    storage.clearStorage();\n}\nfunction computeChallenge(str) {\n    var buffer = new TextEncoder().encode(str);\n    return crypto.subtle.digest('SHA-256', buffer).then(function (arrayBuffer) {\n        var hash = String.fromCharCode.apply(null, new Uint8Array(arrayBuffer));\n        var b64u = stringToBase64Url(hash); // url-safe base64 variant\n        return b64u;\n    });\n}\nfunction validateOptions(options) {\n    // Quick validation\n    if (!options.clientId) {\n        throw new AuthSdkError('A clientId must be specified in the OktaAuth constructor to get a token');\n    }\n    if (!options.redirectUri) {\n        throw new AuthSdkError('The redirectUri passed to /authorize must also be passed to /token');\n    }\n    if (!options.authorizationCode) {\n        throw new AuthSdkError('An authorization code (returned from /authorize) must be passed to /token');\n    }\n    if (!options.codeVerifier) {\n        throw new AuthSdkError('The \"codeVerifier\" (generated and saved by your app) must be passed to /token');\n    }\n}\nfunction getPostData(options) {\n    // Convert options to OAuth params\n    var params = removeNils({\n        'client_id': options.clientId,\n        'redirect_uri': options.redirectUri,\n        'grant_type': 'authorization_code',\n        'code': options.authorizationCode,\n        'code_verifier': options.codeVerifier\n    });\n    // Encode as URL string\n    return toQueryParams(params).slice(1);\n}\n// exchange authorization code for an access token\nfunction getToken(sdk, options, urls) {\n    validateOptions(options);\n    var data = getPostData(options);\n    return http.httpRequest(sdk, {\n        url: urls.tokenUrl,\n        method: 'POST',\n        args: data,\n        withCredentials: false,\n        headers: {\n            'Content-Type': 'application/x-www-form-urlencoded'\n        }\n    });\n}\nexport default {\n    DEFAULT_CODE_CHALLENGE_METHOD: DEFAULT_CODE_CHALLENGE_METHOD,\n    generateVerifier: generateVerifier,\n    clearMeta: clearMeta,\n    saveMeta: saveMeta,\n    loadMeta: loadMeta,\n    computeChallenge: computeChallenge,\n    getToken: getToken\n};\n","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n *\n */\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\n/* global window, document, btoa */\n/* eslint-disable complexity, max-statements */\nimport http from './http';\nimport { toQueryParams, base64UrlToString, clone, isString, removeNils, isFunction } from './util';\nimport { getOAuthUrls, validateClaims, getKey, addListener, removeListener, urlParamsToObject, generateState, generateNonce, loadFrame, loadPopup, getWellKnown, isLoginRedirect } from './oauthUtil';\nimport * as sdkCrypto from './crypto';\nimport AuthSdkError from './errors/AuthSdkError';\nimport OAuthError from './errors/OAuthError';\nimport { ACCESS_TOKEN_STORAGE_KEY, ID_TOKEN_STORAGE_KEY, REDIRECT_OAUTH_PARAMS_NAME, REDIRECT_NONCE_COOKIE_NAME, REDIRECT_STATE_COOKIE_NAME } from './constants';\nimport browserStorage from './browser/browserStorage';\nimport PKCE from './pkce';\nimport { isToken, isAccessToken, isIDToken } from './types';\nconst cookies = browserStorage.storage;\n// Only the access token can be revoked in SPA applications\nfunction revokeToken(sdk, token) {\n    return Promise.resolve()\n        .then(function () {\n        if (!token || !token.accessToken) {\n            throw new AuthSdkError('A valid access token object is required');\n        }\n        var clientId = sdk.options.clientId;\n        if (!clientId) {\n            throw new AuthSdkError('A clientId must be specified in the OktaAuth constructor to revoke a token');\n        }\n        var revokeUrl = getOAuthUrls(sdk).revokeUrl;\n        var accessToken = token.accessToken;\n        var args = toQueryParams({\n            // eslint-disable-next-line camelcase\n            token_type_hint: 'access_token',\n            token: accessToken\n        }).slice(1);\n        var creds = btoa(clientId);\n        return http.post(sdk, revokeUrl, args, {\n            headers: {\n                'Content-Type': 'application/x-www-form-urlencoded',\n                'Authorization': 'Basic ' + creds\n            }\n        });\n    });\n}\nfunction decodeToken(token) {\n    var jwt = token.split('.');\n    var decodedToken;\n    try {\n        decodedToken = {\n            header: JSON.parse(base64UrlToString(jwt[0])),\n            payload: JSON.parse(base64UrlToString(jwt[1])),\n            signature: jwt[2]\n        };\n    }\n    catch (e) {\n        throw new AuthSdkError('Malformed token');\n    }\n    return decodedToken;\n}\n// Verify the id token\nfunction verifyToken(sdk, token, validationParams) {\n    return Promise.resolve()\n        .then(function () {\n        if (!token || !token.idToken) {\n            throw new AuthSdkError('Only idTokens may be verified');\n        }\n        var jwt = decodeToken(token.idToken);\n        var validationOptions = {\n            clientId: sdk.options.clientId,\n            issuer: sdk.options.issuer,\n            ignoreSignature: sdk.options.ignoreSignature\n        };\n        Object.assign(validationOptions, validationParams);\n        // Standard claim validation\n        validateClaims(sdk, jwt.payload, validationOptions);\n        // If the browser doesn't support native crypto or we choose not\n        // to verify the signature, bail early\n        if (validationOptions.ignoreSignature == true || !sdk.features.isTokenVerifySupported()) {\n            return token;\n        }\n        return getKey(sdk, token.issuer, jwt.header.kid)\n            .then(function (key) {\n            return sdkCrypto.verifyToken(token.idToken, key);\n        })\n            .then(function (valid) {\n            if (!valid) {\n                throw new AuthSdkError('The token signature is not valid');\n            }\n            if (validationParams && validationParams.accessToken && token.claims.at_hash) {\n                return sdkCrypto.getOidcHash(validationParams.accessToken)\n                    .then(hash => {\n                    if (hash !== token.claims.at_hash) {\n                        throw new AuthSdkError('Token hash verification failed');\n                    }\n                });\n            }\n        })\n            .then(() => {\n            return token;\n        });\n    });\n}\nfunction addPostMessageListener(sdk, timeout, state) {\n    var responseHandler;\n    var timeoutId;\n    var msgReceivedOrTimeout = new Promise(function (resolve, reject) {\n        responseHandler = function responseHandler(e) {\n            if (!e.data || e.data.state !== state) {\n                // A message not meant for us\n                return;\n            }\n            // Configuration mismatch between saved token and current app instance\n            // This may happen if apps with different issuers are running on the same host url\n            // If they share the same storage key, they may read and write tokens in the same location.\n            // Common when developing against http://localhost\n            if (e.origin !== sdk.getIssuerOrigin()) {\n                return reject(new AuthSdkError('The request does not match client configuration'));\n            }\n            resolve(e.data);\n        };\n        addListener(window, 'message', responseHandler);\n        timeoutId = setTimeout(function () {\n            reject(new AuthSdkError('OAuth flow timed out'));\n        }, timeout || 120000);\n    });\n    return msgReceivedOrTimeout\n        .finally(function () {\n        clearTimeout(timeoutId);\n        removeListener(window, 'message', responseHandler);\n    });\n}\nfunction exchangeCodeForToken(sdk, oauthParams, authorizationCode, urls) {\n    // PKCE authorization_code flow\n    // Retrieve saved values and build oauthParams for call to /token\n    var meta = PKCE.loadMeta(sdk);\n    var getTokenParams = {\n        clientId: oauthParams.clientId,\n        authorizationCode: authorizationCode,\n        codeVerifier: meta.codeVerifier,\n        redirectUri: meta.redirectUri\n    };\n    return PKCE.getToken(sdk, getTokenParams, urls)\n        .then(function (res) {\n        validateResponse(res, getTokenParams);\n        return res;\n    })\n        .finally(function () {\n        PKCE.clearMeta(sdk);\n    });\n}\nfunction validateResponse(res, oauthParams) {\n    if (res['error'] || res['error_description']) {\n        throw new OAuthError(res['error'], res['error_description']);\n    }\n    if (res.state !== oauthParams.state) {\n        throw new AuthSdkError('OAuth flow response state doesn\\'t match request state');\n    }\n}\n// eslint-disable-next-line max-len\nfunction handleOAuthResponse(sdk, tokenParams, res, urls) {\n    urls = urls || {};\n    var responseType = tokenParams.responseType;\n    if (!Array.isArray(responseType)) {\n        responseType = [responseType];\n    }\n    var scopes = clone(tokenParams.scopes);\n    var clientId = tokenParams.clientId || sdk.options.clientId;\n    var pkce = sdk.options.pkce !== false;\n    return Promise.resolve()\n        .then(function () {\n        validateResponse(res, tokenParams);\n        // PKCE flow\n        // We do not support \"hybrid\" scenarios where the response includes both a code and a token.\n        // If the response contains a code it is used immediately to obtain new tokens.\n        if (res.code && pkce) {\n            // responseType is not sent to the token endpoint.\n            // We populate this array to validate the response below\n            responseType = ['token']; // an accessToken will always be returned\n            if (scopes.indexOf('openid') !== -1) {\n                responseType.push('id_token'); // an idToken will be returned if \"openid\" is in the scopes\n            }\n            return exchangeCodeForToken(sdk, tokenParams, res.code, urls);\n        }\n        return res;\n    }).then(function (res) {\n        var tokenDict = {};\n        var expiresIn = res.expires_in;\n        var tokenType = res.token_type;\n        var accessToken = res.access_token;\n        var idToken = res.id_token;\n        if (accessToken) {\n            tokenDict.accessToken = {\n                value: accessToken,\n                accessToken: accessToken,\n                expiresAt: Number(expiresIn) + Math.floor(Date.now() / 1000),\n                tokenType: tokenType,\n                scopes: scopes,\n                authorizeUrl: urls.authorizeUrl,\n                userinfoUrl: urls.userinfoUrl\n            };\n        }\n        if (idToken) {\n            var jwt = sdk.token.decode(idToken);\n            var idTokenObj = {\n                value: idToken,\n                idToken: idToken,\n                claims: jwt.payload,\n                expiresAt: jwt.payload.exp,\n                scopes: scopes,\n                authorizeUrl: urls.authorizeUrl,\n                issuer: urls.issuer,\n                clientId: clientId\n            };\n            var validationParams = {\n                clientId: clientId,\n                issuer: urls.issuer,\n                nonce: tokenParams.nonce,\n                accessToken: accessToken\n            };\n            if (tokenParams.ignoreSignature !== undefined) {\n                validationParams.ignoreSignature = tokenParams.ignoreSignature;\n            }\n            return verifyToken(sdk, idTokenObj, validationParams)\n                .then(function () {\n                tokenDict.idToken = idTokenObj;\n                return tokenDict;\n            });\n        }\n        return tokenDict;\n    })\n        .then(function (tokenDict) {\n        // Validate received tokens against requested response types \n        if (responseType.indexOf('token') !== -1 && !tokenDict.accessToken) {\n            // eslint-disable-next-line max-len\n            throw new AuthSdkError('Unable to parse OAuth flow response: response type \"token\" was requested but \"access_token\" was not returned.');\n        }\n        if (responseType.indexOf('id_token') !== -1 && !tokenDict.idToken) {\n            // eslint-disable-next-line max-len\n            throw new AuthSdkError('Unable to parse OAuth flow response: response type \"id_token\" was requested but \"id_token\" was not returned.');\n        }\n        return {\n            tokens: tokenDict,\n            state: res.state,\n            code: res.code\n        };\n    });\n}\nfunction getDefaultTokenParams(sdk) {\n    return {\n        pkce: sdk.options.pkce,\n        clientId: sdk.options.clientId,\n        redirectUri: sdk.options.redirectUri || window.location.href,\n        responseType: ['token', 'id_token'],\n        responseMode: sdk.options.responseMode,\n        state: generateState(),\n        nonce: generateNonce(),\n        scopes: ['openid', 'email'],\n        ignoreSignature: sdk.options.ignoreSignature\n    };\n}\nfunction convertTokenParamsToOAuthParams(tokenParams) {\n    // Quick validation\n    if (!tokenParams.clientId) {\n        throw new AuthSdkError('A clientId must be specified in the OktaAuth constructor to get a token');\n    }\n    if (isString(tokenParams.responseType) && tokenParams.responseType.indexOf(' ') !== -1) {\n        throw new AuthSdkError('Multiple OAuth responseTypes must be defined as an array');\n    }\n    // Convert our params to their actual OAuth equivalents\n    var oauthParams = {\n        'client_id': tokenParams.clientId,\n        'code_challenge': tokenParams.codeChallenge,\n        'code_challenge_method': tokenParams.codeChallengeMethod,\n        'display': tokenParams.display,\n        'idp': tokenParams.idp,\n        'idp_scope': tokenParams.idpScope,\n        'login_hint': tokenParams.loginHint,\n        'max_age': tokenParams.maxAge,\n        'nonce': tokenParams.nonce,\n        'prompt': tokenParams.prompt,\n        'redirect_uri': tokenParams.redirectUri,\n        'response_mode': tokenParams.responseMode,\n        'response_type': tokenParams.responseType,\n        'sessionToken': tokenParams.sessionToken,\n        'state': tokenParams.state,\n    };\n    oauthParams = removeNils(oauthParams);\n    ['idp_scope', 'response_type'].forEach(function (mayBeArray) {\n        if (Array.isArray(oauthParams[mayBeArray])) {\n            oauthParams[mayBeArray] = oauthParams[mayBeArray].join(' ');\n        }\n    });\n    if (tokenParams.responseType.indexOf('id_token') !== -1 &&\n        tokenParams.scopes.indexOf('openid') === -1) {\n        throw new AuthSdkError('openid scope must be specified in the scopes argument when requesting an id_token');\n    }\n    else {\n        oauthParams.scope = tokenParams.scopes.join(' ');\n    }\n    return oauthParams;\n}\nfunction buildAuthorizeParams(tokenParams) {\n    var oauthQueryParams = convertTokenParamsToOAuthParams(tokenParams);\n    return toQueryParams(oauthQueryParams);\n}\n/*\n * Retrieve an idToken from an Okta or a third party idp\n *\n * Two main flows:\n *\n *  1) Exchange a sessionToken for a token\n *\n *    Required:\n *      clientId: passed via the OktaAuth constructor or into getToken\n *      sessionToken: 'yourtoken'\n *\n *    Optional:\n *      redirectUri: defaults to window.location.href\n *      scopes: defaults to ['openid', 'email']\n *\n *    Forced:\n *      prompt: 'none'\n *      responseMode: 'okta_post_message'\n *      display: undefined\n *\n *  2) Get a token from an idp\n *\n *    Required:\n *      clientId: passed via the OktaAuth constructor or into getToken\n *\n *    Optional:\n *      redirectUri: defaults to window.location.href\n *      scopes: defaults to ['openid', 'email']\n *      idp: defaults to Okta as an idp\n *      prompt: no default. Pass 'none' to throw an error if user is not signed in\n *\n *    Forced:\n *      display: 'popup'\n *\n *  Only common optional params shown. Any OAuth parameters not explicitly forced are available to override\n *\n * @param {Object} oauthOptions\n * @param {String} [oauthOptions.clientId] ID of this client\n * @param {String} [oauthOptions.redirectUri] URI that the iframe or popup will go to once authenticated\n * @param {String[]} [oauthOptions.scopes] OAuth 2.0 scopes to request (openid must be specified)\n * @param {String} [oauthOptions.idp] ID of an external IdP to use for user authentication\n * @param {String} [oauthOptions.sessionToken] Bootstrap Session Token returned by the Okta Authentication API\n * @param {String} [oauthOptions.prompt] Determines whether the Okta login will be displayed on failure.\n *                                       Use 'none' to prevent this behavior\n *\n * @param {Object} options\n * @param {Integer} [options.timeout] Time in ms before the flow is automatically terminated. Defaults to 120000\n * @param {String} [options.popupTitle] Title dispayed in the popup.\n *                                      Defaults to 'External Identity Provider User Authentication'\n */\nfunction getToken(sdk, options) {\n    if (arguments.length > 2) {\n        return Promise.reject(new AuthSdkError('As of version 3.0, \"getToken\" takes only a single set of options'));\n    }\n    options = options || {};\n    return prepareTokenParams(sdk, options)\n        .then(function (tokenParams) {\n        // Start overriding any options that don't make sense\n        var sessionTokenOverrides = {\n            prompt: 'none',\n            responseMode: 'okta_post_message',\n            display: null\n        };\n        var idpOverrides = {\n            display: 'popup'\n        };\n        if (options.sessionToken) {\n            Object.assign(tokenParams, sessionTokenOverrides);\n        }\n        else if (options.idp) {\n            Object.assign(tokenParams, idpOverrides);\n        }\n        // Use the query params to build the authorize url\n        var requestUrl, endpoint, urls;\n        // Get authorizeUrl and issuer\n        urls = getOAuthUrls(sdk, tokenParams);\n        endpoint = options.codeVerifier ? urls.tokenUrl : urls.authorizeUrl;\n        requestUrl = endpoint + buildAuthorizeParams(tokenParams);\n        // Determine the flow type\n        var flowType;\n        if (tokenParams.sessionToken || tokenParams.display === null) {\n            flowType = 'IFRAME';\n        }\n        else if (tokenParams.display === 'popup') {\n            flowType = 'POPUP';\n        }\n        else {\n            flowType = 'IMPLICIT';\n        }\n        // Execute the flow type\n        switch (flowType) {\n            case 'IFRAME':\n                var iframePromise = addPostMessageListener(sdk, options.timeout, tokenParams.state);\n                var iframeEl = loadFrame(requestUrl);\n                return iframePromise\n                    .then(function (res) {\n                    return handleOAuthResponse(sdk, tokenParams, res, urls);\n                })\n                    .finally(function () {\n                    if (document.body.contains(iframeEl)) {\n                        iframeEl.parentElement.removeChild(iframeEl);\n                    }\n                });\n            case 'POPUP':\n                var oauthPromise; // resolves with OAuth response\n                // Add listener on postMessage before window creation, so\n                // postMessage isn't triggered before we're listening\n                if (tokenParams.responseMode === 'okta_post_message') {\n                    if (!sdk.features.isPopupPostMessageSupported()) {\n                        throw new AuthSdkError('This browser doesn\\'t have full postMessage support');\n                    }\n                    oauthPromise = addPostMessageListener(sdk, options.timeout, tokenParams.state);\n                }\n                // Create the window\n                var windowOptions = {\n                    popupTitle: options.popupTitle\n                };\n                var windowEl = loadPopup(requestUrl, windowOptions);\n                // The popup may be closed without receiving an OAuth response. Setup a poller to monitor the window.\n                var popupPromise = new Promise(function (resolve, reject) {\n                    var closePoller = setInterval(function () {\n                        if (!windowEl || windowEl.closed) {\n                            clearInterval(closePoller);\n                            reject(new AuthSdkError('Unable to parse OAuth flow response'));\n                        }\n                    }, 100);\n                    // Proxy the OAuth promise results\n                    oauthPromise\n                        .then(function (res) {\n                        clearInterval(closePoller);\n                        resolve(res);\n                    })\n                        .catch(function (err) {\n                        clearInterval(closePoller);\n                        reject(err);\n                    });\n                });\n                return popupPromise\n                    .then(function (res) {\n                    return handleOAuthResponse(sdk, tokenParams, res, urls);\n                })\n                    .finally(function () {\n                    if (windowEl && !windowEl.closed) {\n                        windowEl.close();\n                    }\n                });\n            default:\n                throw new AuthSdkError('The full page redirect flow is not supported');\n        }\n    })\n        .catch(e => {\n        if (sdk.options.pkce) {\n            PKCE.clearMeta(sdk);\n        }\n        throw e;\n    });\n}\nfunction getWithoutPrompt(sdk, options) {\n    if (arguments.length > 2) {\n        return Promise.reject(new AuthSdkError('As of version 3.0, \"getWithoutPrompt\" takes only a single set of options'));\n    }\n    options = clone(options) || {};\n    Object.assign(options, {\n        prompt: 'none',\n        responseMode: 'okta_post_message',\n        display: null\n    });\n    return getToken(sdk, options);\n}\nfunction getWithPopup(sdk, options) {\n    if (arguments.length > 2) {\n        return Promise.reject(new AuthSdkError('As of version 3.0, \"getWithPopup\" takes only a single set of options'));\n    }\n    options = clone(options) || {};\n    Object.assign(options, {\n        display: 'popup',\n        responseMode: 'okta_post_message'\n    });\n    return getToken(sdk, options);\n}\nfunction prepareTokenParams(sdk, options) {\n    if (isLoginRedirect(sdk)) {\n        return Promise.reject(new AuthSdkError('The app should not attempt to call getToken on callback. ' +\n            'Authorize flow is already in process. Use parseFromUrl() to receive tokens.'));\n    }\n    // clone and prepare options\n    options = clone(options) || {};\n    // build params using defaults + options\n    var tokenParams = getDefaultTokenParams(sdk);\n    Object.assign(tokenParams, options);\n    if (tokenParams.pkce === false) {\n        return Promise.resolve(tokenParams);\n    }\n    // PKCE flow\n    if (!sdk.features.isPKCESupported()) {\n        var errorMessage = 'PKCE requires a modern browser with encryption support running in a secure context.';\n        if (!sdk.features.isHTTPS()) {\n            // eslint-disable-next-line max-len\n            errorMessage += '\\nThe current page is not being served with HTTPS protocol. PKCE requires secure HTTPS protocol.';\n        }\n        if (!sdk.features.hasTextEncoder()) {\n            // eslint-disable-next-line max-len\n            errorMessage += '\\n\"TextEncoder\" is not defined. To use PKCE, you may need to include a polyfill/shim for this browser.';\n        }\n        return Promise.reject(new AuthSdkError(errorMessage));\n    }\n    // set default code challenge method, if none provided\n    if (!tokenParams.codeChallengeMethod) {\n        tokenParams.codeChallengeMethod = PKCE.DEFAULT_CODE_CHALLENGE_METHOD;\n    }\n    // responseType is forced\n    tokenParams.responseType = 'code';\n    return getWellKnown(sdk, null)\n        .then(function (res) {\n        var methods = res['code_challenge_methods_supported'] || [];\n        if (methods.indexOf(tokenParams.codeChallengeMethod) === -1) {\n            throw new AuthSdkError('Invalid code_challenge_method');\n        }\n    })\n        .then(function () {\n        // PKCE authorization_code flow\n        var codeVerifier = PKCE.generateVerifier(tokenParams.codeVerifier);\n        // We will need these values after redirect when we call /token\n        var meta = {\n            codeVerifier: codeVerifier,\n            redirectUri: tokenParams.redirectUri\n        };\n        PKCE.saveMeta(sdk, meta);\n        return PKCE.computeChallenge(codeVerifier);\n    })\n        .then(function (codeChallenge) {\n        // Clone/copy the params. Set codeChallenge\n        var clonedParams = clone(tokenParams) || {};\n        Object.assign(clonedParams, tokenParams, {\n            codeChallenge: codeChallenge,\n        });\n        return clonedParams;\n    });\n}\nfunction addOAuthParamsToStorage(sdk, tokenParams, urls) {\n    const { responseType, state, nonce, scopes, clientId, ignoreSignature } = tokenParams;\n    const tokenParamsStr = JSON.stringify({\n        responseType,\n        state,\n        nonce,\n        scopes,\n        clientId,\n        urls,\n        ignoreSignature\n    });\n    if (browserStorage.browserHasSessionStorage()) {\n        browserStorage.getSessionStorage().setItem(REDIRECT_OAUTH_PARAMS_NAME, tokenParamsStr);\n    }\n    else {\n        cookies.set(REDIRECT_OAUTH_PARAMS_NAME, tokenParamsStr, null, sdk.options.cookies);\n    }\n}\nfunction getWithRedirect(sdk, options) {\n    if (arguments.length > 2) {\n        return Promise.reject(new AuthSdkError('As of version 3.0, \"getWithRedirect\" takes only a single set of options'));\n    }\n    options = clone(options) || {};\n    return prepareTokenParams(sdk, options)\n        .then(function (tokenParams) {\n        var urls = getOAuthUrls(sdk, options);\n        var requestUrl = urls.authorizeUrl + buildAuthorizeParams(tokenParams);\n        addOAuthParamsToStorage(sdk, tokenParams, urls);\n        // Set nonce cookie for servers to validate nonce in id_token\n        cookies.set(REDIRECT_NONCE_COOKIE_NAME, tokenParams.nonce, null, sdk.options.cookies);\n        // Set state cookie for servers to validate state\n        cookies.set(REDIRECT_STATE_COOKIE_NAME, tokenParams.state, null, sdk.options.cookies);\n        sdk.token.getWithRedirect._setLocation(requestUrl);\n    });\n}\nfunction renewToken(sdk, token) {\n    if (!isToken(token)) {\n        return Promise.reject(new AuthSdkError('Renew must be passed a token with ' +\n            'an array of scopes and an accessToken or idToken'));\n    }\n    var responseType;\n    if (sdk.options.pkce) {\n        responseType = 'code';\n    }\n    else if (isAccessToken(token)) {\n        responseType = 'token';\n    }\n    else {\n        responseType = 'id_token';\n    }\n    const { scopes, authorizeUrl, userinfoUrl, issuer } = token;\n    return getWithoutPrompt(sdk, {\n        responseType,\n        scopes,\n        authorizeUrl,\n        userinfoUrl,\n        issuer\n    })\n        .then(function (res) {\n        // Multiple tokens may have come back. Return only the token which was requested.\n        var tokens = res.tokens;\n        return isIDToken(token) ? tokens.idToken : tokens.accessToken;\n    });\n}\nfunction removeHash(sdk) {\n    var nativeHistory = sdk.token.parseFromUrl._getHistory();\n    var nativeDoc = sdk.token.parseFromUrl._getDocument();\n    var nativeLoc = sdk.token.parseFromUrl._getLocation();\n    if (nativeHistory && nativeHistory.replaceState) {\n        nativeHistory.replaceState(null, nativeDoc.title, nativeLoc.pathname + nativeLoc.search);\n    }\n    else {\n        nativeLoc.hash = '';\n    }\n}\nfunction removeSearch(sdk) {\n    var nativeHistory = sdk.token.parseFromUrl._getHistory();\n    var nativeDoc = sdk.token.parseFromUrl._getDocument();\n    var nativeLoc = sdk.token.parseFromUrl._getLocation();\n    if (nativeHistory && nativeHistory.replaceState) {\n        nativeHistory.replaceState(null, nativeDoc.title, nativeLoc.pathname + nativeLoc.hash);\n    }\n    else {\n        nativeLoc.search = '';\n    }\n}\nfunction getOAuthParamsStrFromStorage() {\n    // try to read OAuth params from cookie first. This is for backward compatibility\n    let oauthParamsStr = cookies.get(REDIRECT_OAUTH_PARAMS_NAME);\n    cookies.delete(REDIRECT_OAUTH_PARAMS_NAME);\n    // latest version of auth-js will store params in session storage\n    if (!oauthParamsStr && browserStorage.browserHasSessionStorage()) {\n        const storage = browserStorage.getSessionStorage();\n        oauthParamsStr = storage.getItem(REDIRECT_OAUTH_PARAMS_NAME);\n        storage.removeItem(REDIRECT_OAUTH_PARAMS_NAME);\n    }\n    return oauthParamsStr;\n}\nfunction parseFromUrl(sdk, options) {\n    options = options || {};\n    if (isString(options)) {\n        options = { url: options };\n    }\n    else {\n        options = options;\n    }\n    // https://openid.net/specs/openid-connect-core-1_0.html#Authentication\n    var defaultResponseMode = sdk.options.pkce ? 'query' : 'fragment';\n    var url = options.url;\n    var responseMode = options.responseMode || sdk.options.responseMode || defaultResponseMode;\n    var nativeLoc = sdk.token.parseFromUrl._getLocation();\n    var paramStr;\n    if (responseMode === 'query') {\n        paramStr = url ? url.substring(url.indexOf('?')) : nativeLoc.search;\n    }\n    else {\n        paramStr = url ? url.substring(url.indexOf('#')) : nativeLoc.hash;\n    }\n    if (!paramStr) {\n        return Promise.reject(new AuthSdkError('Unable to parse a token from the url'));\n    }\n    const oauthParamsStr = getOAuthParamsStrFromStorage();\n    if (!oauthParamsStr) {\n        return Promise.reject(new AuthSdkError('Unable to retrieve OAuth redirect params from storage'));\n    }\n    try {\n        var oauthParams = JSON.parse(oauthParamsStr);\n        var urls = oauthParams.urls;\n        delete oauthParams.urls;\n    }\n    catch (e) {\n        return Promise.reject(new AuthSdkError('Unable to parse the ' +\n            REDIRECT_OAUTH_PARAMS_NAME + ' value from storage: ' + e.message));\n    }\n    return Promise.resolve(urlParamsToObject(paramStr))\n        .then(function (res) {\n        if (!url) {\n            // Clean hash or search from the url\n            responseMode === 'query' ? removeSearch(sdk) : removeHash(sdk);\n        }\n        return handleOAuthResponse(sdk, oauthParams, res, urls);\n    });\n}\nfunction getUserInfo(sdk, accessTokenObject, idTokenObject) {\n    return __awaiter(this, void 0, void 0, function* () {\n        // If token objects were not passed, attempt to read from the TokenManager\n        if (!accessTokenObject) {\n            accessTokenObject = yield sdk.tokenManager.get(ACCESS_TOKEN_STORAGE_KEY);\n        }\n        if (!idTokenObject) {\n            idTokenObject = yield sdk.tokenManager.get(ID_TOKEN_STORAGE_KEY);\n        }\n        if (!accessTokenObject ||\n            (!isToken(accessTokenObject) && !accessTokenObject.accessToken && !accessTokenObject.userinfoUrl)) {\n            return Promise.reject(new AuthSdkError('getUserInfo requires an access token object'));\n        }\n        if (!idTokenObject ||\n            (!isToken(idTokenObject) && !idTokenObject.idToken)) {\n            return Promise.reject(new AuthSdkError('getUserInfo requires an ID token object'));\n        }\n        return http.httpRequest(sdk, {\n            url: accessTokenObject.userinfoUrl,\n            method: 'GET',\n            accessToken: accessTokenObject.accessToken\n        })\n            .then(userInfo => {\n            // Only return the userinfo response if subjects match to mitigate token substitution attacks\n            if (userInfo.sub === idTokenObject.claims.sub) {\n                return userInfo;\n            }\n            return Promise.reject(new AuthSdkError('getUserInfo request was rejected due to token mismatch'));\n        })\n            .catch(function (err) {\n            if (err.xhr && (err.xhr.status === 401 || err.xhr.status === 403)) {\n                var authenticateHeader;\n                if (err.xhr.headers && isFunction(err.xhr.headers.get) && err.xhr.headers.get('WWW-Authenticate')) {\n                    authenticateHeader = err.xhr.headers.get('WWW-Authenticate');\n                }\n                else if (isFunction(err.xhr.getResponseHeader)) {\n                    authenticateHeader = err.xhr.getResponseHeader('WWW-Authenticate');\n                }\n                if (authenticateHeader) {\n                    var errorMatches = authenticateHeader.match(/error=\"(.*?)\"/) || [];\n                    var errorDescriptionMatches = authenticateHeader.match(/error_description=\"(.*?)\"/) || [];\n                    var error = errorMatches[1];\n                    var errorDescription = errorDescriptionMatches[1];\n                    if (error && errorDescription) {\n                        err = new OAuthError(error, errorDescription);\n                    }\n                }\n            }\n            throw err;\n        });\n    });\n}\nexport { revokeToken, getToken, getWithoutPrompt, getWithPopup, getWithRedirect, parseFromUrl, decodeToken, renewToken, getUserInfo, verifyToken, handleOAuthResponse, prepareTokenParams };\n","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\n/* global crypto */\nimport { stringToBase64Url, clone, stringToBuffer, base64UrlDecode } from './util';\nfunction getOidcHash(str) {\n    var buffer = new TextEncoder().encode(str);\n    return crypto.subtle.digest('SHA-256', buffer).then(function (arrayBuffer) {\n        var intBuffer = new Uint8Array(arrayBuffer);\n        var firstHalf = intBuffer.slice(0, 16);\n        var hash = String.fromCharCode.apply(null, firstHalf);\n        var b64u = stringToBase64Url(hash); // url-safe base64 variant\n        return b64u;\n    });\n}\nfunction verifyToken(idToken, key) {\n    key = clone(key);\n    var format = 'jwk';\n    var algo = {\n        name: 'RSASSA-PKCS1-v1_5',\n        hash: { name: 'SHA-256' }\n    };\n    var extractable = true;\n    var usages = ['verify'];\n    // https://connect.microsoft.com/IE/feedback/details/2242108/webcryptoapi-importing-jwk-with-use-field-fails\n    // This is a metadata tag that specifies the intent of how the key should be used.\n    // It's not necessary to properly verify the jwt's signature.\n    delete key.use;\n    // @ts-ignore\n    return crypto.subtle.importKey(format, key, algo, extractable, usages)\n        .then(function (cryptoKey) {\n        var jwt = idToken.split('.');\n        var payload = stringToBuffer(jwt[0] + '.' + jwt[1]);\n        var b64Signature = base64UrlDecode(jwt[2]);\n        var signature = stringToBuffer(b64Signature);\n        return crypto.subtle.verify(algo, cryptoKey, signature, payload);\n    });\n}\nexport { getOidcHash, verifyToken };\n","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\n// Implements a queue for synchronous or asynchronous methods\n// Methods will be wrapped in a promise and execute sequentially\n// This can be used to prevent concurrent calls to a single method or a set of methods\nimport { isPromise } from './util';\nclass PromiseQueue {\n    constructor() {\n        this.queue = [];\n        this.running = false;\n    }\n    // Returns a promise\n    // If the method is synchronous, it will resolve when the method completes\n    // If the method returns a promise, it will resolve (or reject) with the value from the method's promise\n    push( /* method, thisObject, args... */) {\n        var args = Array.prototype.slice.call(arguments);\n        var method = args[0];\n        var thisObject = args[1];\n        args = args.slice(2);\n        return new Promise((resolve, reject) => {\n            this.queue.push({\n                method,\n                thisObject,\n                args,\n                resolve,\n                reject\n            });\n            this.run();\n        });\n    }\n    run() {\n        if (this.running) {\n            return;\n        }\n        if (this.queue.length === 0) {\n            return;\n        }\n        this.running = true;\n        var queueItem = this.queue.shift();\n        var res = queueItem.method.apply(queueItem.thisObject, queueItem.args);\n        if (isPromise(res)) {\n            res.then(queueItem.resolve, queueItem.reject).finally(() => {\n                this.running = false;\n                this.run();\n            });\n        }\n        else {\n            queueItem.resolve(res);\n            this.running = false;\n            this.run();\n        }\n    }\n}\nexport default PromiseQueue;\n","import { AuthSdkError } from '../errors';\nimport { isFingerprintSupported } from './features';\nimport { addListener, removeListener } from '../oauthUtil';\nexport default function fingerprint(sdk, options) {\n    options = options || {};\n    if (!isFingerprintSupported()) {\n        return Promise.reject(new AuthSdkError('Fingerprinting is not supported on this device'));\n    }\n    var timeout;\n    var iframe;\n    var listener;\n    var promise = new Promise(function (resolve, reject) {\n        iframe = document.createElement('iframe');\n        iframe.style.display = 'none';\n        // eslint-disable-next-line complexity\n        listener = function listener(e) {\n            if (!e || !e.data || e.origin !== sdk.getIssuerOrigin()) {\n                return;\n            }\n            try {\n                var msg = JSON.parse(e.data);\n            }\n            catch (err) {\n                // iframe messages should all be parsable\n                // skip not parsable messages come from other sources in same origin (browser extensions)\n                // TODO: add namespace flag in okta-core to distinguish messages that come from other sources\n                return;\n            }\n            if (!msg) {\n                return;\n            }\n            if (msg.type === 'FingerprintAvailable') {\n                return resolve(msg.fingerprint);\n            }\n            if (msg.type === 'FingerprintServiceReady') {\n                e.source.postMessage(JSON.stringify({\n                    type: 'GetFingerprint'\n                }), e.origin);\n            }\n        };\n        addListener(window, 'message', listener);\n        iframe.src = sdk.getIssuerOrigin() + '/auth/services/devicefingerprint';\n        document.body.appendChild(iframe);\n        timeout = setTimeout(function () {\n            reject(new AuthSdkError('Fingerprinting timed out'));\n        }, options.timeout || 15000);\n    });\n    return promise.finally(function () {\n        clearTimeout(timeout);\n        removeListener(window, 'message', listener);\n        if (document.body.contains(iframe)) {\n            iframe.parentElement.removeChild(iframe);\n        }\n    });\n}\n","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\n/* eslint-disable complexity */\n/* eslint-disable max-statements */\n/* SDK_VERSION is defined in webpack config */\n/* global SDK_VERSION */\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport OktaAuthBase from '../OktaAuthBase';\nimport * as features from './features';\nimport fetchRequest from '../fetch/fetchRequest';\nimport browserStorage from './browserStorage';\nimport { removeTrailingSlash, toQueryParams, clone } from '../util';\nimport { getUserAgent } from '../builderUtil';\nimport { DEFAULT_MAX_CLOCK_SKEW, ACCESS_TOKEN_STORAGE_KEY, ID_TOKEN_STORAGE_KEY } from '../constants';\nimport { closeSession, sessionExists, getSession, refreshSession, setCookieAndRedirect } from '../session';\nimport { getWithoutPrompt, getWithPopup, getWithRedirect, parseFromUrl, decodeToken, revokeToken, renewToken, getUserInfo, verifyToken } from '../token';\nimport { TokenManager } from '../TokenManager';\nimport { getOAuthUrls, isLoginRedirect } from '../oauthUtil';\nimport http from '../http';\nimport PromiseQueue from '../PromiseQueue';\nimport fingerprint from './fingerprint';\nimport { postToTransaction } from '../tx';\nconst Emitter = require('tiny-emitter');\nfunction getCookieSettings(sdk, args) {\n    // Secure cookies will be automatically used on a HTTPS connection\n    // Non-secure cookies will be automatically used on a HTTP connection\n    // secure option can override the automatic behavior\n    var cookieSettings = args.cookies || {};\n    if (typeof cookieSettings.secure === 'undefined') {\n        cookieSettings.secure = sdk.features.isHTTPS();\n    }\n    if (typeof cookieSettings.sameSite === 'undefined') {\n        cookieSettings.sameSite = cookieSettings.secure ? 'none' : 'lax';\n    }\n    // If secure=true, but the connection is not HTTPS, set secure=false.\n    if (cookieSettings.secure && !sdk.features.isHTTPS()) {\n        // eslint-disable-next-line no-console\n        console.warn('The current page is not being served with the HTTPS protocol.\\n' +\n            'For security reasons, we strongly recommend using HTTPS.\\n' +\n            'If you cannot use HTTPS, set \"cookies.secure\" option to false.');\n        cookieSettings.secure = false;\n    }\n    // Chrome >= 80 will block cookies with SameSite=None unless they are also Secure\n    // If sameSite=none, but the connection is not HTTPS, set sameSite=lax.\n    if (cookieSettings.sameSite === 'none' && !cookieSettings.secure) {\n        cookieSettings.sameSite = 'lax';\n    }\n    return cookieSettings;\n}\nclass OktaAuthBrowser extends OktaAuthBase {\n    constructor(args) {\n        args = Object.assign({\n            httpRequestClient: fetchRequest,\n            storageUtil: browserStorage\n        }, args);\n        super(args);\n        this.options = Object.assign(this.options, {\n            clientId: args.clientId,\n            authorizeUrl: removeTrailingSlash(args.authorizeUrl),\n            userinfoUrl: removeTrailingSlash(args.userinfoUrl),\n            tokenUrl: removeTrailingSlash(args.tokenUrl),\n            revokeUrl: removeTrailingSlash(args.revokeUrl),\n            logoutUrl: removeTrailingSlash(args.logoutUrl),\n            pkce: args.pkce === false ? false : true,\n            redirectUri: args.redirectUri,\n            postLogoutRedirectUri: args.postLogoutRedirectUri,\n            responseMode: args.responseMode,\n            transformErrorXHR: args.transformErrorXHR,\n            cookies: getCookieSettings(this, args)\n        });\n        this.userAgent = getUserAgent(args, `okta-auth-js/${SDK_VERSION}`);\n        // Digital clocks will drift over time, so the server\n        // can misalign with the time reported by the browser.\n        // The maxClockSkew allows relaxing the time-based\n        // validation of tokens (in seconds, not milliseconds).\n        // It currently defaults to 300, because 5 min is the\n        // default maximum tolerance allowed by Kerberos.\n        // (https://technet.microsoft.com/en-us/library/cc976357.aspx)\n        if (!args.maxClockSkew && args.maxClockSkew !== 0) {\n            this.options.maxClockSkew = DEFAULT_MAX_CLOCK_SKEW;\n        }\n        else {\n            this.options.maxClockSkew = args.maxClockSkew;\n        }\n        // Give the developer the ability to disable token signature\n        // validation.\n        this.options.ignoreSignature = !!args.ignoreSignature;\n        this.session = {\n            close: closeSession.bind(null, this),\n            exists: sessionExists.bind(null, this),\n            get: getSession.bind(null, this),\n            refresh: refreshSession.bind(null, this),\n            setCookieAndRedirect: setCookieAndRedirect.bind(null, this)\n        };\n        this._tokenQueue = new PromiseQueue();\n        this.token = {\n            getWithoutPrompt: getWithoutPrompt.bind(null, this),\n            getWithPopup: getWithPopup.bind(null, this),\n            getWithRedirect: getWithRedirect.bind(null, this),\n            parseFromUrl: parseFromUrl.bind(null, this),\n            decode: decodeToken,\n            revoke: revokeToken.bind(null, this),\n            renew: renewToken.bind(null, this),\n            getUserInfo: getUserInfo.bind(null, this),\n            verify: verifyToken.bind(null, this),\n            isLoginRedirect: isLoginRedirect.bind(null, this)\n        };\n        // Wrap all async token API methods using MethodQueue to avoid issues with concurrency\n        const syncMethods = ['decode', 'isLoginRedirect'];\n        Object.keys(this.token).forEach(key => {\n            if (syncMethods.indexOf(key) >= 0) { // sync methods should not be wrapped\n                return;\n            }\n            var method = this.token[key];\n            this.token[key] = PromiseQueue.prototype.push.bind(this._tokenQueue, method, null);\n        });\n        Object.assign(this.token.getWithRedirect, {\n            // This is exposed so we can set window.location in our tests\n            _setLocation: function (url) {\n                window.location = url;\n            }\n        });\n        Object.assign(this.token.parseFromUrl, {\n            // This is exposed so we can mock getting window.history in our tests\n            _getHistory: function () {\n                return window.history;\n            },\n            // This is exposed so we can mock getting window.location in our tests\n            _getLocation: function () {\n                return window.location;\n            },\n            // This is exposed so we can mock getting window.document in our tests\n            _getDocument: function () {\n                return window.document;\n            }\n        });\n        // Fingerprint API\n        this.fingerprint = fingerprint.bind(null, this);\n        this.emitter = new Emitter();\n        this.tokenManager = new TokenManager(this, args.tokenManager);\n    }\n    signIn(opts) {\n        opts = clone(opts || {});\n        const _postToTransaction = (options) => {\n            delete opts.sendFingerprint;\n            return postToTransaction(this, '/api/v1/authn', opts, options);\n        };\n        if (!opts.sendFingerprint) {\n            return _postToTransaction();\n        }\n        return this.fingerprint()\n            .then(function (fingerprint) {\n            return _postToTransaction({\n                headers: {\n                    'X-Device-Fingerprint': fingerprint\n                }\n            });\n        });\n    }\n    // Ends the current Okta SSO session without redirecting to Okta.\n    closeSession() {\n        // Clear all local tokens\n        this.tokenManager.clear();\n        return this.session.close() // DELETE /api/v1/sessions/me\n            .catch(function (e) {\n            if (e.name === 'AuthApiError' && e.errorCode === 'E0000007') {\n                // Session does not exist or has already been closed\n                return;\n            }\n            throw e;\n        });\n    }\n    // Revokes the access token for the application session\n    revokeAccessToken(accessToken) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!accessToken) {\n                accessToken = (yield this.tokenManager.get(ACCESS_TOKEN_STORAGE_KEY));\n                this.tokenManager.remove(ACCESS_TOKEN_STORAGE_KEY);\n            }\n            // Access token may have been removed. In this case, we will silently succeed.\n            if (!accessToken) {\n                return Promise.resolve();\n            }\n            return this.token.revoke(accessToken);\n        });\n    }\n    // Revokes accessToken, clears all local tokens, then redirects to Okta to end the SSO session.\n    signOut(options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            options = Object.assign({}, options);\n            // postLogoutRedirectUri must be whitelisted in Okta Admin UI\n            var defaultUri = window.location.origin;\n            var currentUri = window.location.href;\n            var postLogoutRedirectUri = options.postLogoutRedirectUri\n                || this.options.postLogoutRedirectUri\n                || defaultUri;\n            var accessToken = options.accessToken;\n            var revokeAccessToken = options.revokeAccessToken !== false;\n            var idToken = options.idToken;\n            var logoutUrl = getOAuthUrls(this).logoutUrl;\n            if (typeof idToken === 'undefined') {\n                idToken = yield this.tokenManager.get(ID_TOKEN_STORAGE_KEY);\n            }\n            if (revokeAccessToken && typeof accessToken === 'undefined') {\n                accessToken = yield this.tokenManager.get(ACCESS_TOKEN_STORAGE_KEY);\n            }\n            // Clear all local tokens\n            this.tokenManager.clear();\n            if (revokeAccessToken && accessToken) {\n                yield this.revokeAccessToken(accessToken);\n            }\n            // No idToken? This can happen if the storage was cleared.\n            // Fallback to XHR signOut, then simulate a redirect to the post logout uri\n            if (!idToken) {\n                return this.closeSession() // can throw if the user cannot be signed out\n                    .then(function () {\n                    if (postLogoutRedirectUri === currentUri) {\n                        window.location.reload(); // force a hard reload if URI is not changing\n                    }\n                    else {\n                        window.location.assign(postLogoutRedirectUri);\n                    }\n                });\n            }\n            // logout redirect using the idToken.\n            var state = options.state;\n            var idTokenHint = idToken.idToken; // a string\n            var logoutUri = logoutUrl + '?id_token_hint=' + encodeURIComponent(idTokenHint) +\n                '&post_logout_redirect_uri=' + encodeURIComponent(postLogoutRedirectUri);\n            // State allows option parameters to be passed to logout redirect uri\n            if (state) {\n                logoutUri += '&state=' + encodeURIComponent(state);\n            }\n            window.location.assign(logoutUri);\n        });\n    }\n    webfinger(opts) {\n        var url = '/.well-known/webfinger' + toQueryParams(opts);\n        var options = {\n            headers: {\n                'Accept': 'application/jrd+json'\n            }\n        };\n        return http.get(this, url, options);\n    }\n}\n// Hoist feature detection functions to static type\nOktaAuthBrowser.features = OktaAuthBrowser.prototype.features = features;\nexport default OktaAuthBrowser;\n","var getPrototypeOf = require(\"./getPrototypeOf\");\n\nvar setPrototypeOf = require(\"./setPrototypeOf\");\n\nvar isNativeFunction = require(\"./isNativeFunction\");\n\nvar construct = require(\"./construct\");\n\nfunction _wrapNativeSuper(Class) {\n  var _cache = typeof Map === \"function\" ? new Map() : undefined;\n\n  module.exports = _wrapNativeSuper = function _wrapNativeSuper(Class) {\n    if (Class === null || !isNativeFunction(Class)) return Class;\n\n    if (typeof Class !== \"function\") {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n\n    if (typeof _cache !== \"undefined\") {\n      if (_cache.has(Class)) return _cache.get(Class);\n\n      _cache.set(Class, Wrapper);\n    }\n\n    function Wrapper() {\n      return construct(Class, arguments, getPrototypeOf(this).constructor);\n    }\n\n    Wrapper.prototype = Object.create(Class.prototype, {\n      constructor: {\n        value: Wrapper,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    return setPrototypeOf(Wrapper, Class);\n  };\n\n  return _wrapNativeSuper(Class);\n}\n\nmodule.exports = _wrapNativeSuper;","var __self__ = (function (root) {\nfunction F() {\nthis.fetch = false;\nthis.DOMException = root.DOMException\n}\nF.prototype = root;\nreturn new F();\n})(typeof self !== 'undefined' ? self : this);\n(function(self) {\n\nvar irrelevant = (function (exports) {\n  var support = {\n    searchParams: 'URLSearchParams' in self,\n    iterable: 'Symbol' in self && 'iterator' in Symbol,\n    blob:\n      'FileReader' in self &&\n      'Blob' in self &&\n      (function() {\n        try {\n          new Blob();\n          return true\n        } catch (e) {\n          return false\n        }\n      })(),\n    formData: 'FormData' in self,\n    arrayBuffer: 'ArrayBuffer' in self\n  };\n\n  function isDataView(obj) {\n    return obj && DataView.prototype.isPrototypeOf(obj)\n  }\n\n  if (support.arrayBuffer) {\n    var viewClasses = [\n      '[object Int8Array]',\n      '[object Uint8Array]',\n      '[object Uint8ClampedArray]',\n      '[object Int16Array]',\n      '[object Uint16Array]',\n      '[object Int32Array]',\n      '[object Uint32Array]',\n      '[object Float32Array]',\n      '[object Float64Array]'\n    ];\n\n    var isArrayBufferView =\n      ArrayBuffer.isView ||\n      function(obj) {\n        return obj && viewClasses.indexOf(Object.prototype.toString.call(obj)) > -1\n      };\n  }\n\n  function normalizeName(name) {\n    if (typeof name !== 'string') {\n      name = String(name);\n    }\n    if (/[^a-z0-9\\-#$%&'*+.^_`|~]/i.test(name)) {\n      throw new TypeError('Invalid character in header field name')\n    }\n    return name.toLowerCase()\n  }\n\n  function normalizeValue(value) {\n    if (typeof value !== 'string') {\n      value = String(value);\n    }\n    return value\n  }\n\n  // Build a destructive iterator for the value list\n  function iteratorFor(items) {\n    var iterator = {\n      next: function() {\n        var value = items.shift();\n        return {done: value === undefined, value: value}\n      }\n    };\n\n    if (support.iterable) {\n      iterator[Symbol.iterator] = function() {\n        return iterator\n      };\n    }\n\n    return iterator\n  }\n\n  function Headers(headers) {\n    this.map = {};\n\n    if (headers instanceof Headers) {\n      headers.forEach(function(value, name) {\n        this.append(name, value);\n      }, this);\n    } else if (Array.isArray(headers)) {\n      headers.forEach(function(header) {\n        this.append(header[0], header[1]);\n      }, this);\n    } else if (headers) {\n      Object.getOwnPropertyNames(headers).forEach(function(name) {\n        this.append(name, headers[name]);\n      }, this);\n    }\n  }\n\n  Headers.prototype.append = function(name, value) {\n    name = normalizeName(name);\n    value = normalizeValue(value);\n    var oldValue = this.map[name];\n    this.map[name] = oldValue ? oldValue + ', ' + value : value;\n  };\n\n  Headers.prototype['delete'] = function(name) {\n    delete this.map[normalizeName(name)];\n  };\n\n  Headers.prototype.get = function(name) {\n    name = normalizeName(name);\n    return this.has(name) ? this.map[name] : null\n  };\n\n  Headers.prototype.has = function(name) {\n    return this.map.hasOwnProperty(normalizeName(name))\n  };\n\n  Headers.prototype.set = function(name, value) {\n    this.map[normalizeName(name)] = normalizeValue(value);\n  };\n\n  Headers.prototype.forEach = function(callback, thisArg) {\n    for (var name in this.map) {\n      if (this.map.hasOwnProperty(name)) {\n        callback.call(thisArg, this.map[name], name, this);\n      }\n    }\n  };\n\n  Headers.prototype.keys = function() {\n    var items = [];\n    this.forEach(function(value, name) {\n      items.push(name);\n    });\n    return iteratorFor(items)\n  };\n\n  Headers.prototype.values = function() {\n    var items = [];\n    this.forEach(function(value) {\n      items.push(value);\n    });\n    return iteratorFor(items)\n  };\n\n  Headers.prototype.entries = function() {\n    var items = [];\n    this.forEach(function(value, name) {\n      items.push([name, value]);\n    });\n    return iteratorFor(items)\n  };\n\n  if (support.iterable) {\n    Headers.prototype[Symbol.iterator] = Headers.prototype.entries;\n  }\n\n  function consumed(body) {\n    if (body.bodyUsed) {\n      return Promise.reject(new TypeError('Already read'))\n    }\n    body.bodyUsed = true;\n  }\n\n  function fileReaderReady(reader) {\n    return new Promise(function(resolve, reject) {\n      reader.onload = function() {\n        resolve(reader.result);\n      };\n      reader.onerror = function() {\n        reject(reader.error);\n      };\n    })\n  }\n\n  function readBlobAsArrayBuffer(blob) {\n    var reader = new FileReader();\n    var promise = fileReaderReady(reader);\n    reader.readAsArrayBuffer(blob);\n    return promise\n  }\n\n  function readBlobAsText(blob) {\n    var reader = new FileReader();\n    var promise = fileReaderReady(reader);\n    reader.readAsText(blob);\n    return promise\n  }\n\n  function readArrayBufferAsText(buf) {\n    var view = new Uint8Array(buf);\n    var chars = new Array(view.length);\n\n    for (var i = 0; i < view.length; i++) {\n      chars[i] = String.fromCharCode(view[i]);\n    }\n    return chars.join('')\n  }\n\n  function bufferClone(buf) {\n    if (buf.slice) {\n      return buf.slice(0)\n    } else {\n      var view = new Uint8Array(buf.byteLength);\n      view.set(new Uint8Array(buf));\n      return view.buffer\n    }\n  }\n\n  function Body() {\n    this.bodyUsed = false;\n\n    this._initBody = function(body) {\n      this._bodyInit = body;\n      if (!body) {\n        this._bodyText = '';\n      } else if (typeof body === 'string') {\n        this._bodyText = body;\n      } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n        this._bodyBlob = body;\n      } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n        this._bodyFormData = body;\n      } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n        this._bodyText = body.toString();\n      } else if (support.arrayBuffer && support.blob && isDataView(body)) {\n        this._bodyArrayBuffer = bufferClone(body.buffer);\n        // IE 10-11 can't handle a DataView body.\n        this._bodyInit = new Blob([this._bodyArrayBuffer]);\n      } else if (support.arrayBuffer && (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body))) {\n        this._bodyArrayBuffer = bufferClone(body);\n      } else {\n        this._bodyText = body = Object.prototype.toString.call(body);\n      }\n\n      if (!this.headers.get('content-type')) {\n        if (typeof body === 'string') {\n          this.headers.set('content-type', 'text/plain;charset=UTF-8');\n        } else if (this._bodyBlob && this._bodyBlob.type) {\n          this.headers.set('content-type', this._bodyBlob.type);\n        } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n          this.headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8');\n        }\n      }\n    };\n\n    if (support.blob) {\n      this.blob = function() {\n        var rejected = consumed(this);\n        if (rejected) {\n          return rejected\n        }\n\n        if (this._bodyBlob) {\n          return Promise.resolve(this._bodyBlob)\n        } else if (this._bodyArrayBuffer) {\n          return Promise.resolve(new Blob([this._bodyArrayBuffer]))\n        } else if (this._bodyFormData) {\n          throw new Error('could not read FormData body as blob')\n        } else {\n          return Promise.resolve(new Blob([this._bodyText]))\n        }\n      };\n\n      this.arrayBuffer = function() {\n        if (this._bodyArrayBuffer) {\n          return consumed(this) || Promise.resolve(this._bodyArrayBuffer)\n        } else {\n          return this.blob().then(readBlobAsArrayBuffer)\n        }\n      };\n    }\n\n    this.text = function() {\n      var rejected = consumed(this);\n      if (rejected) {\n        return rejected\n      }\n\n      if (this._bodyBlob) {\n        return readBlobAsText(this._bodyBlob)\n      } else if (this._bodyArrayBuffer) {\n        return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer))\n      } else if (this._bodyFormData) {\n        throw new Error('could not read FormData body as text')\n      } else {\n        return Promise.resolve(this._bodyText)\n      }\n    };\n\n    if (support.formData) {\n      this.formData = function() {\n        return this.text().then(decode)\n      };\n    }\n\n    this.json = function() {\n      return this.text().then(JSON.parse)\n    };\n\n    return this\n  }\n\n  // HTTP methods whose capitalization should be normalized\n  var methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT'];\n\n  function normalizeMethod(method) {\n    var upcased = method.toUpperCase();\n    return methods.indexOf(upcased) > -1 ? upcased : method\n  }\n\n  function Request(input, options) {\n    options = options || {};\n    var body = options.body;\n\n    if (input instanceof Request) {\n      if (input.bodyUsed) {\n        throw new TypeError('Already read')\n      }\n      this.url = input.url;\n      this.credentials = input.credentials;\n      if (!options.headers) {\n        this.headers = new Headers(input.headers);\n      }\n      this.method = input.method;\n      this.mode = input.mode;\n      this.signal = input.signal;\n      if (!body && input._bodyInit != null) {\n        body = input._bodyInit;\n        input.bodyUsed = true;\n      }\n    } else {\n      this.url = String(input);\n    }\n\n    this.credentials = options.credentials || this.credentials || 'same-origin';\n    if (options.headers || !this.headers) {\n      this.headers = new Headers(options.headers);\n    }\n    this.method = normalizeMethod(options.method || this.method || 'GET');\n    this.mode = options.mode || this.mode || null;\n    this.signal = options.signal || this.signal;\n    this.referrer = null;\n\n    if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n      throw new TypeError('Body not allowed for GET or HEAD requests')\n    }\n    this._initBody(body);\n  }\n\n  Request.prototype.clone = function() {\n    return new Request(this, {body: this._bodyInit})\n  };\n\n  function decode(body) {\n    var form = new FormData();\n    body\n      .trim()\n      .split('&')\n      .forEach(function(bytes) {\n        if (bytes) {\n          var split = bytes.split('=');\n          var name = split.shift().replace(/\\+/g, ' ');\n          var value = split.join('=').replace(/\\+/g, ' ');\n          form.append(decodeURIComponent(name), decodeURIComponent(value));\n        }\n      });\n    return form\n  }\n\n  function parseHeaders(rawHeaders) {\n    var headers = new Headers();\n    // Replace instances of \\r\\n and \\n followed by at least one space or horizontal tab with a space\n    // https://tools.ietf.org/html/rfc7230#section-3.2\n    var preProcessedHeaders = rawHeaders.replace(/\\r?\\n[\\t ]+/g, ' ');\n    preProcessedHeaders.split(/\\r?\\n/).forEach(function(line) {\n      var parts = line.split(':');\n      var key = parts.shift().trim();\n      if (key) {\n        var value = parts.join(':').trim();\n        headers.append(key, value);\n      }\n    });\n    return headers\n  }\n\n  Body.call(Request.prototype);\n\n  function Response(bodyInit, options) {\n    if (!options) {\n      options = {};\n    }\n\n    this.type = 'default';\n    this.status = options.status === undefined ? 200 : options.status;\n    this.ok = this.status >= 200 && this.status < 300;\n    this.statusText = 'statusText' in options ? options.statusText : 'OK';\n    this.headers = new Headers(options.headers);\n    this.url = options.url || '';\n    this._initBody(bodyInit);\n  }\n\n  Body.call(Response.prototype);\n\n  Response.prototype.clone = function() {\n    return new Response(this._bodyInit, {\n      status: this.status,\n      statusText: this.statusText,\n      headers: new Headers(this.headers),\n      url: this.url\n    })\n  };\n\n  Response.error = function() {\n    var response = new Response(null, {status: 0, statusText: ''});\n    response.type = 'error';\n    return response\n  };\n\n  var redirectStatuses = [301, 302, 303, 307, 308];\n\n  Response.redirect = function(url, status) {\n    if (redirectStatuses.indexOf(status) === -1) {\n      throw new RangeError('Invalid status code')\n    }\n\n    return new Response(null, {status: status, headers: {location: url}})\n  };\n\n  exports.DOMException = self.DOMException;\n  try {\n    new exports.DOMException();\n  } catch (err) {\n    exports.DOMException = function(message, name) {\n      this.message = message;\n      this.name = name;\n      var error = Error(message);\n      this.stack = error.stack;\n    };\n    exports.DOMException.prototype = Object.create(Error.prototype);\n    exports.DOMException.prototype.constructor = exports.DOMException;\n  }\n\n  function fetch(input, init) {\n    return new Promise(function(resolve, reject) {\n      var request = new Request(input, init);\n\n      if (request.signal && request.signal.aborted) {\n        return reject(new exports.DOMException('Aborted', 'AbortError'))\n      }\n\n      var xhr = new XMLHttpRequest();\n\n      function abortXhr() {\n        xhr.abort();\n      }\n\n      xhr.onload = function() {\n        var options = {\n          status: xhr.status,\n          statusText: xhr.statusText,\n          headers: parseHeaders(xhr.getAllResponseHeaders() || '')\n        };\n        options.url = 'responseURL' in xhr ? xhr.responseURL : options.headers.get('X-Request-URL');\n        var body = 'response' in xhr ? xhr.response : xhr.responseText;\n        resolve(new Response(body, options));\n      };\n\n      xhr.onerror = function() {\n        reject(new TypeError('Network request failed'));\n      };\n\n      xhr.ontimeout = function() {\n        reject(new TypeError('Network request failed'));\n      };\n\n      xhr.onabort = function() {\n        reject(new exports.DOMException('Aborted', 'AbortError'));\n      };\n\n      xhr.open(request.method, request.url, true);\n\n      if (request.credentials === 'include') {\n        xhr.withCredentials = true;\n      } else if (request.credentials === 'omit') {\n        xhr.withCredentials = false;\n      }\n\n      if ('responseType' in xhr && support.blob) {\n        xhr.responseType = 'blob';\n      }\n\n      request.headers.forEach(function(value, name) {\n        xhr.setRequestHeader(name, value);\n      });\n\n      if (request.signal) {\n        request.signal.addEventListener('abort', abortXhr);\n\n        xhr.onreadystatechange = function() {\n          // DONE (success or failure)\n          if (xhr.readyState === 4) {\n            request.signal.removeEventListener('abort', abortXhr);\n          }\n        };\n      }\n\n      xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit);\n    })\n  }\n\n  fetch.polyfill = true;\n\n  if (!self.fetch) {\n    self.fetch = fetch;\n    self.Headers = Headers;\n    self.Request = Request;\n    self.Response = Response;\n  }\n\n  exports.Headers = Headers;\n  exports.Request = Request;\n  exports.Response = Response;\n  exports.fetch = fetch;\n\n  return exports;\n\n}({}));\n})(__self__);\ndelete __self__.fetch.polyfill\nexports = __self__.fetch // To enable: import fetch from 'cross-fetch'\nexports.default = __self__.fetch // For TypeScript consumers without esModuleInterop.\nexports.fetch = __self__.fetch // To enable: import {fetch} from 'cross-fetch'\nexports.Headers = __self__.Headers\nexports.Request = __self__.Request\nexports.Response = __self__.Response\nmodule.exports = exports\n","/*!\n * Copyright (c) 2015-present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n *\n */\nexport { default as OktaAuth } from './browser';\nexport * from '../constants';\nexport * from '../types';\nexport * from '../tx';\nexport * from '../errors';\nexport * from '../TokenManager';\n","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunctionPrototype[toStringTagSymbol] =\n    GeneratorFunction.displayName = \"GeneratorFunction\";\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      prototype[method] = function(arg) {\n        return this._invoke(method, arg);\n      };\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      if (!(toStringTagSymbol in genFun)) {\n        genFun[toStringTagSymbol] = \"GeneratorFunction\";\n      }\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return PromiseImpl.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return PromiseImpl.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    if (PromiseImpl === void 0) PromiseImpl = Promise;\n\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList),\n      PromiseImpl\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  Gp[toStringTagSymbol] = \"Generator\";\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n}\n","function _isNativeFunction(fn) {\n  return Function.toString.call(fn).indexOf(\"[native code]\") !== -1;\n}\n\nmodule.exports = _isNativeFunction;","var setPrototypeOf = require(\"./setPrototypeOf\");\n\nvar isNativeReflectConstruct = require(\"./isNativeReflectConstruct\");\n\nfunction _construct(Parent, args, Class) {\n  if (isNativeReflectConstruct()) {\n    module.exports = _construct = Reflect.construct;\n  } else {\n    module.exports = _construct = function _construct(Parent, args, Class) {\n      var a = [null];\n      a.push.apply(a, args);\n      var Constructor = Function.bind.apply(Parent, a);\n      var instance = new Constructor();\n      if (Class) setPrototypeOf(instance, Class.prototype);\n      return instance;\n    };\n  }\n\n  return _construct.apply(null, arguments);\n}\n\nmodule.exports = _construct;","function _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nmodule.exports = _isNativeReflectConstruct;","/*!\n * JavaScript Cookie v2.2.0\n * https://github.com/js-cookie/js-cookie\n *\n * Copyright 2006, 2015 Klaus Hartl & Fagner Brack\n * Released under the MIT license\n */\n;(function (factory) {\n\tvar registeredInModuleLoader = false;\n\tif (typeof define === 'function' && define.amd) {\n\t\tdefine(factory);\n\t\tregisteredInModuleLoader = true;\n\t}\n\tif (typeof exports === 'object') {\n\t\tmodule.exports = factory();\n\t\tregisteredInModuleLoader = true;\n\t}\n\tif (!registeredInModuleLoader) {\n\t\tvar OldCookies = window.Cookies;\n\t\tvar api = window.Cookies = factory();\n\t\tapi.noConflict = function () {\n\t\t\twindow.Cookies = OldCookies;\n\t\t\treturn api;\n\t\t};\n\t}\n}(function () {\n\tfunction extend () {\n\t\tvar i = 0;\n\t\tvar result = {};\n\t\tfor (; i < arguments.length; i++) {\n\t\t\tvar attributes = arguments[ i ];\n\t\t\tfor (var key in attributes) {\n\t\t\t\tresult[key] = attributes[key];\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\tfunction init (converter) {\n\t\tfunction api (key, value, attributes) {\n\t\t\tvar result;\n\t\t\tif (typeof document === 'undefined') {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Write\n\n\t\t\tif (arguments.length > 1) {\n\t\t\t\tattributes = extend({\n\t\t\t\t\tpath: '/'\n\t\t\t\t}, api.defaults, attributes);\n\n\t\t\t\tif (typeof attributes.expires === 'number') {\n\t\t\t\t\tvar expires = new Date();\n\t\t\t\t\texpires.setMilliseconds(expires.getMilliseconds() + attributes.expires * 864e+5);\n\t\t\t\t\tattributes.expires = expires;\n\t\t\t\t}\n\n\t\t\t\t// We're using \"expires\" because \"max-age\" is not supported by IE\n\t\t\t\tattributes.expires = attributes.expires ? attributes.expires.toUTCString() : '';\n\n\t\t\t\ttry {\n\t\t\t\t\tresult = JSON.stringify(value);\n\t\t\t\t\tif (/^[\\{\\[]/.test(result)) {\n\t\t\t\t\t\tvalue = result;\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {}\n\n\t\t\t\tif (!converter.write) {\n\t\t\t\t\tvalue = encodeURIComponent(String(value))\n\t\t\t\t\t\t.replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g, decodeURIComponent);\n\t\t\t\t} else {\n\t\t\t\t\tvalue = converter.write(value, key);\n\t\t\t\t}\n\n\t\t\t\tkey = encodeURIComponent(String(key));\n\t\t\t\tkey = key.replace(/%(23|24|26|2B|5E|60|7C)/g, decodeURIComponent);\n\t\t\t\tkey = key.replace(/[\\(\\)]/g, escape);\n\n\t\t\t\tvar stringifiedAttributes = '';\n\n\t\t\t\tfor (var attributeName in attributes) {\n\t\t\t\t\tif (!attributes[attributeName]) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tstringifiedAttributes += '; ' + attributeName;\n\t\t\t\t\tif (attributes[attributeName] === true) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tstringifiedAttributes += '=' + attributes[attributeName];\n\t\t\t\t}\n\t\t\t\treturn (document.cookie = key + '=' + value + stringifiedAttributes);\n\t\t\t}\n\n\t\t\t// Read\n\n\t\t\tif (!key) {\n\t\t\t\tresult = {};\n\t\t\t}\n\n\t\t\t// To prevent the for loop in the first place assign an empty array\n\t\t\t// in case there are no cookies at all. Also prevents odd result when\n\t\t\t// calling \"get()\"\n\t\t\tvar cookies = document.cookie ? document.cookie.split('; ') : [];\n\t\t\tvar rdecode = /(%[0-9A-Z]{2})+/g;\n\t\t\tvar i = 0;\n\n\t\t\tfor (; i < cookies.length; i++) {\n\t\t\t\tvar parts = cookies[i].split('=');\n\t\t\t\tvar cookie = parts.slice(1).join('=');\n\n\t\t\t\tif (!this.json && cookie.charAt(0) === '\"') {\n\t\t\t\t\tcookie = cookie.slice(1, -1);\n\t\t\t\t}\n\n\t\t\t\ttry {\n\t\t\t\t\tvar name = parts[0].replace(rdecode, decodeURIComponent);\n\t\t\t\t\tcookie = converter.read ?\n\t\t\t\t\t\tconverter.read(cookie, name) : converter(cookie, name) ||\n\t\t\t\t\t\tcookie.replace(rdecode, decodeURIComponent);\n\n\t\t\t\t\tif (this.json) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tcookie = JSON.parse(cookie);\n\t\t\t\t\t\t} catch (e) {}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (key === name) {\n\t\t\t\t\t\tresult = cookie;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!key) {\n\t\t\t\t\t\tresult[name] = cookie;\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {}\n\t\t\t}\n\n\t\t\treturn result;\n\t\t}\n\n\t\tapi.set = api;\n\t\tapi.get = function (key) {\n\t\t\treturn api.call(api, key);\n\t\t};\n\t\tapi.getJSON = function () {\n\t\t\treturn api.apply({\n\t\t\t\tjson: true\n\t\t\t}, [].slice.call(arguments));\n\t\t};\n\t\tapi.defaults = {};\n\n\t\tapi.remove = function (key, attributes) {\n\t\t\tapi(key, '', extend(attributes, {\n\t\t\t\texpires: -1\n\t\t\t}));\n\t\t};\n\n\t\tapi.withConverter = init;\n\n\t\treturn api;\n\t}\n\n\treturn init(function () {});\n}));\n","function E () {\n  // Keep this empty so it's easier to inherit from\n  // (via https://github.com/lipsmack from https://github.com/scottcorgan/tiny-emitter/issues/3)\n}\n\nE.prototype = {\n  on: function (name, callback, ctx) {\n    var e = this.e || (this.e = {});\n\n    (e[name] || (e[name] = [])).push({\n      fn: callback,\n      ctx: ctx\n    });\n\n    return this;\n  },\n\n  once: function (name, callback, ctx) {\n    var self = this;\n    function listener () {\n      self.off(name, listener);\n      callback.apply(ctx, arguments);\n    };\n\n    listener._ = callback\n    return this.on(name, listener, ctx);\n  },\n\n  emit: function (name) {\n    var data = [].slice.call(arguments, 1);\n    var evtArr = ((this.e || (this.e = {}))[name] || []).slice();\n    var i = 0;\n    var len = evtArr.length;\n\n    for (i; i < len; i++) {\n      evtArr[i].fn.apply(evtArr[i].ctx, data);\n    }\n\n    return this;\n  },\n\n  off: function (name, callback) {\n    var e = this.e || (this.e = {});\n    var evts = e[name];\n    var liveEvents = [];\n\n    if (evts && callback) {\n      for (var i = 0, len = evts.length; i < len; i++) {\n        if (evts[i].fn !== callback && evts[i].fn._ !== callback)\n          liveEvents.push(evts[i]);\n      }\n    }\n\n    // Remove event from queue to prevent memory leak\n    // Suggested by https://github.com/lazd\n    // Ref: https://github.com/scottcorgan/tiny-emitter/commit/c6ebfaa9bc973b33d110a84a307742b7cf94c953#commitcomment-5024910\n\n    (liveEvents.length)\n      ? e[name] = liveEvents\n      : delete e[name];\n\n    return this;\n  }\n};\n\nmodule.exports = E;\n"],"sourceRoot":""}