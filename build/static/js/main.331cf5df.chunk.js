(this.webpackJsonpweatherapp=this.webpackJsonpweatherapp||[]).push([[0],{118:function(e,t,a){"use strict";var n=a(20),r=a(21),i=a(28),o=a(27),c=a(1),s=a.n(c),l=function(e){Object(i.a)(a,e);var t=Object(o.a)(a);function a(){var e;return Object(n.a)(this,a),(e=t.call(this)).state={time:new Date},e}return Object(r.a)(a,[{key:"loopTime",value:function(){this.setState({time:new Date})}},{key:"componentDidMount",value:function(){var e=this;setInterval((function(){return e.loopTime()}),1e3)}},{key:"render",value:function(){return s.a.createElement(s.a.Fragment,null,"VietNam, ",this.state.time.toLocaleDateString(),"-",this.state.time.toLocaleTimeString())}}]),a}(c.Component);t.a=l},125:function(e,t,a){},130:function(e,t,a){},161:function(e,t,a){e.exports=a.p+"static/media/imgWeather1.691f92b6.jpg"},162:function(e,t,a){e.exports=a.p+"static/media/imgWeather3.f2de9424.jpg"},165:function(e,t,a){e.exports=a.p+"static/media/dottedCircle.c96ca893.svg"},166:function(e,t,a){e.exports=a.p+"static/media/CompletedTick.ffcb10fd.svg"},167:function(e,t,a){e.exports=a.p+"static/media/DownloadIcon.e927ae19.svg"},170:function(e,t,a){e.exports=a.p+"static/media/moon.bfe0ee19.svg"},171:function(e,t,a){e.exports=a.p+"static/media/sun.f4e2a770.svg"},172:function(e,t,a){e.exports=a.p+"static/media/logo.8c523a54.svg"},173:function(e,t,a){e.exports=a.p+"static/media/login-img.20a90984.svg"},181:function(e,t,a){"use strict";a.r(t),a.d(t,"useSongMethods",(function(){return A}));var n,r=a(33),i=a(11),o=a.n(i),c=a(22),s=a(85),l=a(8),u=a(1),m=a.n(u),d=a(182),h=a(166),p=a.n(h),g=a(167),f=a.n(g),v=a(261),b=a(330),y=a(369),E=a(305),w=a(83),O=a(300),j=a(327),k=a(366),S=a(329),x=a(324),C=a(328),N=a(326),T=a(325),I=function(e){var t=e.isOpen,a=e.handleCancel,n=e.handleDelete,r=Object(u.useState)(!1),i=Object(l.a)(r,2),o=i[0],c=i[1];return m.a.useEffect((function(){console.log(o)}),[o]),m.a.createElement("div",null,m.a.createElement(x.a,{style:{zIndex:1500},open:t,onClose:a,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},m.a.createElement(T.a,{id:"alert-dialog-title"},"Delete this song from your device ?"),m.a.createElement(N.a,null,m.a.createElement(j.a,{control:m.a.createElement(k.a,{color:"primary",checked:o,onChange:function(e){return c(e.target.checked)},value:"checkBox"}),label:"Don't ask again"})),m.a.createElement(C.a,null,m.a.createElement(S.a,{onClick:a,color:"primary"},"Cancel"),m.a.createElement(S.a,{onClick:function(){return n(o)},color:"primary"},"Delete"))))},D=a(24),M=a(90),U=a(36),A=function(e){var t=Object(u.useContext)(D.a),a=Object(l.a)(t,2);Object(s.a)(a[0]);var r=a[1],i=m.a.useCallback((function(e){r({type:"setSnackbarMsg",snippet:e})}),[r]),d=Object(u.useState)(!1),h=Object(l.a)(d,2),p=h[0],g=h[1],f=Object(u.useState)(null),v=Object(l.a)(f,2),b=v[0],y=v[1];Object(u.useEffect)((function(){var e="true"===localStorage.getItem("dontAskPopup");y(e)}),[]);var E=function(){var e=Object(c.a)(o.a.mark((function e(t){var a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,M.a.get("/song",{params:{id:t}});case 2:return a=e.sent,e.next=5,Object(U.c)(t,a.data);case 5:n=e.sent,i("Song Downloaded"),console.log("song status",n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(c.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(U.b)(n);case 2:e.sent,g(!1),i("Deleted Successfully"),console.log(n,t),t&&(localStorage.setItem("dontAskPopup",!0),y(!0));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=b?null:m.a.createElement(I,{isOpen:p,handleCancel:function(){return g(!1)},handleDelete:w});return{handleDownload:E,handleRemoveSong:function(e){console.log("handle remove dude"),n=e,b?w():g(!0)},deleteTheSong:w,dontAskPopup:b,setDeleteDialogState:g,deleteDialogState:p,deleteDialogComponent:O}};t.default=function(e){var t=e.songs,a=Object(u.useContext)(D.a),n=Object(l.a)(a,2);Object(s.a)(n[0]);var i=n[1],o=Object(u.useState)(window.innerHeight),c=Object(l.a)(o,2),h=(c[0],c[1]),g=function(e){var t;t={id:e.videoId,audio:e.audio,thumbnail:e.thumbnail,title:e.title,channelTitle:e.channelTitle,maxThumbnail:"https://img.youtube.com/vi/".concat(e.videoId,"/maxresdefault.jpg"),sdThumbnail:"https://img.youtube.com/vi/".concat(e.videoId,"/sddefault.jpg")},i({type:"setCurrentVideoSnippet",snippet:t})},j=A(),k=j.handleDownload,S=j.handleRemoveSong,x=j.deleteDialogComponent,C=function(e){return"downloading"===e.downloadState?(console.log(e.downloadState),"downloading-animation"):""};Object(u.useEffect)((function(){h(window.innerHeight)}));var N=t.map((function(e,t){return m.a.createElement(m.a.Fragment,null,m.a.createElement(v.a,{alignItems:"flex-start",button:!0,onClick:function(){return g(e)}},m.a.createElement(b.a,null,m.a.createElement(y.a,{className:"searchThumb",style:{width:"60px",height:"60px",marginRight:"15px"},alt:e.title,src:"https://img.youtube.com/vi/".concat(e.videoId,"/default.jpg")})),m.a.createElement(E.a,{primary:e.title,secondary:m.a.createElement(m.a.Fragment,null,m.a.createElement(w.a,{component:"span",variant:"body2",color:"textPrimary"},e.channelTitle))})),m.a.createElement("div",{className:"download-container",onClick:function(){return e.audio?S(e.videoId):k(e.videoId)}},m.a.createElement("div",{className:"badge-container"},m.a.createElement("img",{className:C(e),src:e.audio?p.a:f.a,alt:"downloading icon"}))))})),T=m.a.forwardRef((function(e,t){return m.a.createElement("div",{ref:t,style:Object(r.a)(Object(r.a)({},e.style),{},{maxWidth:"1000px",left:"50%",transform:"translateX(-50%)"})},N[e.index],m.a.createElement(O.a,null))}));return m.a.createElement(m.a.Fragment,null,x,m.a.createElement(d.a,{height:window.innerHeight-100,itemCount:t.length,width:window.innerWidth},T))}},196:function(e,t,a){e.exports=a(259)},201:function(e,t,a){},230:function(e,t,a){},231:function(e,t,a){},232:function(e,t,a){},233:function(e,t,a){e.exports=a.p+"static/media/Logosvg3.fe8d21d4.svg"},24:function(e,t,a){"use strict";a.d(t,"a",(function(){return o})),a.d(t,"b",(function(){return l}));var n=a(33),r=a(1),i=a.n(r),o=i.a.createContext(),c={searchState:"home",searchResult:[],relatedVideos:[],menuOpen:!1,snackbarMsg:!1,currentVideoSnippet:{},themeSelectValue:"Default"},s=function(e,t){switch(t.type){case"setCurrentVideoSnippet":return Object(n.a)(Object(n.a)({},e),{},{currentVideoSnippet:t.snippet});case"setRelatedVideos":return Object(n.a)(Object(n.a)({},e),{},{relatedVideos:t.snippet});case"setSnackbarMsg":return Object(n.a)(Object(n.a)({},e),{},{snackbarMsg:t.snippet});case"setThemeSelectValue":return Object(n.a)(Object(n.a)({},e),{},{themeSelectValue:t.snippet});case"setSearchState":return Object(n.a)(Object(n.a)({},e),{},{searchState:t.snippet});case"setSearchResult":return Object(n.a)(Object(n.a)({},e),{},{searchResult:t.snippet});case"setMenuOpen":return Object(n.a)(Object(n.a)({},e),{},{menuOpen:t.snippet});default:return e}},l=function(e){var t=Object(r.useReducer)(s,c);return i.a.createElement(o.Provider,{value:t},e.children)}},256:function(e,t){},259:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),i=a(18),o=a.n(i),c=(a(201),a(20)),s=a(21),l=a(28),u=a(27),m=(a(130),a(125),a(35)),d=a(8),h=a(59),p=a(51),g=a(14),f=a(34),v=a(52),b=a(365),y=a(300);function E(){var e=Object(m.a)(["\n\th4 {\n\t\tmargin-bottom: 0;\n\t\tfont-weight: 400;\n\t}\n\timg {\n\t\twidth: 60px !important;\n\t\theight: 60px;\n\t\tborder-radius: 50%;\n\t\tobject-fit: cover;\n\t}\n\t.divider{\n\t\twidth: 100%;\n    \tmargin-bottom: 2rem;\n\t\tborder-top: .1rem solid  var(--clr-grey-5);\n\t}\n\t.btn-primary{\n\t\tmargin-top: 1rem;\n\t}\n\t"]);return E=function(){return e},e}var w=f.a.nav(E()),O=function(){var e=Object(v.b)(),t=e.isAuthenticated,a=e.loginWithRedirect,n=e.logout,i=e.user,o=(e.isLoading,Object(b.a)(["name"])),c=Object(d.a)(o,2),s=(c[0],t&&i);return(0,c[1])("name",{user:i},{path:"/"}),r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,null,r.a.createElement(p.a,{title:"Welcome to nDsApp",subtitle:"\r Interesting Experience Right Now"},r.a.createElement(w,null,r.a.createElement(y.a,{className:"divider"}),s&&i.picture&&r.a.createElement("img",{src:i.picture,alt:i.name}),s&&i.name&&r.a.createElement("h4",null,"Welcome, ",r.a.createElement("strong",null,i.nickname.toUpperCase())),s?r.a.createElement(g.b,{className:"btn-primary",onClick:function(){n({returnTo:window.location.origin})}},"logout"):r.a.createElement(g.b,{className:"btn-primary",onClick:a},"login")))))},j=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement(h.a,null,r.a.createElement(p.a,{title:"404",subtitle:"Page Not Found"},r.a.createElement(g.b,{to:"/home",className:"btn-primary"},"Return Home")))}}]),a}(n.Component),k=a(29),S=a(79),x=a.n(S),C=a(160),N=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={isOpen:!1},e.handleToggle=function(){e.setState({isOpen:!e.state.isOpen})},e}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("nav",{className:"navbar"},r.a.createElement("div",{className:"nav-center"},r.a.createElement("div",{className:"nav-header"},r.a.createElement(g.b,{to:"/"},r.a.createElement("img",{style:{maxHeight:"2.6rem",maxWidth:"2.6rem"},className:"logoApp",src:x.a,alt:"Beach Resort"})),r.a.createElement("button",{type:"button",className:"nav-btn",onClick:this.handleToggle},r.a.createElement(C.a,{className:"nav-icon"}))),r.a.createElement("ul",{className:this.state.isOpen?"nav-links show-nav":"nav-links"},r.a.createElement("li",null,r.a.createElement(g.b,{to:"/"},"Home")),r.a.createElement("li",null,r.a.createElement(g.b,{to:"/page1"},"Page1")),r.a.createElement("li",null,r.a.createElement(g.b,{to:"/page2"},"Page2")),r.a.createElement("li",null,r.a.createElement(g.b,{to:"/page3"},"Page3")))))}}]),a}(n.Component),T=a(11),I=a.n(T),D=a(22),M=a(41),U=a.n(M),A=function(e){return r.a.createElement(r.a.Fragment,null,e.children)},R=a(91),_=Object(n.createContext)();function z(){var e=Object(m.a)(["\n    display: grid;\n    grid-template-columns: repeat( minmax(260px, 1fr));\n    gap: 1rem 2rem;\n    @media (max-width: 640px) {\n    grid-template-columns: repeat( minmax(260px, 1fr));\n    /* .item{\n        \n        padding: 1rem 2rem 1rem 2rem;\n    } */\n    }\n.item {\n    border-radius: var(--radius);\n    padding: 1rem 4rem 1rem 4rem;\n    background: var(--clr-white);\n    display: grid;\n    position: relative;\n    grid-template-columns: auto 1fr;\n    column-gap: 1rem;\n    align-items: center;\n    span {\n        width: 3rem;\n        height: 3rem;\n        display: grid;\n        place-items: center;\n        border-radius: 50%;\n    }\n    .icon {\n        font-size: 1.5rem;\n    }\n    h4 {\n        color: rgba(0, 0, 0, 0.5);\n        margin-bottom: 0;\n        letter-spacing: 0;\n        text-transform: capitalize;\n    }\n    p {\n        color: rgba(0, 0, 0, 0.5);\n        margin-bottom: 0;\n        margin-top: 0rem;\n        /* text-transform: capitalize; */\n    }\n    .pink {\n        background: #ffe0f0;\n        color: #da4a91;\n    }\n    .green {\n        background: var(--clr-primary-10);\n        color: var(--clr-primary-5);\n    }\n    .purple {\n        background: #e6e6ff;\n        color: #5d55fa;\n    }\n    .yellow {\n        background: var(--clr-primary-9) ;\n        color: rgb(221, 141, 37);\n    }\n    }\n"]);return z=function(){return e},e}var P=function(e){var t=e.icon,a=e.label,n=e.value,i=e.color,o=e.unit;return r.a.createElement("article",{className:"item"},r.a.createElement("span",{className:i},t),r.a.createElement("p",null,n,o),r.a.createElement("h4",null,a))},F=f.a.section(z()),L=function(){var e=Object(n.useContext)(_),t=e.coording,a=e.city,i=e.wind,o=e.weathers,c=o.temp,s=o.humidity,l=o.pressure,u=t.lat,m=t.lon,d=i.speed,h=a.name,p=[{id:2,icon:r.a.createElement(R.d,{className:"icon"}),label:"temp",value:(c-273.15).toFixed(2),color:"pink",unit:"C"},{id:3,icon:r.a.createElement(R.c,{className:"icon"}),label:"humidity",value:s,color:"green",unit:"%"},{id:4,icon:r.a.createElement(R.a,{className:"icon"}),label:"pressure",value:l,color:"purple",unit:"hPa"},{id:1,icon:r.a.createElement(R.b,{className:"icon"}),label:"windspeed",value:d,color:"yellow",unit:"m/s"}];return r.a.createElement("section",{className:"section"},r.a.createElement("h4",null,"Weather forecast for ",r.a.createElement("span",{className:"weather-city"},h)),r.a.createElement("p",null,"Coordinates: ",r.a.createElement("span",{className:"coord-city"},u,",",m)),r.a.createElement(F,null,p.map((function(e){return r.a.createElement(P,Object.assign({key:e.id},e))}))))};function H(){var e=Object(m.a)(["\n    display: grid;\n    justify-content: center;\n    gap: 1rem 1.75rem;\n    @media (min-width: 768px) {\n      grid-template-columns: 1fr max-content;\n      align-items: center;\n      h3 {\n        padding: 0 0.5rem;\n      }\n    }\n    .form-control {\n      background: var(--clr-white);\n      display: grid;\n      align-items: center;\n      grid-template-columns: auto 1fr auto;\n      column-gap: 0.5rem;\n      border-radius: 5px;\n      padding: 0.5rem;\n      input {\n        border-color: transparent;\n        outline-color: var(--clr-white);\n        letter-spacing: var(--spacing);\n        color: var(--clr-grey-3);\n        padding: 0.75rem 1rem;\n        font-size: .75rem\n      }\n      input::placeholder {\n        color: var(--clr-grey-3);\n        text-transform: capitalize;\n        letter-spacing: var(--spacing);\n      }\n      button {\n        border-radius: 5px;\n        border-color: transparent;\n        padding: 0.5rem 0.75rem;\n        text-transform: capitalize;\n        letter-spacing: var(--spacing);\n        background: var(--clr-primary-5);\n        color: var(--clr-white);\n        transition: var(--transition);\n        cursor: pointer;\n        &:hover {\n          background: var(--clr-primary-8);\n          color: var(--clr-primary-1);\n        }\n      }\n    }\n  "]);return H=function(){return e},e}var V=f.a.div(H()),W=function(){var e=Object(n.useContext)(_).api_call;return r.a.createElement(V,null,r.a.createElement("form",{onSubmit:e,className:"form-control"},r.a.createElement("input",{name:"location",className:"form-control mr-sm-2",type:"search",placeholder:"Type City/Country","aria-label":"Search"}),r.a.createElement("button",{className:"btn btn-outline-success my-2 my-sm-0",type:"submit"},"Search")))},q=a(161),B=a.n(q),J=a(162),Y=a.n(J);function K(){var e=Object(m.a)(["\nmin-height: 82vh;\nbackground: url(",") center/cover no-repeat;\ndisplay: flex;\nalign-items: center;\njustify-content: center;\n"]);return K=function(){return e},e}var G=f.a.header(K(),(function(e){return e.img?Y.a:B.a})),X={name:"Ho Chi Minh City"},$={speed:3.6,deg:230},Q={lon:106.67,lat:10.75},Z={temp:300.15,feels_like:303.95,temp_min:300.15,temp_max:300.15,pressure:1009,humidity:88};a(118);function ee(){var e=Object(m.a)(["\n    min-height: 100vh;\n    display: grid;\n    width: 60vw;\n    place-items: center;\n    text-align: center;\n    /* .container {\n      width: 90vw;\n      max-width: 600px;\n      text-align: center;\n    } */\n  "]);return ee=function(){return e},e}var te=f.a.section(ee()),ae=function(){var e=Object(n.useState)(Z),t=Object(d.a)(e,2),a=t[0],i=t[1],o=Object(n.useState)(Q),c=Object(d.a)(o,2),s=c[0],l=c[1],u=Object(n.useState)($),m=Object(d.a)(u,2),h=m[0],g=m[1],f=Object(n.useState)(""),v=Object(d.a)(f,2),b=(v[0],v[1]),y=Object(n.useState)(X),E=Object(d.a)(y,2),w=E[0],O=E[1],j=function(){var e=Object(D.a)(I.a.mark((function e(t){var a,n,r,o;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a=t.target.elements.location.value,"cc8f77093d29a14ebde27ae45bf28497",n="https://api.openweathermap.org/data/2.5/weather?q=".concat(a,"&appid=").concat("cc8f77093d29a14ebde27ae45bf28497"),r=U.a.get(n),e.next=7,r;case 7:o=e.sent,l(o.data.coord),g(o.data.wind),i(o.data.main),O(o.data),o.data.main.temp,b("../images/defaultBcg.jpg");case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(G,null,r.a.createElement(te,null,r.a.createElement("div",{className:"container"},r.a.createElement(p.a,{title:"Weather App",subtitle:"Where you pass the mind?"},r.a.createElement(A,null,r.a.createElement(_.Provider,{value:{api_call:j,weathers:a,coording:s,wind:h,city:w}},r.a.createElement(W,{api_call:j}),a&&r.a.createElement(L,null)))))))},ne=function(){return r.a.createElement(ae,null)},re=a(24),ie=a(307),oe=a(308),ce=a(262),se=a(186),le=a(310),ue=a(309),me=a(86),de=a(163),he=a.n(de),pe=U.a.create({baseURL:"https://suggestqueries.google.com/complete/search?",adapter:he.a,params:{hl:"en",ds:"yt",client:"youtube"}}),ge=a(261),fe=a(303),ve=a(305),be=a(306),ye=a(304),Ee=function(e){var t=e.results,a=e.onSearchSelect,n=[];return t&&(n=t.map((function(e,t){return r.a.createElement(ge.a,{key:t,onClick:function(){return a(e[0])},button:!0},r.a.createElement(fe.a,{style:{paddingLeft:"16px"}},r.a.createElement(ye.a,null)),r.a.createElement(ve.a,{primary:e[0]}))}))),r.a.createElement(be.a,null,n)},we=Object(k.g)((function(e){var t=e.history,a=e.location,i=new URLSearchParams(a.search),o=Object(n.useContext)(re.a),c=Object(d.a)(o,2),s=c[0].searchState,l=c[1],u=Object(n.useCallback)((function(e){l({type:"setSearchState",snippet:e})}),[l]),m=Object(n.useCallback)((function(e){console.log(e),l({type:"setSearchResult",snippet:e})}),[l]),h=Object(n.useState)(""),p=Object(d.a)(h,2),g=p[0],f=p[1],v=Object(n.useState)(""),b=Object(d.a)(v,2),y=b[0],E=b[1],w=Object(n.useState)(null),O=Object(d.a)(w,2),j=O[0],k=O[1],S=Object(n.useState)(!0),x=Object(d.a)(S,2),C=x[0],N=x[1];console.log("search box re rendered");var T=function(e){f(e),k(e),u("searching"),t.push({pathname:"/search",search:"?q=".concat(e)})},M=function(){var e=Object(D.a)(I.a.mark((function e(){var t;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pe.get("/",{params:{q:g}});case 2:t=e.sent,E(t.data[0]);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){j&&""!==j&&function(){var e=Object(D.a)(I.a.mark((function e(t){var a;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,me.a.get("/search",{params:{q:t,maxResults:15}});case 2:a=e.sent,m(a.data.items),u("completed");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(j)}),[j,m,u]),Object(n.useEffect)((function(){console.log("search state",s)}),[s]),Object(n.useEffect)((function(){var e=i.get("q");e&&(k(e),f(e),u("searching"),console.log("changing query to",e))}),[u,k]);var U=function(){switch(s){case"searching":return r.a.createElement(ie.a,{style:{height:"100vh"},container:!0,justify:"center",alignItems:"center"},r.a.createElement(oe.a,null));case"clicked":return r.a.createElement(Ee,{results:y,onSearchSelect:T});case"completed":N(!1)}console.log("Function ran")};return r.a.createElement(r.a.Fragment,null,r.a.createElement(ce.a,{onClick:function(){u("home"),"/search"===t.location.pathname&&t.goBack()},color:"inherit","aria-label":"Menu"},r.a.createElement(ue.a,null)),r.a.createElement("form",{style:{width:"100%"},onSubmit:function(e){return function(e){e.preventDefault(),console.log(e.target.lastChild),e.target.lastChild.lastChild.blur(),u("completed"),k(g),t.push({pathname:"/search",search:"?q=".concat(g)})}(e)}},r.a.createElement(se.a,{fullWidth:!0,placeholder:"Search...",autoFocus:!0,style:{color:"#fff",paddingLeft:"16px"},value:g,onChange:function(e){f(e.target.value),M()},onClick:function(){u("clicked"),N(!0)}})),r.a.createElement(le.a,{className:"searchPopper",open:C,anchorEl:document.getElementById("navbar"),popperOptions:{modifiers:{preventOverflow:{padding:0}}},placement:"bottom"},U))})),Oe=a(312),je=a(83),ke=a(314),Se=a(315),xe=a(311),Ce=a(313),Ne={root:{flexGrow:1},title:{textAlign:"center",width:"calc(100% - 96px)"},input:{color:"#fff"}};function Te(e){var t=e.children,a=Object(xe.a)();return r.a.createElement(Oe.a,{appear:!1,direction:"down",in:!a},t)}var Ie=Object(k.g)((function(e){var t=Object(n.useContext)(re.a),a=Object(d.a)(t,2),i=a[0].searchState,o=a[1],c=r.a.useCallback((function(e){console.log(e),o({type:"setSearchState",snippet:e})}),[o]);return r.a.useEffect((function(){var t=function(){var t=e.history.location.pathname;c("/search"===t?"searching":"home"),console.log("history change detected in app bar")};t();e.history.listen((function(e){t()}))}),[c,e.history]),r.a.createElement(r.a.Fragment,null,r.a.createElement(Te,e,r.a.createElement(ke.a,{id:"navbar",position:"sticky"},r.a.createElement(Se.a,null,"home"===i?r.a.createElement(r.a.Fragment,null,r.a.createElement(ce.a,{color:"inherit","aria-label":"Menu",onClick:function(){return e=!0,console.log(e),void o({type:"setMenuOpen",snippet:e});var e}},r.a.createElement(Ce.a,null)),r.a.createElement(je.a,{variant:"h6",color:"inherit",style:Ne.title},"nDs Music"),r.a.createElement(ce.a,{onClick:function(){return c("clicked")},color:"inherit","aria-label":"Search"},r.a.createElement(ye.a,null))):r.a.createElement(we,null)))))})),De=a(89),Me=a(316),Ue=a(317),Ae=a(318),Re=a(319),_e=function(e){var t=e.player,a=e.audioState,n=e.minimized;return r.a.createElement(ce.a,{size:"small",color:n?"secondary":"primary","aria-label":"Pause",onClick:function(e){"playing"===a?t.pause():"paused"===a&&t.play(),e.stopPropagation()},disableFocusRipple:!0,disableRipple:!0},"playing"===a?n?r.a.createElement(Me.a,{style:{fontSize:"3em",opacity:".8"}}):r.a.createElement(Ue.a,{style:{fontSize:"4em"},color:"primary"}):"paused"===a||"loaded"===a?n?r.a.createElement(Ae.a,{style:{fontSize:"3em",opacity:".8"}}):r.a.createElement(Re.a,{style:{fontSize:"4em"},color:"primary"}):"loading"===a?r.a.createElement(oe.a,null):void 0)},ze=a(320),Pe=function(e){var t=e.onPlayNext;return r.a.createElement(ce.a,{color:"primary","aria-label":"Next",onClick:t},r.a.createElement(ze.a,{fontSize:"large"}))},Fe=a(321),Le=function(e){var t=e.playPrevious;return r.a.createElement(ce.a,{color:"primary","aria-label":"Pause",onClick:t},r.a.createElement(Fe.a,{fontSize:"large"}))},He=a(63),Ve=a(369),We=a(322),qe=a(165),Be=a.n(qe),Je=a(36),Ye={time:0,target:null};var Ke,Ge=function(e){var t=e.data,a=e.rating,i=e.audioEl,o=Object(De.a)({onSwipedUp:function(e){f()}}),c=Object(n.useState)({transform:"scale(0)"}),s=Object(d.a)(c,2),l=s[0],u=s[1],m=Object(n.useState)({background:"url(".concat(Be.a,") no-repeat"),padding:"18px",position:"relative",transition:"transform 100ms",transform:"translateY(0)"}),h=Object(d.a)(m,2),p=h[0],g=(h[1],Object(n.useCallback)((function(){u({transform:"scale(0)"}),setTimeout((function(){u({transform:"scale(1)"})}),300)}),[u])),f=Object(n.useCallback)((function(){Object(Je.g)(t.id,"disliked"),u({transform:"scale(0)"}),setTimeout((function(){u({transform:"scale(1)",color:"#2d3436"})}),200)}),[u,t.id]);r.a.useEffect((function(){"liked"===a?g():"disliked"===a?f():u({transform:"scale(1)"})}),[a,g,f,u]);return r.a.createElement(ie.a,{container:!0,direction:"column",justify:"center",alignItems:"center",style:{marginTop:"40px"},onClick:function(e){(function(e){var t={time:(new Date).getTime(),target:e.currentTarget},a=t.target===Ye.target&&t.time-Ye.time<300;return Ye=t,a})(e)&&(g(),Object(Je.g)(t.id,"liked",i))}},r.a.createElement(He.b.div,Object.assign({className:"box",drag:!0,dragElastic:!0,dragTransition:{bounceStiffness:100,bounceDamping:10},dragConstraints:{left:0,right:0,top:0,bottom:0},style:p},o),r.a.createElement(We.a,{className:"songHeart left",style:l}),r.a.createElement(We.a,{className:"songHeart right",style:l}),r.a.createElement(Ve.a,{className:"searchThumb",style:{width:"215px",height:"215px",boxShadow:"#0000008c 1px 3px 8px"},alt:"video thumbnail",src:t.thumbnail?window.URL.createObjectURL(t.thumbnail):t.maxThumbnail,imgProps:{onLoad:function(e){return function(e){e.target.naturalWidth<400&&(e.target.src=t.sdThumbnail)}(e)}}})),r.a.createElement("br",null),r.a.createElement(je.a,{variant:"h5",className:"musicArtTitle",align:"center"},function(e){var t=new RegExp(e.channelTitle+" - | : ","g");return e.title.replace(t,"")}(t)),r.a.createElement("h5",{className:"musicChannel"},t.channelTitle),r.a.createElement("br",null))},Xe=a(7),$e=a(370),Qe=Object(Xe.a)({root:{height:6,color:"rgb(27, 154, 238)",textAlign:"center"},thumb:{color:"rgb(27, 154, 238)",height:16,width:16,marginTop:-5.3,marginLeft:-8,"&::before":{content:"''",height:"inherit",width:"inherit",position:"absolute",transform:"scale(1.6)",borderRadius:"50px",border:"1px solid"}},track:{height:6,borderRadius:4},rail:{height:6,borderRadius:4}})($e.a),Ze=Object(Xe.a)({root:{height:5,position:"relative",bottom:"16px",color:"#ffff",padding:0},thumb:{display:"none"},track:{height:4,borderRadius:0},rail:{height:4,borderRadius:0}})($e.a),et=function(e){var t=Math.floor(e/60),a=Math.ceil(e-60*t);return a<10&&(a="0".concat(a)),"".concat(t,":").concat(a)},tt=function(e){var t=e.audioState,a=e.player,i=e.minimized,o=Object(n.useState)(50),c=Object(d.a)(o,2),s=(c[0],c[1],Object(n.useState)(0)),l=Object(d.a)(s,2),u=l[0],m=l[1];Object(n.useEffect)((function(){var e;return a&&m(a.currentTime),"playing"===t?e=setInterval((function(){m(a.currentTime),console.log()}),800):clearInterval(e),function(){return clearInterval(e)}}),[t,a]);return i?r.a.createElement(Ze,{value:u,max:a?a.duration:0}):r.a.createElement("div",{style:{margin:"0 auto",width:"90%"}},r.a.createElement(ie.a,{container:!0,direction:"row",justify:"space-between"},r.a.createElement(je.a,{variant:"body1",className:"timeright"},et(u)),r.a.createElement(je.a,{variant:"body1",className:"timeright"},a?a.duration?et(a.duration):"0:00":0)),r.a.createElement(Qe,{value:u,onChange:function(e,t){a.currentTime=t,m(t)},max:a?a.duration:0}))},at=a(334),nt=a(335),rt=a(336),it=a(337),ot=a(338),ct=a(323),st=function(e){var t=e.player,a=(e.setPlayerState,Object(n.useState)(100)),i=Object(d.a)(a,2),o=i[0],c=i[1];return r.a.createElement(ie.a,{container:!0,spacing:1,style:{maxWidth:"200px",color:"rgb(27, 154, 238)"}},r.a.createElement(ie.a,{item:!0},r.a.createElement(ct.a,{style:{color:"rgb(27, 154, 238)"}})),r.a.createElement(ie.a,{item:!0,xs:3},r.a.createElement($e.a,{style:{color:"rgb(27, 154, 238)"},value:o,onChange:function(e,a){c(a),t.volume=a/100}})))},lt=a(181),ut=a(324),mt=a(328),dt=a(327),ht=a(333),pt=a(329),gt=a(331),ft=a(332),vt=a(168);a(230);var bt,yt,Et=function(e){var t=e.player,a=Object(n.useState)(20),i=Object(d.a)(a,2),o=i[0],c=i[1],s=Object(n.useState)(!1),l=Object(d.a)(s,2),u=l[0],m=l[1],h=Object(n.useState)(!1),p=Object(d.a)(h,2),g=p[0],f=p[1],v=Object(n.useState)(!1),b=Object(d.a)(v,2),y=b[0],E=b[1],w=function(e){console.log("timer has been set with time",e),clearTimeout(Ke),E(!0),Ke=setTimeout((function(){t.pause()}),60*e*1e3)};return Object(n.useEffect)((function(){var e=function(){var e=localStorage.getItem("sleepTimerSettings");return JSON.parse(e)}();e&&(c(e.time),f(e.alwaysOn)),e&&e.alwaysOn&&(console.log(e),w(e.time)),console.log(e)}),[]),r.a.createElement(r.a.Fragment,null,y?r.a.createElement(gt.a,{color:"primary",onClick:function(){return m(!0)}}):r.a.createElement(ft.a,{color:"primary",onClick:function(){return m(!0)}}),r.a.createElement(ut.a,{style:{zIndex:1400},open:u,onClose:function(){return m(!1)},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(je.a,{variant:"h5",color:"primary",align:"center",style:{marginTop:"10px"}},"Pause Music After"),r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"textContainer"},o,r.a.createElement("div",{className:"minute"},"MINUTES")),r.a.createElement(vt.CircleSlider,{value:o,stepSize:5,onChange:function(e){return c(e)},size:300,max:120,gradientColorFrom:"#ec008c",gradientColorTo:"#fc6767",knobRadius:25,progressWidth:30,circleWidth:30})),r.a.createElement(mt.a,null,r.a.createElement(dt.a,{value:"Always On",control:r.a.createElement(ht.a,{checked:g,onChange:function(e){return f(e.target.checked)},value:"checked always on",color:"primary"}),label:"ALWAYS",labelPlacement:"end",style:{color:"#e91e63"}}),r.a.createElement(pt.a,{color:"primary",onClick:function(){localStorage.removeItem("sleepTimerSettings"),E(!1),m(!1)}},"Remove"),r.a.createElement(pt.a,{color:"primary",onClick:function(){!function(e,t){var a=JSON.stringify({time:e,alwaysOn:t});localStorage.setItem("sleepTimerSettings",a)}(o,g),m(!1),w(o)}},"Set"))))},wt=Object(Xe.a)({root:{height:2,width:"70%",margin:"0 auto",transform:"translateY(-10px)"}})(at.a),Ot=function(e){var t=e.song,a=e.player,i=e.setPlayerState,o=(e.history,Object(n.useContext)(re.a).snackbarMsg),c=Object(n.useState)(!1),s=Object(d.a)(c,2),l=s[0],u=s[1],m=Object(n.useState)(!1),h=Object(d.a)(m,2),p=h[0],g=h[1],f=Object(lt.useSongMethods)(),v=f.handleDownload,b=f.handleRemoveSong,y=f.deleteDialogComponent;Object(n.useEffect)((function(){("Song Downloaded"===o||t.audio)&&(u(!0),g(!1))}),[o]);return r.a.createElement(ie.a,{container:!0,justify:"space-between",direction:"row",style:{padding:" 0 10px",marginTop:"10px",position:"absolute",top:"0"}},r.a.createElement(st,{player:a}),y,r.a.createElement(nt.a,{style:{transform:" scaleX(-1) translateY(-2px)"},onClick:function(){navigator.share&&navigator.share({title:"Share This Song",text:"Hey Listen to ".concat(t.title," on nDs Music"),url:window.location.href}).then((function(){return console.log("Successful share")})).catch((function(e){return console.log("Error sharing",e)}))},color:"primary"}),r.a.createElement(Et,{player:a}),r.a.createElement("div",null,l?r.a.createElement(rt.a,{color:"primary",onClick:function(){return b(t.id)}}):r.a.createElement(r.a.Fragment,null,r.a.createElement(it.a,{color:"primary",onClick:function(){v(t.id),g(!0)}})),p?r.a.createElement(wt,{color:"primary"}):null),r.a.createElement(ot.a,{onClick:function(){i("minimized")},color:"primary",fontSize:"large",style:{transform:"translateY(-7px)"}}))},jt=a(339),kt=(a(231),function(e){var t=e.playPause,a=e.data,n=e.playNext,i=e.emptyPlayer;return r.a.createElement("div",{className:"mainContainer"},r.a.createElement("div",{className:"overflow-hidden"},r.a.createElement("div",{className:"details"},r.a.createElement(je.a,{variant:"body1"},a.title),r.a.createElement(je.a,{variant:"body2"},a.channelTitle)),r.a.createElement("div",{className:"buttons"},r.a.createElement(ze.a,{onClick:n}),r.a.createElement(jt.a,{onClick:i})),r.a.createElement("div",{className:"miniArtContainer"},r.a.createElement("div",{className:"mainArt"},r.a.createElement("img",{className:"miniArtImg",src:a.thumbnail?window.URL.createObjectURL(a.thumbnail):a.sdThumbnail,alt:"music art"}),r.a.createElement(_e,{player:t.player,minimized:t.minimized,audioState:t.audioState})))))}),St=a(85),xt=a(106),Ct=a(110),Nt=a(169),Tt=a(340),It=a(341),Dt=a(342),Mt=function(e){var t=e.toggleMaxPlaylist,a=e.setPlaylist,i=e.playerState,o=e.relatedVideos,c=e.setRelatedVideos,s=e.setIsRepeatOn,l=e.isRepeatOn,u=Object(n.useContext)(re.a),m=Object(d.a)(u,2);Object(St.a)(m[0]);var h=m[1],p={type:"spring",damping:20,stiffness:300},f=function(e){var t;t={id:e.id.videoId,title:e.snippet.title,channelTitle:e.snippet.channelTitle,maxThumbnail:"https://img.youtube.com/vi/".concat(e.id.videoId,"/maxresdefault.jpg"),sdThumbnail:"https://img.youtube.com/vi/".concat(e.id.videoId,"/sddefault.jpg")},h({type:"setCurrentVideoSnippet",snippet:t}),a()};if(!(o.length>1))return r.a.createElement(at.a,null);bt=o.map((function(e){return r.a.createElement(He.b.li,{key:e.id.videoId,positionTransition:p},r.a.createElement(ge.a,{button:!0,onClick:function(){return f(e)}},r.a.createElement(fe.a,null,r.a.createElement(Tt.a,{style:{color:"#fff"}})),r.a.createElement(ve.a,{primary:e.snippet.title.slice(0,40),secondary:e.snippet.channelTitle.slice(0,40)})))}));return r.a.createElement("div",{className:"RelatedVideoContainer"},r.a.createElement(ie.a,{className:"playlistHeader",container:!0,direction:"row",alignItems:"center",justify:"space-between"},r.a.createElement(g.b,{to:"/page1/home"},r.a.createElement(Ct.a,{className:"cssIcons"})),r.a.createElement(je.a,{variant:"h6"},"nDs Coming"),r.a.createElement(Nt.a,{className:"cssIcons",onClick:function(){var e;c((e=o).reduce((function(e,t,a){var n=Math.floor(Math.random()*e.length),r=e[a];return e[a]=e[n],e[n]=r,e}),Object(xt.a)(e)))}}),l?r.a.createElement(Ct.c,{className:"cssIcons",onClick:s}):r.a.createElement(Ct.b,{className:"cssIcons",onClick:s}),"playlist"===i?r.a.createElement(It.a,{onClick:t}):r.a.createElement(Dt.a,{onClick:t})),r.a.createElement(be.a,{dense:!0},bt))},Ut=a(90),At=localStorage.getItem("country_code");At||function(){var e=Object(D.a)(I.a.mark((function e(){var t;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U.a.get("https://ipapi.co/json/",{mode:"no-cors"});case 2:t=e.sent,localStorage.setItem("country_code",t.data.country);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()();var Rt,_t=function(e){var t=e.location,a=e.history,i=new URLSearchParams(t.search),o=Object(n.useContext)(re.a),c=Object(d.a)(o,2),s=c[0],l=s.currentVideoSnippet,u=s.themeSelectValue,m=c[1],h=function(e){m({type:"setCurrentVideoSnippet",snippet:e})},p=Object(n.useState)([]),g=Object(d.a)(p,2),f=g[0],v=g[1],b=Object(n.useState)(!1),y=Object(d.a)(b,2),E=y[0],w=y[1],O=Object(n.useState)(null),j=Object(d.a)(O,2),k=j[0],S=j[1],x=Object(n.useState)(null),C=Object(d.a)(x,2),N=C[0],T=C[1],M=Object(n.useState)(!0),U=Object(d.a)(M,2),A=U[0],R=U[1],_=Object(n.useState)(!1),z=Object(d.a)(_,2),P=z[0],F=z[1],L=Object(n.useState)("none"),H=Object(d.a)(L,2),V=H[0],W=H[1],q=Object(n.useState)(!1),B=Object(d.a)(q,2),J=B[0],Y=B[1],K=Object(n.useState)(null),G=Object(d.a)(K,2),X=(G[0],G[1],document.querySelector("body")),$=Object(n.useRef)(),Q=$.current,Z=function(){"mediaSession"in navigator&&(console.log("navigator setupped"),navigator.mediaSession.metadata=new window.MediaMetadata({title:l.title,artist:l.channelTitle,artwork:[{src:l.sdThumbnail,sizes:"512x512",type:"image/png"}]}),navigator.mediaSession.setActionHandler("play",(function(){ee()})),navigator.mediaSession.setActionHandler("pause",(function(){$.current.pause()})),navigator.mediaSession.setActionHandler("previoustrack",(function(){oe()})),navigator.mediaSession.setActionHandler("nexttrack",(function(){ne()})))},ee=function(){$.current.play().then((function(e){console.log("audio played auto"),Z()})).catch((function(e){console.log("playback prevented"),S("paused")}))};Object(n.useEffect)((function(){console.log("state changed triggedred");var e=function(){var e=Object(D.a)(I.a.mark((function e(t){var a;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"playlist"===N||J||(T("maximized"),console.log("maximizing here yar and state is",N)),setTimeout((function(){Y(!1)}),200),S("loading"),e.next=5,Ut.a.get("/song",{params:{id:t}});case 5:a=e.sent,"https://server.ylight.xyz/proxy/",$.current.src=a.data,ee();case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();if(l.audio?(console.log("yes its downloaded we will play from local file"),T("maximized"),S("loading"),$.current.src=window.URL.createObjectURL(l.audio),ee()):l.id&&e(l.id),l.id){var n=function(){var e=Object(D.a)(I.a.mark((function e(){var t;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,me.a.get("/search",{params:{relatedToVideoId:l.id,maxResults:10}});case 2:t=e.sent,v(t.data.items);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();J||(E?(a.replace("/play?id=".concat(l.id)),w(!1)):("/play"!==t.pathname&&a.push("/play?id=".concat(l.id)),n())),console.log(l)}W("none")}),[l,w]),Object(n.useEffect)((function(){yt=f,console.log("related",f)}),[f]),Object(n.useEffect)((function(){console.log("isnext state",J)}),[J]);var te=function(){var e=Object(D.a)(I.a.mark((function e(t){var a;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ut.a.get("/song",{params:{id:t}});case 2:a=e.sent,$.current.src=a.data,ee();case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ae=function(e){try{h({id:e.id.videoId,title:e.snippet.title,channelTitle:e.snippet.channelTitle,maxThumbnail:"https://img.youtube.com/vi/".concat(e.id.videoId,"/hqdefault.jpg"),sdThumbnail:"https://img.youtube.com/vi/".concat(e.id.videoId,"/sddefault.jpg")})}catch(t){console.error("err",t)}document.hidden&&te(e.id.videoId)},ne=function(){w(!0),console.log("play next related videos",f);var e,t=yt.findIndex((function(e){return e.id.videoId===l.id}));console.log("the current index is",t),console.log("hey we will play next song"),e=yt[t+1],ae(e)},oe=function(){if(w(!0),Q.currentTime>5)Q.currentTime=0;else{var e,t=yt.findIndex((function(e){return e.id.videoId===l.id}));-1!==t?(e=yt[t-1],ae(e)):Q.currentTime=0}},ce={position:"fixed",right:0,bottom:0,background:"#fff",width:"100%",height:"100%",zIndex:1400,display:"inline block",transition:"all .3s ease"};"minimized"===N&&(ce.transform="translateY(calc(100% - 106px))",ce.zIndex=0,ce.background="Dark"===u?"#333":"#e91e63",X.style.overflow="auto"),"maximized"===N&&(X.style.overflow="hidden","Dark"===u&&(ce.background="#333")),"playlist"===N&&(ce.transform="translateY(-418px)");var se=function(e){e.preventDefault(),"minimized"===N&&(T("maximized"),R(!0),a.push({pathname:"/play",search:"?id=".concat(l.id),state:{modal:!0}}))},le=function(){T("playlist"===N?"maximized":"playlist"),console.log("Maximize the playlist")},ue=function(){var e=Object(D.a)(I.a.mark((function e(){var t;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Je.i)(l);case 2:t=e.sent,W(t),console.log(t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),de=0,he=Object(n.useRef)(null),pe=Object(De.a)({onSwipedDown:function(e){T("minimized"),a.goBack()},onSwiping:function(e){0===de&&(de=e.event.changedTouches[0].screenY);var t=e.event.changedTouches[0].screenY,a=Math.round(t-de);a<1&&(a=0);var n=he.current.style;n.transform="translateY(".concat(a,"px)"),n.transition="none"},onSwiped:function(e){de=0,he.current.style=""},onSwipedUp:function(e){"minimized"===N&&T("maximized")},onSwipedRight:function(e){var t=setTimeout((function(){clearTimeout(t),ne()}),250)},onSwipedLeft:function(e){var t=setTimeout((function(){clearTimeout(t),oe()}),250)}}),ge=Object(De.a)({onSwipedUp:function(e){se()}});Object(n.useEffect)((function(){"/play"!==t.pathname||l.id||(console.log("history is in play fetching song"),fe(i.get("id")));a.listen((function(e){"/play"===e.pathname?"REPLACE"!==a.action&&(T("maximized"),console.log("set player state to maximized")):(T("minimized"),console.log("set player state to minimized")),console.log(a)}))}),[a]),Object(n.useEffect)((function(){console.log(N)}),[N]);var fe=function(e){me.a.get("videos",{params:{id:e}}).then((function(e){var t=e.data.items[0];console.log(l),h({id:t.id,title:t.snippet.title,channelTitle:t.snippet.channelTitle,maxThumbnail:"https://img.youtube.com/vi/".concat(t.id,"/maxresdefault.jpg"),sdThumbnail:"https://img.youtube.com/vi/".concat(t.id,"/sddefault.jpg")})}))};return l.id?r.a.createElement("div",{ref:he,onClick:se,className:"mediaPlayerContainer "+("minimized"===N?"playerMinimized":"playlist"===N?"playerPlaylist":void 0)},function(){if("maximized"===N||"playlist"===N)return r.a.createElement(r.a.Fragment,null,r.a.createElement(ie.a,{container:!0,direction:"column",className:"main-player-inner",style:{height:" calc(100vh - 46px)",justifyContent:"space-evenly"}},r.a.createElement(Ot,{song:l,player:Q,setPlayerState:T,history:a}),r.a.createElement("div",Object.assign({},pe,{className:"musicArtContainer"}),r.a.createElement(Ge,{data:l,rating:V,audioEl:Q})),r.a.createElement(tt,{audioState:k,player:Q}),r.a.createElement(ie.a,{container:!0,direction:"row",justify:"space-evenly",alignItems:"center",style:{maxWidth:"290px",height:"80px",margin:"0 auto"}},r.a.createElement(Le,{playPrevious:oe}),r.a.createElement(_e,{player:Q,audioState:k}),r.a.createElement(Pe,{onPlayNext:ne}))),r.a.createElement(Mt,{toggleMaxPlaylist:le,setPlaylist:function(){return w(!0)},playerState:N,relatedVideos:f,setRelatedVideos:function(e){return v(e)},isRepeatOn:P,setIsRepeatOn:function(){F(!P)}}))}(),function(){if("minimized"===N&&l.id)return r.a.createElement("div",ge,r.a.createElement(kt,{playPause:{player:Q,minimized:A,audioState:k},playNext:function(e){e.stopPropagation(),Y(!0),ne()},data:l,emptyPlayer:function(e){e.stopPropagation(),h([])}}),r.a.createElement(tt,{audioState:k,player:Q,minimized:A}))}(),r.a.createElement("audio",{onLoadStart:function(){S("loading")},id:"audio-element",onLoadedData:ue,onPlay:function(){return S("playing")},onPlaying:function(){return S("playing")},onPause:function(){return S("paused")},onEnded:function(){P?($.current.currentTime=0,ee()):ne()},autoPlay:!0,ref:$})):null},zt=a(170),Pt=a.n(zt),Ft=a(171),Lt=a.n(Ft),Ht=a(367),Vt=a(343),Wt=a(344),qt=a(345),Bt=a(346),Jt=a(347),Yt=(a(232),function(){var e=Object(n.useContext)(re.a),t=Object(d.a)(e,2),a=t[0],i=a.menuOpen,o=a.themeSelectValue,c=t[1],s=function(e){c({type:"setMenuOpen",snippet:e})},l=Object(n.useCallback)((function(e){c({type:"setThemeSelectValue",snippet:e})}),[c]),u=Object(n.useState)(!1),m=Object(d.a)(u,2),h=m[0],p=m[1];Object(n.useEffect)((function(){p("Dark"===o)}),[o]);var f=function(e){l(e),localStorage.setItem("selectedTheme",e)};return r.a.createElement(Ht.a,{open:i,onClose:function(){return s(!1)},onOpen:function(){return s(!0)}},r.a.createElement("div",{style:{width:"300px"}},r.a.createElement("div",{style:{margin:"35px",position:"relative",width:"30px",height:"30px"}},r.a.createElement(He.a,null,r.a.createElement("img",{src:h?Lt.a:Pt.a,className:"dayNightToggleBtn",animate:{scale:1.5,rotate:"360deg"},alt:"sun moon icon",onClick:function(){h?(f("Default"),p(!0)):(f("Dark"),p(!1))}}))),r.a.createElement(y.a,null),r.a.createElement(be.a,{component:"nav",className:"pinkLists",onClick:function(){return s(!1)}},r.a.createElement(ge.a,{button:!0,component:g.b,to:"/page1/settings"},r.a.createElement(fe.a,null,r.a.createElement(Vt.a,null)),r.a.createElement(ve.a,{primary:"Settings"})),r.a.createElement(ge.a,{button:!0,component:g.b,to:"/page1/feedback"},r.a.createElement(fe.a,null,r.a.createElement(Wt.a,null)),r.a.createElement(ve.a,{primary:"Feedback"})),r.a.createElement(ge.a,{button:!0,component:g.b,to:"/page1/donate"},r.a.createElement(fe.a,null,r.a.createElement(qt.a,null)),r.a.createElement(ve.a,{primary:"Donate & Support"})),r.a.createElement(ge.a,{button:!0,component:g.b,to:"/page1/contributors"},r.a.createElement(fe.a,null,r.a.createElement(Bt.a,null)),r.a.createElement(ve.a,{primary:"Contributors"})),r.a.createElement(ge.a,{button:!0,component:g.b,target:"blank",href:"https://github.com/nDsCoop/"},r.a.createElement(fe.a,null,r.a.createElement("svg",{width:"24","aria-hidden":"true",focusable:"false","data-prefix":"fab","data-icon":"github",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 496 512",fill:"#ffff"},r.a.createElement("path",{d:"M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"}))),r.a.createElement(ve.a,{primary:"Github"})),r.a.createElement(ge.a,{button:!0,component:g.b,to:"/page1/privacy"},r.a.createElement(fe.a,null,r.a.createElement(Jt.a,null)),r.a.createElement(ve.a,{primary:"Privacy & Policy"})))))}),Kt=(a(368),a(178)),Gt=a(360),Xt=a(359),$t=a(109),Qt=a(362),Zt=a(363),ea=a(351),ta=a(352),aa=a(353),na=a(354),ra=function(){var e=Object(n.useContext)(re.a),t=Object(d.a)(e,2),a=t[0].themeSelectValue,i=t[1],o=Object(n.useCallback)((function(e){i({type:"setThemeSelectValue",snippet:e})}),[i]);Object(n.useEffect)((function(){console.log(a)}),[a]);var c=r.a.createElement(Qt.a,{m:1},r.a.createElement(Zt.a,{value:a,onChange:function(e){o(e.target.value),localStorage.setItem("selectedTheme",e.target.value)},displayEmpty:!0,name:"age"},r.a.createElement(ea.a,{value:"Default"},"Default"),r.a.createElement(ea.a,{value:"Dark"},"Dark"),r.a.createElement(ea.a,{value:"Auto"},"Auto")));return r.a.createElement(ta.a,null,r.a.createElement("br",null),r.a.createElement(je.a,{variant:"h5",align:"center",gutterBottom:!0},"Settings"),r.a.createElement(aa.a,{component:"fieldset"},r.a.createElement(na.a,{row:!0},r.a.createElement(dt.a,{labelPlacement:"start",label:"Select Theme ",value:"top",control:c}))))},ia=a(364),oa=a(355),ca=a(356),sa=a(357),la=a(358),ua=Object(n.lazy)((function(){return a.e(6).then(a.bind(null,395))})),ma=Object(n.lazy)((function(){return Promise.resolve().then(a.bind(null,181))})),da=Object(n.lazy)((function(){return Promise.all([a.e(4),a.e(10)]).then(a.bind(null,388))})),ha=Object(n.lazy)((function(){return a.e(7).then(a.bind(null,393))})),pa=Object(n.lazy)((function(){return Promise.all([a.e(9),a.e(11)]).then(a.bind(null,389))})),ga=Object(n.lazy)((function(){return a.e(8).then(a.bind(null,390))})),fa=Object(n.lazy)((function(){return a.e(3).then(a.bind(null,391))})),va=Object(n.lazy)((function(){return a.e(5).then(a.bind(null,392))})),ba=Object(Xe.a)({root:{background:"#4d6472",position:"fixed",bottom:"0",padding:0,width:"100%",zIndex:1300},indicator:{display:"none"},labelIcon:{margin:0}})(ia.a),ya=Object(Xe.a)({root:{color:"#FFB2C1",fontSize:".75rem",margin:0,"&:hover":{color:"#ffffffed",opacity:1},"&$selected":{color:"#fff"},"&:focus":{color:"#FFFFFF"}},selected:{}})(oa.a),Ea=void 0;window.addEventListener("beforeinstallprompt",(function(e){Ea=e}));var wa=Object(k.g)((function(e){var t=e.history,a=e.location,i=Object(n.useContext)(re.a),o=Object(d.a)(i,1)[0],c=o.currentVideoSnippet,s=o.searchResult;console.log(c);var l=Object(n.useState)([]),u=Object(d.a)(l,2),m=u[0],h=u[1],p=Object(n.useState)([]),f=Object(d.a)(p,2),v=f[0],b=f[1],y=Object(n.useState)([]),E=Object(d.a)(y,2),w=E[0],O=E[1],j=Object(n.useState)(0),S=Object(d.a)(j,2),x=S[0],C=S[1],N=Object(n.useState)(0),T=Object(d.a)(N,2),M=T[0],U=T[1],A=Object(n.useState)(null),R=Object(d.a)(A,2),_=R[0],z=R[1],P=r.a.createElement(ie.a,{style:{height:"100vh"},container:!0,justify:"center",alignItems:"center"},r.a.createElement(oe.a,null));var F=Object(n.useCallback)(Object(D.a)(I.a.mark((function e(){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=x,e.next=1===e.t0?3:2===e.t0?9:3===e.t0?15:21;break;case 3:return e.t1=b,e.next=6,Object(Je.f)();case 6:return e.t2=e.sent,(0,e.t1)(e.t2),e.abrupt("break",22);case 9:return e.t3=O,e.next=12,Object(Je.d)();case 12:return e.t4=e.sent,(0,e.t3)(e.t4),e.abrupt("break",22);case 15:return e.t5=h,e.next=18,Object(Je.e)();case 18:return e.t6=e.sent,(0,e.t5)(e.t6),e.abrupt("break",22);case 21:return e.abrupt("break",22);case 22:case"end":return e.stop()}}),e)}))),[x]);Object(n.useEffect)((function(){F()}),[x,F]),Object(n.useEffect)((function(){F(),console.log("fetching the songs")}),[M,F]),Object(n.useEffect)((function(){Je.a.on("changes",(function(){U((function(e){return e+1}))})),Object(Je.h)(),"no"===localStorage.getItem("isThisNew")&&z(!0),Rt=a,t.listen((function(e){"/play"!==e.pathname&&(Rt=e,console.log(Rt))}))}),[]),Object(n.useEffect)((function(){_&&"/"===t.location.pathname&&t.replace("/home")}),[z,t,_]);var L=function(){localStorage.setItem("isThisNew","no"),t.replace("/"),Ea&&(Ea.prompt(),Ea.userChoice.then((function(e){"accepted"===e.outcome?console.log("User accepted the A2HS prompt"):console.log("User dismissed the A2HS prompt"),Ea=null})))};return r.a.createElement("div",null,r.a.createElement(n.Suspense,{fallback:P},r.a.createElement(k.d,{location:"/play"===a.pathname?Rt:a},r.a.createElement(k.b,{exact:!0,path:"/page1",render:function(e){return r.a.createElement(ua,{continueToHome:L})}}),r.a.createElement(k.b,{path:"/search",render:function(e){return r.a.createElement(da,{videos:s})}}),r.a.createElement(k.b,{path:"/page1/home",render:function(e){return C(0),r.a.createElement(ha,null)}}),r.a.createElement(k.b,{path:"/page1/liked",render:function(e){return C(1),r.a.createElement(ma,Object.assign({songs:v},e,{key:a.pathname}))}}),r.a.createElement(k.b,{path:"/page1/downloads",render:function(e){return C(2),r.a.createElement(ma,{songs:w,key:a.pathname})}}),r.a.createElement(k.b,{path:"/page1/history",render:function(e){return C(3),r.a.createElement(ma,{songs:m,key:a.pathname})}}),r.a.createElement(k.b,{path:"/page1/app",render:function(e){return window.location.replace("/"),r.a.createElement("div",null,"Redirecting you to play store")}}),r.a.createElement(k.b,{path:"/page1/settings",component:ra}),r.a.createElement(k.b,{path:"/page1/privacy",component:ga}),r.a.createElement(k.b,{path:"/page1/feedback",component:pa}),r.a.createElement(k.b,{path:"/page1/donate",component:fa}),r.a.createElement(k.b,{path:"/page1/contributors",component:va})),r.a.createElement(k.b,{path:"/",render:function(e){return function(e){return"/"!==window.location.pathname?r.a.createElement(_t,e):null}(e)}}),r.a.createElement("div",{style:{height:c.id?"100px":"50px"}})),r.a.createElement(ba,{value:x,onChange:function(e,t){C(t)},variant:"fullWidth",indicatorColor:"primary",textColor:"primary"},r.a.createElement(ya,{icon:r.a.createElement(ca.a,null),"aria-label":"Home",component:g.b,to:"/page1/home",label:"Home"}),r.a.createElement(ya,{icon:r.a.createElement(sa.a,null),"aria-label":"Liked",component:g.b,to:"/page1/liked",label:"Liked"}),r.a.createElement(ya,{icon:r.a.createElement(it.a,null),"aria-label":"Downloads",component:g.b,to:"/page1/downloads",label:"Downloads"}),r.a.createElement(ya,{icon:r.a.createElement(la.a,null),"aria-label":"History",component:g.b,to:"/page1/history",label:"History"})))})),Oa=document.querySelector("body"),ja={palette:{primary:Xt.a,third:$t.a,secondary:{main:"#263238"}},typography:{useNextVariants:!0}},ka={palette:{type:"dark",primary:Xt.a,third:$t.a,secondary:{main:"#263238"}},typography:{useNextVariants:!0}},Sa=Object(Kt.a)(ka),xa=Object(Kt.a)(ja),Ca=function(){var e=Object(n.useContext)(re.a),t=Object(d.a)(e,2),a=t[0].themeSelectValue,i=(t[1],function(){var e=Object(n.useContext)(re.a),t=Object(d.a)(e,2)[1],a=Object(n.useCallback)((function(e){t({type:"setThemeSelectValue",snippet:e})}),[t]);return{checkDarkMode:function(){var e=localStorage.getItem("selectedTheme");if(e){console.log(e),a(e);var t=(new Date).getHours();"Auto"===e&&a(t>=18||t<=6?"Dark":"Default")}}}}().checkDarkMode);return Object(n.useEffect)((function(){i(),navigator.userAgent.match(/Android/i)&&(Oa.style.overscrollBehavior="none")}),[]),Object(n.useEffect)((function(){"Dark"===a?Oa.classList.add("dark"):Oa.classList.remove("dark")}),[a]),r.a.createElement(Gt.a,{theme:"Dark"===a?Sa:xa},r.a.createElement(k.d,null,r.a.createElement(g.a,null,r.a.createElement(Ie,null),r.a.createElement(k.b,{component:wa}),r.a.createElement(Yt,null))))};var Na=function(){return r.a.createElement(re.b,null,r.a.createElement(Ca,null))},Ta=a(172),Ia=a.n(Ta);function Da(){var e=Object(m.a)(["\n  min-height: 100vh;\n  display: grid;\n  place-items: center;\n  img {\n    width: 150px;\n  }\n"]);return Da=function(){return e},e}var Ma=f.a.section(Da()),Ua=function(e){var t=e.children,a=Object(v.b)(),n=a.isLoading,i=a.error;return n?r.a.createElement(Ma,null,r.a.createElement("img",{src:Ia.a,alt:"spinner"})):i?r.a.createElement(Ma,null,r.a.createElement("h1",null,i.message)):r.a.createElement(r.a.Fragment,null,t)},Aa=a(180),Ra=function(e){var t=e.children,a=Object(Aa.a)(e,["children"]),n=Object(v.b)(),i={isAuthenticated:n.isAuthenticated,user:n.user};return r.a.createElement(k.b,Object.assign({},a,{render:function(){return i?t:r.a.createElement(k.a,{to:"/login"})}}))},_a=a(173),za=a.n(_a);function Pa(){var e=Object(m.a)(["\n  img {\n    top:0;\n    height: 50vh;\n    width: 70vh;\n  }\n  .btn-second {\n    display: inline-block;\n    text-decoration: none;\n    letter-spacing: var(--mainSpacing);\n    color: var(--mainBlack);\n    background: var(--primaryColor);\n    padding: 0.4rem 0.9rem;\n    border: 3px solid var(--primaryColor);\n    transition: var(--mainTransition);\n    text-transform: uppercase;\n    cursor: pointer;\n  }\n  .btn-second:hover {\n  background: transparent;\n  color: var(--primaryColor);\n}\n"]);return Pa=function(){return e},e}var Fa=f.a.section(Pa()),La=function(){var e=Object(v.b)().loginWithRedirect;return r.a.createElement(h.a,null,r.a.createElement(p.a,{title:"LoginApp"},r.a.createElement(Fa,null,r.a.createElement("ul",null,r.a.createElement("img",{src:za.a,alt:"login image"})),r.a.createElement(g.b,{onClick:e,className:"btn-second"},"Log In / Sign Up"))))},Ha=a(73),Va=(a(233),a(67)),Wa=a.n(Va),qa=a(43),Ba=a(6),Ja=a.n(Ba),Ya=a(82),Ka=a(177),Ga=a(61),Xa=(a(141),function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).onClickOutSide=function(t){e.ref&&!e.ref.contains(t.target)&&(console.log("Here click out side login form!"),e.setState({showUserFrom:!1,showUserMenu:!1}))},e.onSubmit=function(t){var a=e.props.store,n=e.state,r=n.user,i=n.isLogin;t.preventDefault(),e.setState({message:null},(function(){i?a.login(r.email,r.password).then((function(t){e.setState({message:null,showUserFrom:!1,showUserMenu:!1})})).catch((function(t){console.log(t),e.setState({message:{body:t,type:"error"}})})):a.register(r).then((function(t){e.setState({message:{body:"User created",type:"Success"}},(function(){a.login(r.email,r.password).then((function(t){e.setState({message:null,showUserFrom:!1,showUserMenu:!1})})).catch((function(t){console.log(t),e.setState({message:{body:t,type:"error"}})}))}))}))}))},e.onTxtfieldChange=function(t){var a=e.state.user;a[t.target.name]=t.target.value,e.setState({user:a})},e.state={message:null,showUserFrom:!1,isLogin:!0,user:{email:"",password:"",name:""}},e}return Object(s.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("mousedown",this.onClickOutSide),console.log("Didmount")}},{key:"componentWillUnmount",value:function(){window.removeEventListener("mousedown",this.onClickOutSide),console.log("Unmount")}},{key:"render",value:function(){var e=this,t=this.state,a=t.user,n=t.message,i=t.isLogin,o=this.props.store,c=o.getCurrentUser(),s=Ja.a.get(c,"avatar"),l=Ja.a.get(c,"name"),u=Ja.a.get(c,"email"),m=Ja.a.get(c,"avatar");return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"user-bar"},c?null:r.a.createElement("button",{type:"button",onClick:function(t){return e.setState({showUserFrom:!0})},className:"login-btn"},"Sign In"),r.a.createElement("div",{className:"name-user"},Ja.a.get(c,"name")),r.a.createElement("img",{src:s||x.a,onClick:function(t){return e.setState({showUserMenu:!0})},alt:"user-img",className:"img-user"}),c&&this.state.showUserMenu?r.a.createElement("div",{className:"user-form-1",ref:function(t){return e.ref=t}},r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement("ul",{className:"form-container"},r.a.createElement("li",null,r.a.createElement("h4",null,"Your Account")),r.a.createElement("li",{className:"header-menu"},r.a.createElement("img",{src:m,alt:"user-img"}),r.a.createElement("span",null,l)),r.a.createElement("div",{className:"body-menu"},r.a.createElement("p",{htmlFor:"email"},"Name: ",l),r.a.createElement("div",null,r.a.createElement(ce.a,{style:{color:"rgba(0, 0, 0, 0.5)"}},r.a.createElement(Ga.d,null)))),r.a.createElement("div",{className:"body-menu"},r.a.createElement("p",{htmlFor:"email"},"Eamil: ",u),r.a.createElement("div",null," ",r.a.createElement(ce.a,{style:{color:"rgba(0, 0, 0, 0.5)"}},r.a.createElement(Ga.d,null)))),r.a.createElement("div",{className:"footer-menu"},r.a.createElement("div",{className:"img"},r.a.createElement("img",{style:{maxHeight:"5rem",maxWidth:"5rem"},src:x.a,alt:"nds"})),r.a.createElement("div",{className:"btn-cc"},r.a.createElement("li",null,r.a.createElement("button",{onClick:function(){return o.signOut()},type:"button",className:"login-btn"},"Signout"))))))):null,!c&&this.state.showUserFrom?r.a.createElement("div",{className:"user-form",ref:function(t){return e.ref=t}},r.a.createElement("form",{onSubmit:this.onSubmit},r.a.createElement("ul",{className:"form-container"},r.a.createElement("li",null,r.a.createElement("h4",null,"Sign In / Register Your Account")),r.a.createElement("li",null,n?r.a.createElement("p",{className:Wa()("app-msg",Ja.a.get(n,"type"))},Ja.a.get(n,"body")):null),i?null:r.a.createElement("li",null,r.a.createElement("label",{htmlFor:"name"},"Name"),r.a.createElement("input",{onChange:function(t){return e.onTxtfieldChange(t)},placeholder:"Your-Name",required:!0,type:"text",name:"name",value:Ja.a.get(a,"name"),id:"name"})),r.a.createElement("li",null,r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("input",{onChange:function(t){return e.onTxtfieldChange(t)},placeholder:"example.vn@nds.com",required:!0,type:"email",name:"email",value:Ja.a.get(a,"email"),id:"email"})),r.a.createElement("li",null,r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{onChange:function(t){return e.onTxtfieldChange(t)},autoComplete:"off",placeholder:"Your-password",required:!0,type:"password",value:Ja.a.get(a,"password"),id:"password",name:"password"})),r.a.createElement("div",{className:"footer-login"},r.a.createElement("div",{className:"img"},r.a.createElement("img",{style:{maxHeight:"5rem",maxWidth:"5rem"},src:x.a,alt:"nds"})),r.a.createElement("div",{className:"btn-cc"},r.a.createElement("li",null,r.a.createElement("button",{type:"submit",className:"login-btn"},i?"Log In":"New Account")),i?r.a.createElement("li",null,r.a.createElement("button",{onClick:function(){e.setState({isLogin:!1})},className:"login-btn"},"Create new account?")):null))))):null))}}]),a}(n.Component)),$a=a(179),Qa=a(121),Za=a.n(Qa),en=a(175),tn=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).canvas=r.a.createRef(),n}return Object(s.a)(a,[{key:"componentDidUpdate",value:function(){this.draw()}},{key:"draw",value:function(){var e=this.props.audioData,t=this.canvas.current,a=t.height,n=t.width,r=t.getContext("2d"),i=0,o=1*n/e.length;r.lineWidth=1.68,r.strokeStyle="rgba(199, 119, 199, 0.9)",r.clearRect(0,0,n,a),r.beginPath(),r.moveTo(0,a/2);var c,s=Object(en.a)(e);try{for(s.s();!(c=s.n()).done;){var l=c.value/255*a;r.lineTo(i,l),i+=o}}catch(u){s.e(u)}finally{s.f()}r.lineTo(i,a/2),r.stroke()}},{key:"render",value:function(){return r.a.createElement("canvas",{width:"1250px",height:"400px",ref:this.canvas})}}]),a}(n.Component),an=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={audioData:new Uint8Array(0)},n.tick=n.tick.bind(Object(Ha.a)(n)),n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this.audioContext=new(window.AudioContext||window.webkitAudioContext),this.analyser=this.audioContext.createAnalyser(),this.dataArray=new Uint8Array(this.analyser.frequencyBinCount),this.source=this.audioContext.createMediaStreamSource(this.props.audio),this.source.connect(this.analyser),this.source.connect(this.analyser),this.rafId=requestAnimationFrame(this.tick)}},{key:"tick",value:function(){this.analyser.getByteTimeDomainData(this.dataArray),this.setState({audioData:this.dataArray}),this.rafId=requestAnimationFrame(this.tick)}},{key:"componentWillUnmount",value:function(){cancelAnimationFrame(this.rafId),this.analyser.disconnect(),this.source.disconnect()}},{key:"render",value:function(){return r.a.createElement(tn,{audioData:this.state.audioData})}}]),a}(n.Component),nn=a(176),rn=a.n(nn),on=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).sendToPeer=function(e,t){n.socket.emit({socketID:n.socket.id,payload:t})},n.createOffer=function(){console.log("Offer"),n.pc.createOffer({offerToReceiveVideo:1}).then((function(e){n.pc.setLocalDescription(e),n.sendToPeer("offerOrAnswer",e)}))},n.createAnswer=function(){console.log("Answer"),n.pc.createAnswer({offerToReceiveVideo:1}).then((function(e){n.pc.setLocalDescription(e),n.sendToPeer("offerOrAnswer",e)}))},n.setRemoteDescription=function(){var e=JSON.parse(n.textref.value);n.pc.setRemoteDescription(new RTCSessionDescription(e))},n.addCandidate=function(){n.candidates.forEach((function(e){console.log(JSON.stringify(e)),n.pc.addIceCandidate(new RTCIceCandidate(e))}))},n.localVideoref=r.a.createRef(),n.remoteVideoref=r.a.createRef(),n.socket=null,n.candidates=[],n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.socket=rn()("/webrtcPeer",{path:"/webrtc",query:{}}),this.socket.on("connection-success",(function(e){console.log(e)})),this.socket.on("offerOrAnswer",(function(t){e.textref.value=JSON.stringify(t),console.log("done here!")})),this.socket.on("candidate",(function(t){e.candidates=[].concat(Object(xt.a)(e.candidates),[t])}));this.pc=new RTCPeerConnection(null),this.pc.onicecandidate=function(t){t.candidate&&e.sendToPeer("candidate",t.candidate)},this.pc.oniceconnectionstatechange=function(e){console.log(e)},this.pc.onaddstream=function(t){e.remoteVideoref.current.srcObject=t.stream};navigator.mediaDevices.getUserMedia({audio:!1,video:!0}).then((function(t){window.localStream=t,e.localVideoref.current.srcObject=t,e.pc.addStream(t)})).catch((function(e){console.log("Error: ",e)}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("video",{ref:this.localVideoref,style:{width:240,height:240,margin:5,backgroundColor:"black"},autoPlay:!0}),r.a.createElement("video",{ref:this.remoteVideoref,style:{width:240,height:240,margin:5,backgroundColor:"black"},autoPlay:!0}),r.a.createElement("button",{onClick:this.createOffer},"Offer"),r.a.createElement("button",{onClick:this.createAnswer},"Answer"),r.a.createElement("br",null),r.a.createElement("textarea",{style:{height:"2rem",width:"23rem"},ref:function(t){e.textref=t}}),r.a.createElement("br",null),r.a.createElement("button",{onClick:this.setRemoteDescription},"Set Remoete Desc"),r.a.createElement("button",{onClick:this.addCandidate},"Add Candidate"))}}]),a}(n.Component),cn=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).onClickOutSide=function(e){n.ref&&!n.ref.contains(e.target)&&n.setState({showEmoji:!1})},n.onDrop=function(e){var t=n.props.store;console.log("file goc: ",e);var a=new FormData;a.append("file",e[0]),t.upLoadfile(a),console.log("file format: ",a)},n.sendTyping=function(){var e=n.props.store,t=e.getActiveChannel();n.lastUpdateTime=Date.now(),n.state.isTyping||(n.setState({isTyping:!0}),e.addTyping(t,!0),n.startCheckingTyping())},n.startCheckingTyping=function(){console.log("Typing"),n.typingInterval=setInterval((function(){Date.now()-n.lastUpdateTime>350&&(n.setState({isTyping:!1}),n.stopCheckingTyping())}),300)},n.stopCheckingTyping=function(){var e=n.props.store,t=e.getActiveChannel();console.log("Stop Typing"),n.typingInterval&&(clearInterval(n.typingInterval),e.addTyping(t,!1))},n.renderChannelTitle=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=n.props.store,a=t.getMembersFromChannel(e),i=[];a.forEach((function(e){var t=Ja.a.get(e,"name");i.push(t)}));var o=Ja.a.join(i,", ");return!o&&Ja.a.get(e,"isNew")&&(o="New Mss"),r.a.createElement("h4",null,o)},n.handleOnClick=function(e){var t=n.props.store,a=Ja.a.get(e,"_id"),r=Ja.a.get(t.getActiveChannel(),"_id");t.addUserToChannel(r,a),n.setState({searchUser:""})},n._onCreateChannel=function(e){e.preventDefault();var t=n.props.store,a=t.getCurrentUser(),r=Ja.a.get(a,"_id"),i={_id:(new Ya.ObjectID).toString(),title:"",lastMessage:"Let's a chat",members:new qa.a,messages:new qa.a,isNew:!0,userId:r,created:new Date,typing:!1};i.members=i.members.set(r,!0),t.onCreateNewChannel(i)},n.scrollMessagesToBottom=function(){n.messagesRef&&(n.messagesRef.scrollTop=n.messagesRef.scrollHeight)},n.handleSubmit=function(e){var t=n.state.newMessage,a=n.props.store;if(e.preventDefault(),Ja.a.trim(t).length){var r=(new Ya.ObjectID).toString(),i=a.getActiveChannel(),o=Ja.a.get(i,"_id",null),c=a.getCurrentUser(),s={_id:r,channelId:o,body:t,userId:Ja.a.get(c,"_id"),type:"text",me:!0};a.addMessage(r,s),n.setState({newMessage:""})}n.setState({newMessage:"",showEmoji:!1})},n._onResi=function(){n.setState({height:window.innerHeight})},n.state={height:window.innerHeight,newMessage:"",searchUser:"",showSearchUser:!1,isTyping:!1,showEmoji:!1,audio:null,temp:5e3,isShowGetAud:!1,record:!1},n}return Object(s.a)(a,[{key:"startRecording",value:function(){var e=Object(D.a)(I.a.mark((function e(){var t,a,n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.props.store,e.next=3,navigator.mediaDevices.getUserMedia({audio:!0,video:!1});case 3:t=e.sent,this.setState({audio:t}),this.setState({isShowGetAud:!0}),this.setState({record:!0}),a=[],(n=new MediaRecorder(t)).start(),n.ondataavailable=function(e){a.push(e.data);var t=(new Ya.ObjectID).toString(),n=new File(a,"".concat(t+".mp3"),{type:"audio/wav"}),r=URL.createObjectURL(n);n.path="".concat(Ja.a.toString(r.substring(27)+".mp3"));var i=Ja.a.toString(n.path);n.fileName="".concat(i);var o=[];o.push(n),(new FormData).append("file",o[0])};case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"stopRecording",value:function(){null!==this.state.audio?(this.state.audio.getTracks().forEach((function(e){return e.stop()})),this.setState({audio:null}),this.setState({record:!1})):console.log("Error shortage-lenght!")}},{key:"componentWillUnmount",value:function(){this.stopCheckingTyping()}},{key:"renderChannelAvatar",value:function(e){var t=this.props.store.getMembersFromChannel(e),a=t.size>4?4:t.size,n=t.map((function(e,t){return t<4?r.a.createElement("img",{key:t,src:Ja.a.get(e,"avatar"),alt:Ja.a.get(e,"name")}):null}));return r.a.createElement("div",{className:Wa()("channel-avatars","channel-avatars-".concat(a))},n)}},{key:"componentDidUpdate",value:function(){this.scrollMessagesToBottom()}},{key:"componentDidMount",value:function(){window.addEventListener("resize",this._onResi),window.addEventListener("mousedown",this.onClickOutSide)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this._onResi),window.removeEventListener("mousedown",this.onClickOutSide)}},{key:"render",value:function(){var e=this,t=this.state,a=t.height,n=t.newMessage,i=t.showEmoji,o=t.isShowGetAud,c=this.props.store,s=c.getActiveChannel(),l=c.getMessagesFromChannel(s),u=c.getMembersFromChannel(s),m=c.getChannels(),d=c.getSearchUsers(),h=c.getCurrentUser(),p={height:a};return r.a.createElement("div",{style:p,className:"app3"},r.a.createElement("div",{className:"chat-header"},r.a.createElement("div",{className:"header-left"},r.a.createElement("div",{className:"action"},r.a.createElement(g.b,{onClick:function(t){return e._onCreateChannel(t)},className:"btn-primary"},"AddNew"))),Ja.a.get(s,"isNew")?r.a.createElement("div",{className:"toolbar"},r.a.createElement("form",{className:"tool"},r.a.createElement("textarea",{type:"text",value:this.state.searchUser,placeholder:"To UserName/Email",onChange:function(t){var a=Ja.a.get(t,"target.value");e.setState({searchUser:a},(function(){c.startSearchUsers(a)}))}})),r.a.createElement("div",{className:"search-user"},r.a.createElement("div",{className:"user-list"},d.map((function(t,a){return r.a.createElement("div",{onClick:function(){return e.handleOnClick(t)},key:a,className:"user"},r.a.createElement("img",{src:t.avatar,alt:t.name}),r.a.createElement("span",null,t.name))}))))):null,r.a.createElement("div",{className:"header-mid"},this.renderChannelTitle(s)),r.a.createElement("div",{className:"header-right"},r.a.createElement(Xa,{store:c}),r.a.createElement("div",{className:"toolsRight-bar"},r.a.createElement(ce.a,{style:{color:"rgba(0, 0, 0, 0.5)"}},r.a.createElement(Ga.d,null))))),r.a.createElement("div",{className:"chat-main"},r.a.createElement("div",{className:"sidebar-left"},r.a.createElement("div",{className:"chanels"},m.map((function(t,a){return r.a.createElement("div",{onClick:function(e){c.setActiveChannelId(t._id)},key:t._id,className:Wa()("chanel",{active:Ja.a.get(s,"_id")===Ja.a.get(t,"_id",null)})},r.a.createElement("div",{className:"user-img"},e.renderChannelAvatar(t)),r.a.createElement("div",{className:Wa()("chanel-info",{notify:Ja.a.get(t,"notify",null)})},e.renderChannelTitle(t)))})))),r.a.createElement("div",{className:"chat-content"},r.a.createElement("div",{className:"toolChat"},r.a.createElement($a.a,{onDrop:this.onDrop},(function(e){var t=e.getRootProps,a=e.getInputProps;return r.a.createElement("section",null,r.a.createElement("div",t(),r.a.createElement("input",a()),r.a.createElement(ce.a,null,r.a.createElement(Ka.a,null))))}))),r.a.createElement("div",{ref:function(t){return e.messagesRef=t},className:"messages"},l.map((function(e,t){var a=Ja.a.get(e,"user");return r.a.createElement("div",{key:t,className:"".concat(e.me?"message-me":"message")},r.a.createElement("img",{src:Ja.a.get(a,"avatar"),alt:"user-img",className:"img-user"}),r.a.createElement("div",{className:"message-body"},r.a.createElement("div",{className:"username"},"".concat(e.me?"You":Ja.a.get(e,"user.name"))," say: "),r.a.createElement("p",{className:"message-text"},"uploads/"==="".concat(e.body).substring(0,8)?"mp3"==="".concat(e.body).substring("".concat(e.body).length-3,"".concat(e.body).length)?r.a.createElement("video",{style:{maxWidth:"20rem"},src:"http://localhost:8080/".concat(e.body),alt:"video",type:"video/mp4",controls:!0}):r.a.createElement("img",{style:{maxWidth:"20rem"},src:"http://localhost:8080/".concat(e.body),alt:"img"}):r.a.createElement("p",null,e.body),r.a.createElement("p",{className:"timing"},e.timing))))})),i?r.a.createElement("div",{className:"emoji",ref:function(t){return e.ref=t}},r.a.createElement(Za.a,{onEmojiClick:function(t,a){e.setState({newMessage:"".concat(a.emoji)}),console.log("".concat(a.emoji))},skinTone:Qa.SKIN_TONE_MEDIUM_DARK})):null),o?r.a.createElement("div",{className:"getAdi"},r.a.createElement("div",null,this.state.audio?r.a.createElement(an,{audio:this.state.audio}):null)):null,Ja.a.get(s,"typing")&&Ja.a.get(s,"typier")!==Ja.a.get(h,"_id")?r.a.createElement("div",{disabled:n.length>1,className:"typing-status"},"Is Typing.."):null,u.size>0?r.a.createElement("div",{className:"message-input"},r.a.createElement("form",{onSubmit:this.handleSubmit,disabled:n.length<1,className:"message-form"},r.a.createElement(ce.a,{onClick:function(){e.setState({showEmoji:!i})}},r.a.createElement(Ga.b,null)),r.a.createElement("textarea",{id:"message",ref:function(t){return e.input=t},type:"text",className:"form-control",value:n,autoComplete:"off",placeholder:"Type something interesting",onKeyUp:function(t){13!==t.keyCode||t.shiftKey||e.handleSubmit(t),13!==t.keyCode&&e.sendTyping()},onChange:function(t){var a=t.target;e.setState({newMessage:a.value})}}),r.a.createElement(ce.a,null,r.a.createElement(Ga.c,{onMouseDown:function(){e.startRecording()},onMouseUp:function(){e.stopRecording()}})),r.a.createElement("button",{disabled:n.length<1,type:"submit",className:"send",onClick:this.handleSubmit}," Send "))):null),r.a.createElement("div",{className:"sidebar-right"},r.a.createElement("div",{className:"title-right"},"Members"),r.a.createElement("div",{className:"chanels"},u.map((function(e,t){var a=Ja.a.get(e,"online",!1);return r.a.createElement("div",{key:t,className:"chanel"},r.a.createElement("div",{className:"user-img-channel"},r.a.createElement("img",{src:Ja.a.get(e,"avatar"),alt:"user-img"}),r.a.createElement("span",{className:Wa()("user-status",{online:a})})),r.a.createElement("div",{className:"chanel-info"},r.a.createElement("h4",null,e.name),r.a.createElement("p",null,"Joined: 2000 years ago")),r.a.createElement("div",{onClick:function(){c.removeMemberFromChannel(s,e)},className:"icon-DelUser"},r.a.createElement(ce.a,{style:{color:"rgb(200, 68, 20)",fontSize:"20"}},r.a.createElement(Ga.a,null))))})))),r.a.createElement(on,null)))}}]),a}(n.Component),sn="http://localhost:8080",ln=function(){function e(){Object(c.a)(this,e)}return Object(s.a)(e,[{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a="".concat(sn,"/").concat(e);return U.a.get(a,t)}},{key:"post",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{headers:{"Content-Type":"application/json",enctype:"multipart/form-data"}},n="".concat(sn,"/").concat(e);return U.a.post(n,t,a)}}]),e}(),un=function(){function e(t){Object(c.a)(this,e),this.store=t,this.ws=null,this.isConnected=!1,this.connect(),this.reconnect()}return Object(s.a)(e,[{key:"reconnect",value:function(){var e=this,t=this.store;window.setInterval((function(){t.getCurrentUser()&&!e.isConnected&&e.connect()}),3e3)}},{key:"decoMessage",value:function(e){var t={};try{t=JSON.parse(e)}catch(a){console.log(a)}return t}},{key:"readMessage",value:function(e){var t=this.store,a=t.getCurrentUser(),n=Ja.a.toString(Ja.a.get(a,"_id")),r=this.decoMessage(e),i=Ja.a.get(r,"action"),o=Ja.a.get(r,"payload");switch(i){case"typing_status":console.log(o);var c=Ja.a.get(o,"obj"),s=Ja.a.get(c,"channelId"),l=Ja.a.get(c,"payload"),u=Ja.a.get(c,"typier");this.onUpdateTypestatus(s,l,u);break;case"user_offline":this.onUpdateUserStatus(o,!1);break;case"user_online":this.onUpdateUserStatus(o,!0);break;case"message_added":var m=t.getActiveChannel(),d=Ja.a.get(m,"_id")!==Ja.a.get(o,"channelId")&&n!==Ja.a.get(o,"userId");this.onAddMessage(o,d);break;default:break;case"channel_added":this.onAddChannel(o)}}},{key:"onUpdateTypestatus",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2?arguments[2]:void 0,n=this.store;n.channels=n.channels.update(e,(function(e){return e&&(e.typing=t,e.typier=a),e})),n.update()}},{key:"onUpdateUserStatus",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=this.store;a.users=a.users.update(e,(function(e){return e&&(e.online=t),e})),a.update()}},{key:"onAddMessage",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=Ja.a.get(e,"user"),n=this.store,r=n.getCurrentUser(),i=Ja.a.toString(Ja.a.get(r,"_id"));a=n.addUserToCache(a);var o={_id:e._id,body:Ja.a.get(e,"body",""),userId:Ja.a.get(e,"userId"),channelId:Ja.a.get(e,"channelId"),created:Ja.a.get(e,"created",new Date),type:Ja.a.get(e,"type"),me:i===Ja.a.toString(Ja.a.get(e,"userId")),user:a};console.log("Mess listen from fetch: ",o),n.setMessage(o,t)}},{key:"onAddChannel",value:function(e){var t=this,a=this.store,n="".concat(e._id),r="".concat(e.userId),i=Ja.a.get(e,"users",[]),o={_id:n,title:Ja.a.get(e,"title",""),lastMessage:Ja.a.get(e,"lastMessage",""),members:new qa.a,messages:new qa.a,isNew:!1,userId:r,created:new Date,typing:!1};Ja.a.each(i,(function(e){var a="".concat(e._id);t.store.addUserToCache(e),o.members=o.members.set(a,!0)})),a.messages.filter((function(e){return Ja.a.toString(e.channelId)===n})).forEach((function(e){var t=Ja.a.toString(Ja.a.get(e,"_id"));o.messages=o.messages.set(t,!0)})),a.addChannel(n,o)}},{key:"send",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.isConnected;if(this.ws&&t){var a=JSON.stringify(e);this.ws.send(a)}}},{key:"authentication",value:function(){var e=this.store.getUserTokenId(),t={action:"auth",payload:"".concat(e)};this.send(t)}},{key:"connect",value:function(){var e=this,t=new WebSocket("ws://localhost:8080");this.ws=t,t.onopen=function(){e.isConnected=!0,e.authentication(),t.onmessage=function(t){e.readMessage(Ja.a.get(t,"data","")),console.log("Message from server: ",t.data)}},t.onclose=function(){e.isConnected=!1,e.store.update()},t.onerror=function(){e.isConnected=!1,e.store.update()}}}]),e}(),mn=function(){function e(t){Object(c.a)(this,e),this.app=t,this.service=new ln,this.messages=new qa.a,this.channels=new qa.a,this.activeChannelId=null,this.user=this.getUserFromLocalStorage(),this.token=this.getTokenFromLocalStorage(),this.users=new qa.a,this.realtime=new un(this),this.fetchUserChannels(),this.search={users:new qa.a}}return Object(s.a)(e,[{key:"upLoadfile",value:function(e){var t=this;this.getUserTokenId()&&this.service.post("api/messages/uploadfiles",e).then((function(e){if(console.log(e.data.success),e.data.success||console.log(e.data.error),e.data.success){var a=(new Ya.ObjectID).toString(),n=t.getActiveChannel(),r=Ja.a.get(n,"_id",null),i=t.getCurrentUser(),o={_id:a,channelId:r,body:e.data.url,userId:Ja.a.get(i,"_id"),type:"VideoOrImage",me:!0};t.addMessage(a,o)}})).catch((function(e){console.log("Send files Error: ",e)}))}},{key:"fetchUserChannels",value:function(){var e=this,t=this.getUserTokenId();if(t){var a={headers:{authorization:t}};this.service.get("api/me/channels",a).then((function(t){var a=t.data;Ja.a.each(a,(function(t){e.realtime.onAddChannel(t)}));var n=Ja.a.get(a,"[0]._id",null);e.fetchChannelMessages(n)})).catch((function(e){console.log("An error fetch user channlels",e)}))}}},{key:"addUserToCache",value:function(e){e.avatar=this.loadUserAvatar(e);var t=Ja.a.toString(e._id);return this.users=this.users.set(t,e),e}},{key:"getUserTokenId",value:function(){return Ja.a.get(this.token,"_id",null)}},{key:"loadUserAvatar",value:function(e){return"https://api.adorable.io/avatars/100/".concat(e._id,".png")}},{key:"startSearchUsers",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.search.users=this.search.users.clear();var a={search:t};this.service.post("api/users/search",a).then((function(t){var a=Ja.a.get(t,"data",[]);Ja.a.each(a,(function(t){t.avatar=e.loadUserAvatar(t);var a="".concat(t._id);e.users=e.users.set(a,t),e.search.users=e.search.users.set(a,t)})),e.update()})).catch((function(e){console.log(" searching error",e)}))}},{key:"setUserToken",value:function(e){if(!e)return this.localStorage.removeItem("token"),void(this.token=null);this.token=e,localStorage.setItem("token",JSON.stringify(e))}},{key:"clearCacheData",value:function(){this.channels=this.channels.clear(),this.users=this.users.clear(),this.messages=this.messages.clear()}},{key:"signOut",value:function(){var e=Ja.a.toString(Ja.a.get(this.user,"_id",null)),t={headers:{authorization:Ja.a.get(this.token,"_id",null)}};this.service.get("api/user/logout",t),this.isConnected(),this.user=null,localStorage.removeItem("me"),localStorage.removeItem("token"),e&&(this.users=this.users.remove(e)),this.clearCacheData(),this.update()}},{key:"getTokenFromLocalStorage",value:function(){if(this.token)return this.token;var e=null,t=localStorage.getItem("token");if(t)try{e=JSON.parse(t)}catch(a){console.log(a)}return e}},{key:"getUserFromLocalStorage",value:function(){var e=this,t=null,a=localStorage.getItem("me");try{t=JSON.parse(a)}catch(i){console.log(i)}if(t){var n=this.getTokenFromLocalStorage(),r={headers:{authorization:Ja.a.get(n,"_id")}};this.service.get("api/users/me",r).then((function(t){var a=t.data,n=Ja.a.get(a,"user");e.setCurrentUser(n),e.setUserToken(a)})).catch((function(t){e.signOut()}))}return t}},{key:"setCurrentUser",value:function(e){if(e.avatar=this.loadUserAvatar(e),this.user=e,e){localStorage.setItem("me",JSON.stringify(e));var t="".concat(e._id);this.users=this.users.set(t,e)}this.update()}},{key:"register",value:function(e){var t=this;return new Promise((function(a,n){t.service.post("api/users",e).then((function(e){return console.log("Account Created ",e),a(e)})).catch((function(e){return n("An Error create your account!")}))}))}},{key:"login",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=Ja.a.toLower(t),r={email:n,password:a};return console.log("Logining with: ",r),new Promise((function(t,a){e.service.post("api/users/login",r).then((function(t){var a=Ja.a.get(t,"data"),n=Ja.a.get(a,"user");e.setCurrentUser(n),e.setUserToken(a),e.realtime.connect(),e.fetchUserChannels()})).catch((function(e){var t=Ja.a.get(e,"res.data.err.message","Login Error");return a(t)}))}))}},{key:"addUserToChannel",value:function(e,t){var a=this.channels.get(e);a&&(a.members=a.members.set(t,!0),this.channels=this.channels.set(e,a),this.update())}},{key:"getSearchUsers",value:function(){return this.search.users.valueSeq()}},{key:"onCreateNewChannel",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Ja.a.get(e,"_id");this.addChannel(t,e),this.setActiveChannelId(t)}},{key:"getCurrentUser",value:function(){return this.user}},{key:"fetchChannelMessages",value:function(e){var t=this,a=this.channels.get(e);if(a&&!Ja.a.get(a,"isFetchMessages")){var n={headers:{authorization:Ja.a.get(this.token,"_id")}};this.service.get("api/channels/".concat(e,"/messages"),n).then((function(n){a.isFetchMessages=!0;var r=n.data;Ja.a.each(r,(function(e){t.realtime.onAddMessage(e)})),t.channels=t.channels.set(e,a)})).catch((function(e){console.log("An error fetching channel 's messages",e)}))}}},{key:"isConnected",value:function(){return this.realtime.isConnected}},{key:"setActiveChannelId",value:function(e){this.activeChannelId=e,this.fetchChannelMessages(e),this.update()}},{key:"getActiveChannel",value:function(){return this.activeChannelId?this.channels.get(this.activeChannelId):this.channels.first()}},{key:"setMessage",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Ja.a.toString(Ja.a.get(e,"_id"));this.messages=this.messages.set(n,e);var r=Ja.a.toString(e.channelId),i=this.channels.get(r);i?(i.messages=i.messages.set(n,!0),i.lastMessage=Ja.a.get(e,"body",""),i.notify=a,this.channels=this.channels.set(r,i)):this.service.get("api/channels/".concat(r)).then((function(e){var a=Ja.a.get(e,"data");t.realtime.onAddChannel(a)})),this.update()}},{key:"addTyping",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e){var a="".concat(Ja.a.get(this.user,"_id",null)),n=Ja.a.get(e,"_id"),r={channelId:n,payload:t,typier:a};console.log("channel typing: ",n),this.realtime.send({action:"typing_status",payload:{obj:r}})}this.update()}},{key:"addMessage",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=this.getCurrentUser();t.user=a,this.messages=this.messages.set(e,t);var n=Ja.a.get(t,"channelId");if(n){var r=this.channels.get(n);r.lastMessage=Ja.a.get(t,"body",""),this.realtime.send({action:"create_channel",payload:r}),this.realtime.send({action:"create_message",payload:t}),r.messages=r.messages.set(e,!0),r.isNew=!1,this.channels=this.channels.set(n,r)}this.update()}},{key:"removeMemberFromChannel",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(e&&t){var a=Ja.a.get(e,"_id"),n=Ja.a.get(t,"_id");e.members=e.members.remove(n),this.channels=this.channels.set(a,e),this.update()}}},{key:"getMessages",value:function(){return this.messages.valueSeq()}},{key:"getMessagesFromChannel",value:function(e){var t=this,a=new qa.a;return e&&e.messages.forEach((function(e,n){var r=t.messages.get(n);a=a.set(n,r)})),a.valueSeq()}},{key:"getMembersFromChannel",value:function(e){var t=this,a=new qa.a;return e&&e.members.forEach((function(e,n){var r="".concat(n),i=t.users.get(r),o=t.getCurrentUser();Ja.a.get(o,"_id")!==Ja.a.get(i,"_id")&&(a=a.set(n,i))})),a.valueSeq()}},{key:"addChannel",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.channels=this.channels.set("".concat(e),t),this.update()}},{key:"getChannels",value:function(){return this.channels=this.channels.sort((function(e,t){return e.updated-t.updated})),this.channels.valueSeq()}},{key:"update",value:function(){this.app.forceUpdate()}}]),e}(),dn=(n.Component,function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).state={store:new mn(Object(Ha.a)(n))},n}return Object(s.a)(a,[{key:"render",value:function(){var e=this.state.store;e.isConnected();return r.a.createElement(cn,{store:e})}}]),a}(n.Component)),hn=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement(Ua,null,r.a.createElement(N,null),r.a.createElement(k.d,null,r.a.createElement(Ra,{path:"/",exact:!0},r.a.createElement(O,null)),r.a.createElement(k.b,{path:"/page1"},r.a.createElement(Na,null)),r.a.createElement(k.b,{path:"/page2"},r.a.createElement(ne,null)),r.a.createElement(k.b,{path:"/page3"},r.a.createElement(dn,null)),r.a.createElement(k.b,{path:"/login"},r.a.createElement(La,null)),r.a.createElement(k.b,{component:j})))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(g.a,null,r.a.createElement(v.a,{domain:"ndscoop.us.auth0.com",clientId:"VjJpWQ2c7EELPIisJatPwQMM4Mh1DjsR",redirectUri:window.location.origin},r.a.createElement(hn,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},36:function(e,t,a){"use strict";a.d(t,"a",(function(){return s})),a.d(t,"i",(function(){return l})),a.d(t,"g",(function(){return u})),a.d(t,"e",(function(){return m})),a.d(t,"f",(function(){return d})),a.d(t,"d",(function(){return h})),a.d(t,"h",(function(){return p})),a.d(t,"c",(function(){return g})),a.d(t,"b",(function(){return f}));var n=a(8),r=a(11),i=a.n(r),o=a(22),c=a(16),s=(a(227),a(228),a(229),new c.a("Song_Database"));s.version(1).stores({songs:"&videoId, timestamp, playbackTimes, [rating+timestamp], [downloadState+timestamp]"}),s.version(2).stores({});var l=function(){var e=Object(o.a)(i.a.mark((function e(t){var a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={videoId:t.id,timestamp:Date.now(),title:t.title,channelTitle:t.channelTitle,playbackTimes:1},e.next=3,s.songs.get({videoId:t.id});case 3:if(!(n=e.sent)){e.next=10;break}return s.songs.update(t.id,{timestamp:Date.now(),playbackTimes:n.playbackTimes+1}),console.log("song updated"),e.abrupt("return",n.rating);case 10:console.log("song added"),s.songs.add(a);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u=function(){var e=Object(o.a)(i.a.mark((function e(t,a){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s.songs.update(t,{rating:a});case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),m=function(){var e=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.songs.orderBy("timestamp").limit(500).reverse().toArray();case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),d=function(){var e=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.songs.where("[rating+timestamp]").between(["liked",c.a.minKey],["liked",c.a.maxKey]).reverse().toArray();case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(){var e=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.songs.where("[downloadState+timestamp]").between(["downloaded",c.a.minKey],["downloaded",c.a.maxKey]).reverse().toArray();case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=function(){var e=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.songs.where("[downloadState+timestamp]").between(["downloading",c.a.minKey],["downloading",c.a.maxKey]).modify((function(e){delete e.downloadState}));case 2:t=e.sent,console.log(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=function(){var e=Object(o.a)(i.a.mark((function e(t,a){var r,o,c,l,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s.songs.update(t,{downloadState:"downloading"}),r="https://i.ytimg.com/vi/".concat(t,"/hqdefault.jpg"),e.next=5,Promise.all([v(r),v(a)]);case 5:return o=e.sent,c=Object(n.a)(o,2),l=c[0],u=c[1],s.songs.update(t,{downloadState:"downloaded",thumbnail:l,audio:u}),e.abrupt("return","downloaded");case 13:return e.prev=13,e.t0=e.catch(0),e.abrupt("return",e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,a){return e.apply(this,arguments)}}(),f=function(){var e=Object(o.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.songs.where({videoId:t}).modify((function(e){delete e.audio,delete e.downloadState}));case 2:return e.abrupt("return","song deleted");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function v(e){var t=e;return new Promise((function(e,a){var n=new XMLHttpRequest;n.open("GET","https://server.ylight.xyz/proxy/"+t),n.responseType="blob",n.onload=function(){var t=n.status;t>=200&&t<300?e(n.response):a({status:t,statusText:n.statusText})},n.send(),setTimeout((function(){n.abort(),n.open("GET","https://server.ylight.xyz/proxy/"+t),n.send()}),1e3)}))}},51:function(e,t,a){"use strict";var n=a(35),r=a(1),i=a.n(r),o=a(118);function c(){var e=Object(n.a)(["\n\tp{\n\t\tmargin-top:2rem;\n\t\t\t}\n\t"]);return c=function(){return e},e}var s=a(34).a.section(c());t.a=function(e){var t=e.children,a=e.title,n=e.subtitle;return i.a.createElement(s,null,i.a.createElement("div",{className:"banner"},i.a.createElement("h1",null,a),i.a.createElement("div",null),i.a.createElement(o.a,null),i.a.createElement("p",null,n),t))}},59:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a(1),r=a.n(n);function i(e){var t=e.children,a=e.hero;return r.a.createElement("header",{className:a},t)}i.defaultProps={hero:"defaultHero"}},79:function(e,t,a){e.exports=a.p+"static/media/logoSvg.e510bd00.svg"},82:function(e,t,a){(function(t,a){var n=parseInt(16777215*Math.random(),10),r=new RegExp("^[0-9a-fA-F]{24}$");try{if(t&&t.from)var i=!0}catch(d){i=!1}for(var o=function e(a){if(a instanceof e)return a;if(!(this instanceof e))return new e(a);if(this._bsontype="ObjectID",null==a||"number"===typeof a)return this.id=this.generate(a),void(e.cacheHexString&&(this.__id=this.toString("hex")));var n=e.isValid(a);if(!n&&null!=a)throw new Error("Argument passed in must be a single String of 12 bytes or a string of 24 hex characters");if(n&&"string"===typeof a&&24===a.length&&i)return new e(new t(a,"hex"));if(n&&"string"===typeof a&&24===a.length)return e.createFromHexString(a);if(null==a||12!==a.length){if(null!=a&&a.toHexString)return a;throw new Error("Argument passed in must be a single String of 12 bytes or a string of 24 hex characters")}this.id=a,e.cacheHexString&&(this.__id=this.toString("hex"))},c=[],s=0;s<256;s++)c[s]=(s<=15?"0":"")+s.toString(16);o.prototype.toHexString=function(){if(o.cacheHexString&&this.__id)return this.__id;var e="";if(!this.id||!this.id.length)throw new Error("invalid ObjectId, ObjectId.id must be either a string or a Buffer, but is ["+JSON.stringify(this.id)+"]");if(this.id instanceof u)return e=m(this.id),o.cacheHexString&&(this.__id=e),e;for(var t=0;t<this.id.length;t++)e+=c[this.id.charCodeAt(t)];return o.cacheHexString&&(this.__id=e),e},o.prototype.get_inc=function(){return o.index=(o.index+1)%16777215},o.prototype.getInc=function(){return this.get_inc()},o.prototype.generate=function(e){"number"!==typeof e&&(e=~~(Date.now()/1e3));var r=("undefined"===typeof a||1===a.pid?Math.floor(1e5*Math.random()):a.pid)%65535,i=this.get_inc(),o=new t(12);return o[3]=255&e,o[2]=e>>8&255,o[1]=e>>16&255,o[0]=e>>24&255,o[6]=255&n,o[5]=n>>8&255,o[4]=n>>16&255,o[8]=255&r,o[7]=r>>8&255,o[11]=255&i,o[10]=i>>8&255,o[9]=i>>16&255,o},o.prototype.toString=function(e){return this.id&&this.id.copy?this.id.toString("string"===typeof e?e:"hex"):this.toHexString()},o.prototype.inspect=o.prototype.toString,o.prototype.toJSON=function(){return this.toHexString()},o.prototype.equals=function(e){return e instanceof o?this.toString()===e.toString():"string"===typeof e&&o.isValid(e)&&12===e.length&&this.id instanceof u?e===this.id.toString("binary"):"string"===typeof e&&o.isValid(e)&&24===e.length?e.toLowerCase()===this.toHexString():"string"===typeof e&&o.isValid(e)&&12===e.length?e===this.id:!(null==e||!(e instanceof o||e.toHexString))&&e.toHexString()===this.toHexString()},o.prototype.getTimestamp=function(){var e=new Date,t=this.id[3]|this.id[2]<<8|this.id[1]<<16|this.id[0]<<24;return e.setTime(1e3*Math.floor(t)),e},o.index=~~(16777215*Math.random()),o.createPk=function(){return new o},o.createFromTime=function(e){var a=new t([0,0,0,0,0,0,0,0,0,0,0,0]);return a[3]=255&e,a[2]=e>>8&255,a[1]=e>>16&255,a[0]=e>>24&255,new o(a)};var l=[];for(s=0;s<10;)l[48+s]=s++;for(;s<16;)l[55+s]=l[87+s]=s++;var u=t,m=function(e){return e.toString("hex")};o.createFromHexString=function(e){if("undefined"===typeof e||null!=e&&24!==e.length)throw new Error("Argument passed in must be a single String of 12 bytes or a string of 24 hex characters");if(i)return new o(new t(e,"hex"));for(var a=new u(12),n=0,r=0;r<24;)a[n++]=l[e.charCodeAt(r++)]<<4|l[e.charCodeAt(r++)];return new o(a)},o.isValid=function(e){return null!=e&&("number"===typeof e||("string"===typeof e?12===e.length||24===e.length&&r.test(e):e instanceof o||(e instanceof u||!!e.toHexString&&(12===e.id.length||24===e.id.length&&r.test(e.id)))))},Object.defineProperty(o.prototype,"generationTime",{enumerable:!0,get:function(){return this.id[3]|this.id[2]<<8|this.id[1]<<16|this.id[0]<<24},set:function(e){this.id[3]=255&e,this.id[2]=e>>8&255,this.id[1]=e>>16&255,this.id[0]=e>>24&255}}),e.exports=o,e.exports.ObjectID=o,e.exports.ObjectId=o}).call(this,a(84).Buffer,a(57))},86:function(e,t,a){"use strict";var n=a(41),r=a.n(n);t.a=r.a.create({baseURL:"https://www.googleapis.com/youtube/v3",params:{part:"snippet",videoCategoryId:"10",type:"video",key:function(){var e="AIzaSyCchF9vxk5W6ZUg-Ncr6Bp53brRSgzeStA".split(" ");return e[Math.floor(Math.random()*Math.floor(e.length))]}()}})},90:function(e,t,a){"use strict";var n=a(41),r=a.n(n);t.a=r.a.create({baseURL:"https://server.ylight.xyz"})}},[[196,1,2]]]);
//# sourceMappingURL=main.331cf5df.chunk.js.map