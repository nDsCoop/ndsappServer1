{"version":3,"sources":["components/sections/FeedbackForm.js"],"names":["captchaToken","FeedbackForm","useContext","GlobalContext","dispatch","setSnackbarMsg","React","useCallback","data","type","snippet","useState","isSending","setIsSending","formEl","useRef","useEffect","loadReCaptcha","component","ref","onSubmit","e","formData","FormData","current","name","get","email","message","preventDefault","post","captcha","axios","then","response","console","log","status","reset","catch","error","container","required","justify","style","width","maxWidth","margin","sitekey","action","verifyCallback","token","document","querySelector","remove","id","label","autoComplete","variant","fullWidth","multiline","rows","transform","borderRadius","marginTop","color","disabled"],"mappings":"sHAaIA,E,qGAyIWC,UAxIM,WAAO,IAAD,EACFC,qBAAWC,KADT,yCACdC,EADc,KAGnBC,EAAiBC,IAAMC,aAC3B,SAAAC,GACEJ,EAAS,CAAEK,KAAM,iBAAkBC,QAASF,MAE9C,CAACJ,IAPsB,EASSE,IAAMK,UAAS,GATxB,mBASlBC,EATkB,KASPC,EATO,KAUnBC,EAASR,IAAMS,OAAO,MAyC5BT,IAAMU,WAAU,WACdC,wBAAc,8CACb,IAUH,OACE,kBAAC,IAAD,CACEC,UAAU,OACVC,IAAKL,EACLM,SAvDe,SAAAC,GAEjBR,GAAa,GACb,IAAMS,EAAW,IAAIC,SAAST,EAAOU,SAC/BC,EAAOH,EAASI,IAAI,QACpBC,EAAQL,EAASI,IAAI,SACrBE,EAAUN,EAASI,IAAI,WAE7BL,EAAEQ,iBAEF,IAAMC,EAAO,CACXL,KAAMA,EACNE,MAAOA,EACPC,QAASA,EACTG,QAAS/B,GAGXgC,IACGF,KAAK,wBAAyBA,GAC9BG,MAAK,SAASC,GACbC,QAAQC,IAAIF,EAAS1B,KAAK6B,QAE1BvB,EAAOU,QAAQc,QACfjC,EAAe6B,EAAS1B,KAAK6B,QAC7BxB,GAAa,MAEd0B,OAAM,SAASC,GAEVA,EAAMN,UACsB,MAA1BM,EAAMN,SAASG,SACjBvB,EAAOU,QAAQc,QAEfjC,EAAe,gCAGnBQ,GAAa,OAqBf4B,WAAS,EACTC,UAAQ,EACRC,QAAQ,SACRC,MAAO,CAAEC,MAAO,MAAOC,SAAU,QAASC,OAAQ,WAElD,kBAAC,YAAD,CACEC,QAAQ,2CACRC,OAAO,cACPC,eArBiB,SAAAC,GAErBnD,EAAemD,EACIC,SAASC,cAAc,qBAC/BC,YAmBT,kBAAC,IAAD,CACEC,GAAG,uBACHC,MAAM,OACN/C,KAAK,OACLgB,KAAK,OACLgC,aAAa,OACbV,OAAO,SACPW,QAAQ,WACRC,WAAS,EACTjB,UAAQ,IAEV,kBAAC,IAAD,CACEa,GAAG,uBACHC,MAAM,QACN/C,KAAK,QACLgB,KAAK,QACLgC,aAAa,QACbV,OAAO,SACPW,QAAQ,WACRC,WAAS,EACTjB,UAAQ,IAEV,kBAAC,IAAD,CACEa,GAAG,uBACHC,MAAM,WACNI,WAAS,EACTC,KAAK,IACLpD,KAAK,OACLgB,KAAK,UACLgC,aAAa,WACbV,OAAO,SACPW,QAAQ,WACRC,WAAS,EACTjB,UAAQ,IAET9B,EACC,kBAAC,IAAD,CACEgC,MAAO,CACLC,MAAO,OACPiB,UAAW,oBACXC,aAAc,SAGhB,KACJ,kBAAC,IAAD,CACEnB,MAAO,CAAEoB,UAAW,QACpBN,QAAQ,WACRO,MAAM,UACNxD,KAAK,SACLyD,WAAUtD,GAGTA,EAAY,mBAAqB","file":"static/js/11.d18d1321.chunk.js","sourcesContent":["import React, {useContext, useCallback} from \"react\";\r\nimport {\r\n  FormControl,\r\n  TextField,\r\n  Button,\r\n  Grid,\r\n  CircularProgress,\r\n  LinearProgress\r\n} from \"@material-ui/core\";\r\nimport { loadReCaptcha, ReCaptcha } from \"react-recaptcha-v3\";\r\nimport axios from \"axios\";\r\nimport { GlobalContext } from \"../GlobalState\";\r\n\r\nlet captchaToken;\r\nconst FeedbackForm = () => {\r\n  const [{}, dispatch] = useContext(GlobalContext);\r\n\r\n  const setSnackbarMsg = React.useCallback(\r\n    data => {\r\n      dispatch({ type: \"setSnackbarMsg\", snippet: data });\r\n    },\r\n    [dispatch]\r\n  );\r\n  const [isSending, setIsSending] = React.useState(false);\r\n  const formEl = React.useRef(null);\r\n\r\n  const submitForm = e => {\r\n    // set state to sending\r\n    setIsSending(true);\r\n    const formData = new FormData(formEl.current);\r\n    const name = formData.get(\"name\");\r\n    const email = formData.get(\"email\");\r\n    const message = formData.get(\"message\");\r\n\r\n    e.preventDefault();\r\n\r\n    const post = {\r\n      name: name,\r\n      email: email,\r\n      message: message,\r\n      captcha: captchaToken\r\n    };\r\n\r\n    axios\r\n      .post(\"http://localhost:3000\", post)\r\n      .then(function(response) {\r\n        console.log(response.data.status);\r\n        // also clear the form\r\n        formEl.current.reset();\r\n        setSnackbarMsg(response.data.status);\r\n        setIsSending(false);\r\n      })\r\n      .catch(function(error) {\r\n        // console.log(error.response.status);\r\n        if (error.response) {\r\n          if (error.response.status === 429) {\r\n            formEl.current.reset();\r\n\r\n            setSnackbarMsg(\"We accept limited feedback!\");\r\n          }\r\n        }\r\n        setIsSending(false);\r\n      });\r\n  };\r\n\r\n  React.useEffect(() => {\r\n    loadReCaptcha(\"6Le1toEUAAAAAITyNwqEMaz3hFAYzciSJDMomrgN\");\r\n  }, []);\r\n\r\n  const verifyCallback = token => {\r\n    // console.log(token);\r\n    captchaToken = token;\r\n    const captchaBox = document.querySelector(\".grecaptcha-badge\");\r\n    captchaBox.remove();\r\n    // remove captcha badge\r\n  };\r\n\r\n  return (\r\n    <Grid\r\n      component=\"form\"\r\n      ref={formEl}\r\n      onSubmit={submitForm}\r\n      container\r\n      required\r\n      justify=\"center\"\r\n      style={{ width: \"90%\", maxWidth: \"500px\", margin: \"0 auto\" }}\r\n    >\r\n      <ReCaptcha\r\n        sitekey=\"6Le1toEUAAAAAITyNwqEMaz3hFAYzciSJDMomrgN\"\r\n        action=\"action_name\"\r\n        verifyCallback={verifyCallback}\r\n      />\r\n      <TextField\r\n        id=\"outlined-email-input\"\r\n        label=\"Name\"\r\n        type=\"text\"\r\n        name=\"name\"\r\n        autoComplete=\"name\"\r\n        margin=\"normal\"\r\n        variant=\"outlined\"\r\n        fullWidth\r\n        required\r\n      />\r\n      <TextField\r\n        id=\"outlined-email-input\"\r\n        label=\"Email\"\r\n        type=\"email\"\r\n        name=\"email\"\r\n        autoComplete=\"email\"\r\n        margin=\"normal\"\r\n        variant=\"outlined\"\r\n        fullWidth\r\n        required\r\n      />\r\n      <TextField\r\n        id=\"outlined-email-input\"\r\n        label=\"Feedback\"\r\n        multiline\r\n        rows=\"4\"\r\n        type=\"text\"\r\n        name=\"message\"\r\n        autoComplete=\"feedback\"\r\n        margin=\"normal\"\r\n        variant=\"outlined\"\r\n        fullWidth\r\n        required\r\n      />\r\n      {isSending ? (\r\n        <LinearProgress\r\n          style={{\r\n            width: \"100%\",\r\n            transform: \"translateY(-12px)\",\r\n            borderRadius: \"2px\"\r\n          }}\r\n        />\r\n      ) : null}\r\n      <Button\r\n        style={{ marginTop: \"10px\" }}\r\n        variant=\"outlined\"\r\n        color=\"primary\"\r\n        type=\"submit\"\r\n        disabled={isSending ? true : false}\r\n      >\r\n        {/* if sending is true then show circular progress */}\r\n        {isSending ? \"Sending Feedback\" : \"Send Feedback\"}\r\n      </Button>\r\n    </Grid>\r\n  );\r\n};\r\n\r\nexport default FeedbackForm;\r\n"],"sourceRoot":""}